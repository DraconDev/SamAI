import{a as ht,b as dt,d as $,f as J,h as K,j as G,l as Y,n as j,o as Z,p as gt,q as xt}from"../../chunks/D4QXYMFG.js";import{a as Bt}from"../../chunks/R6BKBS6G.js";import{a as Tt}from"../../chunks/QPGJKNBT.js";import{a as B}from"../../chunks/NRYYY66K.js";import{a as Gt}from"../../chunks/TJJA7WJ7.js";import{a as _t}from"../../chunks/KVGG4OH6.js";import"../../chunks/ZPJNXK6I.js";import"../../chunks/BGNVWJOE.js";import"../../chunks/ZU7VWBA5.js";import{a as At}from"../../chunks/JJYFTZZZ.js";import"../../chunks/O3PGOLSM.js";import"../../chunks/DQJU6P5N.js";import"../../chunks/F6B4GLR5.js";import"../../chunks/WZACKIKL.js";import"../../chunks/QDA27QWI.js";import{a as Qt}from"../../chunks/4ZAQU4SR.js";import"../../chunks/GEQQUCT3.js";import"../../chunks/RVPFLFJI.js";import"../../chunks/BJ6OZ2RR.js";import"../../chunks/LU2HGRXL.js";import{a as tt,b as yt}from"../../chunks/QAN7YQ5O.js";import"../../chunks/7ETG7F5K.js";import"../../chunks/K3RX6V6Z.js";import{a as Kt}from"../../chunks/QPKKGBHL.js";import{g as bt}from"../../chunks/WOMY7LQF.js";import"../../chunks/DXFQZN2P.js";import"../../chunks/4L3TOTPW.js";import"../../chunks/K5PYBOWW.js";import"../../chunks/NVWM5Y2A.js";import"../../chunks/JIAFCUZI.js";import"../../chunks/APRT2ZHQ.js";import"../../chunks/W4INSQR4.js";import{c as It}from"../../chunks/KOAEEWKV.js";import"../../chunks/DXJBONGG.js";import"../../chunks/NW2F2GVH.js";import"../../chunks/CBDTKGC6.js";import{c as M}from"../../chunks/6IAOONHC.js";import"../../chunks/XCJRDUIT.js";import{e as R}from"../../chunks/Y2RTU6FS.js";import"../../chunks/IE6X6P55.js";import"../../chunks/HLAVUWHF.js";import"../../chunks/F3AKZR3O.js";import{c as x}from"../../chunks/BJ6PO45I.js";import"../../chunks/Y6DWXSB3.js";import"../../chunks/HFXK7G4X.js";import{h as Jt,la as c,na as s}from"../../chunks/URK6S63I.js";import"../../chunks/GJU7DMEZ.js";import{a as Xt}from"../../chunks/PCHDBHHN.js";import{H as Pt}from"../../chunks/6DSWP2JT.js";import{a as st}from"../../chunks/N5EAU2XY.js";import"../../chunks/454JMIH7.js";import"../../chunks/MS4OBPZZ.js";import"../../chunks/RFIQSMEX.js";import"../../chunks/X7IGDKSO.js";import"../../chunks/JX4MH7BP.js";import"../../chunks/IKVWN3LL.js";import"../../chunks/HPHM72CW.js";import"../../chunks/ABK4JG3U.js";import"../../chunks/27O46L5C.js";import{a as Ct,g as P}from"../../chunks/NVNEBEEL.js";import"../../chunks/DIGZHHNW.js";import"../../chunks/Y34OKDQ4.js";import"../../chunks/3JI2HIGL.js";import{K as kt,M as wt}from"../../chunks/F5AXRJSB.js";import"../../chunks/27G4S2R3.js";import{z as St}from"../../chunks/JDSHOLU5.js";import"../../chunks/HFEXSQX6.js";import"../../chunks/QS33EOHT.js";import"../../chunks/3M3IYJ36.js";import"../../chunks/DKMNSB2V.js";import{M as d,z as ut}from"../../chunks/WINLMBYH.js";import"../../chunks/HKBWT4XT.js";import{$ as ft,L as N,W as S,Y as ct,Z as lt,_ as mt,c as L}from"../../chunks/NO5PF2KS.js";import"../../chunks/UB52WFCV.js";import{a as k}from"../../chunks/4B6UFNBQ.js";import{a as Q}from"../../chunks/PJ57C2TE.js";import{c as Vt,f as p}from"../../chunks/GAV6HCJA.js";var Ft=Vt(nt=>{"use strict";"use client";var Zt=Xt();Object.defineProperty(nt,"__esModule",{value:!0});nt.default=void 0;var Rt=Zt(Kt()),te=Jt(),Ie=nt.default=(0,Rt.default)((0,te.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")});var U=p(k()),qt=p(Qt());var I=p(Q());var at=p(Q()),ot="efaidnbmnnnibpcajpcglclefindmkaj",et=(o,e=at.default.runtime.id)=>o.startsWith(Yt(e)),Et=o=>S().name==="Edge"?o.startsWith("https://microsoftedge.microsoft.com"):o.startsWith("https://chrome.google.com/webstore")||o.startsWith("https://chromewebstore.google.com"),Ut=o=>S().name==="Edge"?o.startsWith("edge:")&&!et(o):o.startsWith("chrome:")&&!et(o),Yt=(o=at.default.runtime.id)=>S().name==="Edge"?`edge://extensions/?id=${o}`:`chrome://extensions/?id=${o}`,Wt=o=>N(o,ot),rt=o=>{try{let e=new URL(o);return!e.protocol.includes("extension")||e.hostname!==ot||!e.pathname?"":e.pathname.startsWith("/")?e.pathname.slice(1):e.pathname}catch{}return""};var $t=p(Ft());var l=p(k());var pt=p(Q());var i=p(k()),q=p(Q());var ee=o=>{let[e,t]=(0,i.useState)("light");return(0,i.useEffect)(()=>{let r=window.matchMedia("(prefers-color-scheme: dark)");function n(){return $(o)?S().name==="Edge"?r.matches?"dark":"light":"dark":j(o)||Y(o)||Z(o)?r.matches?"dark":"light":(K(o)||J(o)||G(o),"dark")}t(n());let a=m=>{t(n())};return r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[]),{theme:e}},Lt=100,oe=o=>{let{tabId:e,tabUrl:t}=o,{t:r}=d(),[n,a]=(0,i.useState)(120),[m,W]=(0,i.useState)(window.outerHeight),[F,v]=(0,i.useState)(window.innerHeight),[H,y]=(0,i.useState)("fit-content"),A=(0,i.useRef)(null),D=r("client:social_media_summary_button__text");(0,i.useEffect)(()=>{if(!e)return;let f=()=>{q.default.tabs.get(e).then(u=>{u.height&&v(u.height)}),q.default.windows.getCurrent().then(u=>{u.height&&W(u.height)})},T=setInterval(f,2e3);return f(),()=>clearInterval(T)},[e]),(0,i.useEffect)(()=>{if(A.current){let f=A.current.offsetWidth+12;f<Lt&&y("100%"),a(f)}},[D]);let it=async()=>{let f=await q.default.extension.isAllowedFileSchemeAccess(),T=encodeURIComponent(rt(t)||t),u=`${B}?file=${T}`;f?q.default.tabs.update(e,{url:u}):await new Ct({runtime:"client"}).postMessage({event:"Client_openFileAccessSetting",data:{tabId:e,callbackUrl:u,popupReason:gt(t)}})},{theme:X}=ee(t),h=X==="dark",{toolbarBgColor:_,toolbarHeight:C,containerHeight:O}=(0,i.useMemo)(()=>{let f=64,T=h?"rgb(14, 14, 14)":"#fff";$(t)&&(f=mt(),T=ft(h)),Wt(t)&&(f=64,T=h?"#323232":"#fff");let u=f+5;return ct(m,F)&&(u+=lt()),j(t)&&(u=u+20),{toolbarBgColor:T,toolbarHeight:f,containerHeight:u,isDark:h}},[t,F,m,h]);return i.default.createElement(s,{bgcolor:_,boxSizing:"border-box",justifyContent:"flex-end",width:n,height:O,minWidth:Lt,px:"6px"},i.default.createElement(x,{display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",height:C},i.default.createElement(R,{ref:A,variant:"contained",sx:{padding:"4px 6px",borderRadius:2,minWidth:"fit-content",width:H,border:"1px solid",backgroundColor:"transparent",color:h?"white":"black",borderColor:h?"white":"black","&:hover":{backgroundColor:"transparent",color:h?"white":"black",borderColor:h?"white":"black"}},onClick:it},i.default.createElement(tt,{sx:{fontSize:16,mr:1,color:"inherit"}}),i.default.createElement(c,{fontSize:14,color:"inherit"},D))))},Mt=oe;var w=p(k());var re=S(),ne=re.name==="Chrome"?st("/images/on-boarding/enable-file-access-chrome.webm"):st("/images/on-boarding/enable-file-access-edge.webm"),ie=o=>{let[e,t]=(0,w.useState)("light");return(0,w.useEffect)(()=>{let r=window.matchMedia("(prefers-color-scheme: dark)");function n(){return S().name==="Edge"&&r.matches?"dark":"light"}t(n());let a=m=>{t(n())};return r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[]),{theme:e}},se=o=>{let{tabUrl:e}=o,{t}=d(["client"]),{theme:r}=ie(e);return w.default.createElement(s,{minWidth:400,p:2,sx:{backgroundColor:r==="dark"?"#333333":"#fff"}},w.default.createElement(c,{fontSize:18,fontWeight:700,color:r==="dark"?"#fff":"gba(0, 0, 0, 0.87)"},t("client:popup__extension_page__title")),w.default.createElement(x,{component:"video",src:ne,autoPlay:!0,muted:!0,loop:!0,controls:!1,sx:{mt:2,borderRadius:1,boxShadow:"0px 1px 4px 0px rgba(0, 0, 0, 0.08)"}}))},vt=se;var b=p(k());var V=p(k()),ae=o=>{let{textProps:e,pointProps:t,textList:r}=o;return V.default.createElement(s,{spacing:1},r.map((n,a)=>V.default.createElement(s,{key:a,direction:"row",alignItems:"baseline"},V.default.createElement(x,{sx:{top:-2,position:"relative",width:4,height:4,borderRadius:"50%",backgroundColor:"text.primary",mx:1,flexShrink:0,...t}}),typeof n=="string"?V.default.createElement(c,{color:"text.primary",...e},n):n)))},Ht=ae;var Dt=p(Gt());var g=p(k());var pe=o=>{let{title:e,href:t=`${L}/account/your-plan/`,closeButtonProps:r}=o,{t:n}=d(["common","client"]),a=r?.children??g.default.createElement(Dt.default,{sx:{fontSize:22,color:"text.primary"}});return g.default.createElement(s,{boxSizing:"border-box",direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between",p:2,pb:1.5},g.default.createElement(M,{sx:{flexShrink:0,textDecoration:"none!important"},...t?{href:t,target:"_blank"}:null},g.default.createElement(s,{direction:"row",alignItems:"center",gap:1},g.default.isValidElement(e)?e:g.default.createElement(g.default.Fragment,null,g.default.createElement(tt,{sx:{fontSize:24,color:"inherit"}}),g.default.createElement(c,{color:"text.primary",fontSize:18,fontWeight:600},n("client:popup__title"))))),g.default.createElement(Bt,{title:n("common:settings"),size:"small",variant:"text",sx:{width:24,height:24,color:"inherit",minWidth:"unset"},onClick:m=>{m.stopPropagation(),m.preventDefault(),P({key:"options"})},...r},a))},Ot=pe;var E=p(k());var ce=o=>{let{shortcut:e}=o,{t}=d(["common","client"]);return E.default.createElement(c,{fontSize:14,color:"text.secondary"},E.default.createElement("span",null,`${t("client:popup__set_shortcut__description1")} `),E.default.createElement(x,{sx:{p:"0 4px",display:"inline-block",minWidth:"40px",textAlign:"center",bgcolor:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.16)",borderRadius:"4px",color:"text.primary"},component:"span"},e),E.default.createElement("span",null,` ${t("client:popup__set_shortcut__description2")} `),E.default.createElement(M,{href:"#",onClick:async()=>{await P({key:"shortcuts"})}},t("client:popup__set_shortcut__description3")),E.default.createElement("span",null,` ${t("client:popup__set_shortcut__description4")}`))},zt=ce;var le=o=>{let{shortcut:e}=o,{t}=d(["client"]);return b.default.createElement(s,{minWidth:400},b.default.createElement(Ot,null),b.default.createElement(It,null),b.default.createElement(s,{spacing:2,p:2,pb:0,maxHeight:360,overflow:"auto"},b.default.createElement(bt,{severity:"info"},b.default.createElement(c,{fontSize:14,color:"text.primary",mb:1},t("client:popup__special_page__title")),b.default.createElement(Ht,{textProps:{fontSize:14},textList:[t("client:popup__special_page__item1"),t("client:popup__special_page__item2"),t("client:popup__special_page__item3")]}))),b.default.createElement(s,{spacing:2,p:2},b.default.createElement(zt,{shortcut:e})))},Nt=le;var me=o=>{let{tabId:e,tabUrl:t,isExtensionPage:r,isSpecialPage:n,isMaxAISupportedLocalMediaFile:a}=o;At();let{setAppSettingsState:m}=wt(),{t:W}=d(["common","client"]),[F,v]=(0,l.useState)("");return St(()=>{kt.getAppSettings().then(y=>m(y)),pt.default.commands.getAll().then(y=>{v(y.find(A=>A.name==="_execute_action")?.shortcut||"unset")})}),l.default.createElement(x,{sx:{bgcolor:"background.paper"}},r?l.default.createElement(vt,{tabId:e,tabUrl:t}):a?l.default.createElement(Mt,{tabId:e,tabUrl:t}):n?l.default.createElement(Nt,{tabId:e,tabUrl:t,shortcut:F}):l.default.createElement(s,{sx:{backgroundColor:"background.paper",width:"400px",padding:"16px",boxSizing:"border-box"}},l.default.createElement(s,{sx:{flexDirection:"row",justifyContent:"center"}},l.default.createElement(M,{"data-testid":"maxai--chat-home-view--header--logo",sx:{display:"flex",alignItems:"center",height:"22px",color:"text.primary",textDecoration:"none!important"},href:L,target:"_blank"},l.default.createElement(yt,{sx:{fontSize:22,color:"inherit"}}))),l.default.createElement(c,{color:"text.primary",sx:{fontWeight:600,fontSize:"18px",lineHeight:"27px",textAlign:"center",marginTop:"16px"}},W("client:popup__refresh_page__title")),l.default.createElement(R,{fullWidth:!0,color:"primary",variant:"contained",startIcon:l.default.createElement($t.default,{sx:{fontSize:"24px!important"}}),sx:{marginTop:"24px",height:"48px",fontWeight:500,fontSize:"16px"},onClick:async()=>{e&&(await pt.default.tabs.reload(e),window.close())}},W("client:popup__refresh_page__button"))))},jt=me;var fe=(0,qt.createRoot)(document.getElementById("root")),ue=async o=>(await I.default.scripting.executeScript({target:{tabId:o},func:()=>document.contentType}))[0]?.result,he=async()=>{let o=await I.default.tabs.query({active:!0,currentWindow:!0}),e=o?.[0]?.id,t=o?.[0]?.url||"chrome://",r="";if(e)try{r=await ue(e)}catch{}let n=$(t),a=ht(t),m=dt(t),W=n&&a||window.location.search.includes("pdf=true"),F=n&&m,v=Et(t),H=et(t),y=Ut(t),A=N(t,I.default.runtime.id),D=N(t,ot),it=xt(t),X=a||v||y||A&&!D,h=window.location.search.includes("show=true"),_=W||J(t)||K(t)||G(t)||Y(t)||j(t)||Z(t),C=()=>{fe.render(U.default.createElement(U.default.StrictMode,null,U.default.createElement(ut,null,U.default.createElement(_t,null,U.default.createElement(Tt,null),U.default.createElement(jt,{tabId:e,tabUrl:t,isExtensionPage:H,isSpecialPage:X,isMaxAISupportedLocalMediaFile:_})))))},O=await I.default.extension.isAllowedFileSchemeAccess();if(_||m&&n&&!t.includes(L)&&(_=!0),m&&_&&it&&(_=!1),D){let z=rt(t);if(z){if(O&&!h){I.default.tabs.update(e,{url:`${B}?file=${encodeURIComponent(z)}`}),window.close();return}_=!0,C();return}}if(_){h?C():O||F?(I.default.tabs.update(e,{url:`${B}?file=${encodeURIComponent(t)}`}),window.close()):C();return}if(X||r&&(r.startsWith("image/")||r.startsWith("audio/")||r.startsWith("video/"))){P({url:B});return}if(H){O?P({url:B}):C();return}if(e){try{await I.default.tabs.sendMessage(e,{})}catch{}await Pt(e,"Client_listenOpenChatMessageBox",{type:"shortcut"})&&(I.default.action.setPopup({popup:""}),window.close())}C()};he().finally(()=>{I.default.action.setBadgeText({text:""})});
