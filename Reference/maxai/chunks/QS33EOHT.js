import{e as p,ja as m}from"./3M3IYJ36.js";import{n as r}from"./WINLMBYH.js";import{ga as i}from"./NO5PF2KS.js";var c={"image/jpeg":"image","image/jpg":"image","image/png":"image","image/gif":"image","image/webp":"image","text/plain":"chat_file","application/pdf":"page_content__pdf","text/html":"page_content__webpage","application/vnd.ms-excel":"chat_file_excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"chat_file_excel","text/markdown":"chat_file_markdown","audio/mpeg":"audio","audio/mp3":"audio","audio/mpeg3":"audio","audio/x-mpeg-3":"audio","audio/wav":"audio","audio/vnd.wav":"audio","audio/vnd.wave":"audio","audio/wave":"audio","audio/x-pn-wav":"audio","audio/x-wav":"audio","audio/ogg":"audio","audio/flac":"audio","audio/x-flac":"audio","audio/mp4":"audio","audio/m4a":"audio","audio/x-m4a":"audio"},a={jpg:"image",jpeg:"image",png:"image",txt:"chat_file",pdf:"page_content__pdf",html:"page_content__webpage",htm:"page_content__webpage",xls:"chat_file_excel",xlsx:"chat_file_excel",md:"chat_file_markdown",mp3:"audio",m4a:"audio",wav:"audio",ogg:"audio",flac:"audio"};function A(e,t){let n=t.split(".").pop()?.toLowerCase()||"";return Object.keys(i).forEach(o=>{a[o]="chat_file_code"}),e in c?c[e]:n in a?a[n]:null}var E={"image/jpeg":[255,216,255],"image/png":[137,80,78,71],"application/pdf":[37,80,68,70],"application/zip":[80,75,3,4],"image/gif":[71,73,70,56],"audio/mpeg":[73,68,51],"audio/wav":[82,73,70,70],"audio/ogg":[79,103,103,83],"audio/flac":[102,76,97,67]};function g(e,t){for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}async function l(e){let t=null,n=p()?(await m.proxyFetch(e,{method:"HEAD"}))?.responseRaw:(await r.fetch(e,{method:"HEAD"}))?.response;t=n?.header["content-type"]||n?.header["Content-Type"]||null;let o=t?.split(";")[0]?.trim()||null;return t==="application/octet-stream"?await I(e):o}var I=async e=>{let o=await(await(await fetch(e)).blob()).slice(0,4).arrayBuffer(),x=new Uint8Array(o);for(let[s,u]of Object.entries(E))if(g(x,u))return s;return"unknown"};async function O(e){let t=await l(e);return t?A(t,e):null}export{c as a,a as b,O as c};
