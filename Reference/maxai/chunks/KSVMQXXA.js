import{c as ae,g as ie}from"./IKVWN3LL.js";import{b}from"./Y34OKDQ4.js";import{C as k,h as U,s as w,w as ne}from"./F5AXRJSB.js";import{e as oe}from"./JDSHOLU5.js";import{b as J}from"./DKMNSB2V.js";import{A as Z,E as q,G as ee,H as te,I as re,a as g,k as G,ma as T,n as f,na as a}from"./WINLMBYH.js";import{vb as y}from"./NO5PF2KS.js";import{a as $}from"./4B6UFNBQ.js";import{c as ve,f as R,h as x}from"./GAV6HCJA.js";var Re=ve((hr,Se)=>{var ke="Expected a function",he=NaN,ze="[object Symbol]",Be=/^\s+|\s+$/g,He=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,Qe=/^0o[0-7]+$/i,Ye=parseInt,Xe=typeof global=="object"&&global&&global.Object===Object&&global,je=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Xe||je||Function("return this")(),Je=Object.prototype,Ze=Je.toString,qe=Math.max,et=Math.min,V=function(){return Ke.Date.now()};function tt(r,t,e){var o,n,i,s,c,p,d=0,m=!1,l=!1,E=!0;if(typeof r!="function")throw new TypeError(ke);t=Te(t)||0,Q(e)&&(m=!!e.leading,l="maxWait"in e,i=l?qe(Te(e.maxWait)||0,t):i,E="trailing"in e?!!e.trailing:E);function h(_){var S=o,A=n;return o=n=void 0,d=_,s=r.apply(A,S),s}function Y(_){return d=_,c=setTimeout(O,t),m?h(_):s}function M(_){var S=_-p,A=_-d,K=t-S;return l?et(K,i-A):K}function X(_){var S=_-p,A=_-d;return p===void 0||S>=t||S<0||l&&A>=i}function O(){var _=V();if(X(_))return j(_);c=setTimeout(O,M(_))}function j(_){return c=void 0,E&&o?h(_):(o=n=void 0,s)}function we(){c!==void 0&&clearTimeout(c),d=0,o=p=n=c=void 0}function Ce(){return c===void 0?s:j(V())}function W(){var _=V(),S=X(_);if(o=arguments,n=this,p=_,S){if(c===void 0)return Y(p);if(l)return c=setTimeout(O,t),h(p)}return c===void 0&&(c=setTimeout(O,t)),s}return W.cancel=we,W.flush=Ce,W}function Q(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function rt(r){return!!r&&typeof r=="object"}function ot(r){return typeof r=="symbol"||rt(r)&&Ze.call(r)==ze}function Te(r){if(typeof r=="number")return r;if(ot(r))return he;if(Q(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Q(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(Be,"");var e=Ve.test(r);return e||Qe.test(r)?Ye(r.slice(2),e?2:8):He.test(r)?he:+r}Se.exports=tt});var C=R(ne());var v=class{constructor(){this.cacheService=new w({saveKey:"MAXAI_CLIENT__FEATURES__BILLING__FEATURES_USAGE",cacheTime:t=>(0,C.default)().isSame((0,C.default)(t),"day")})}async fetchFeaturesQuota(){let t=await f.fetch("/user/get_user_feature_quota");if(t.data?.status==="OK"){let e=t.data.data;return{summarizePage:{dailyQuota:e.SUMMARIZE_PAGE_REQUEST_MAX_CNT},summarizePDF:{dailyQuota:e.SUMMARIZE_PDF_REQUEST_MAX_CNT},summarizeYoutube:{dailyQuota:e.SUMMARIZE_YOUTUBE_VIDEO_REQUEST_MAX_CNT},contextMenu:{dailyQuota:e.CONTEXT_MENU_REQUEST_MAX_CNT},search:{dailyQuota:e.SEARCH_REQUEST_MAX_CNT},instantReply:{dailyQuota:e.INSTANT_REPLY_REQUEST_MAX_CNT}}}return null}async getFeaturesUsage(t){let e={summarizePage:{dailyQuota:0,todayUsage:0},summarizePDF:{dailyQuota:0,todayUsage:0},summarizeYoutube:{dailyQuota:0,todayUsage:0},contextMenu:{dailyQuota:100,todayUsage:0},instantReply:{dailyQuota:0,todayUsage:0},search:{dailyQuota:0,todayUsage:0},refreshTime:""},o=await this.cacheService.get();if(o.data&&(e=y(e,o.data)),t||o.expired){let n=await this.fetchFeaturesQuota();n&&(e=y(e,n),await this.cacheService.sync(e))}return(!e.refreshTime||!(0,C.default)().isSame((0,C.default)(e.refreshTime),"day"))&&(e=y(e,{refreshTime:new Date().toISOString(),summarizePage:{todayUsage:0},summarizePDF:{todayUsage:0},summarizeYoutube:{todayUsage:0},contextMenu:{todayUsage:0},instantReply:{todayUsage:0},search:{todayUsage:0}}),await this.cacheService.set(e)),e}async setFeaturesUsage(t,e){let o=await this.getFeaturesUsage(!1);o[t].todayUsage=e,await this.cacheService.set(o)}async syncFeaturesUsage(){return this.getFeaturesUsage(!0)}async clearFeaturesUsage(){await this.cacheService.clear()}};x([U()],v.prototype,"getFeaturesUsage",1);var se="CHROME_EXTENSION_USE_CHAT_GPT_AI_USER_FEATURE_QUOTA_SAVE_KEY",P=class extends v{constructor(){super(),this.init()}async init(){let t=await g.getItem(se);if(t){await g.remove(se);let e={contextMenu:{dailyQuota:t.contextMenuMaxCnt||0,todayUsage:t.contextMenuUsage||0},instantReply:{dailyQuota:t.instantReplyMaxCnt||0,todayUsage:t.instantReplyUsage||0},summarizePage:{dailyQuota:t.summarizePageMaxCnt||0,todayUsage:t.summarizePageUsage||0},summarizePDF:{dailyQuota:t.summarizePDFMaxCnt||0,todayUsage:t.summarizePDFUsage||0},summarizeYoutube:{dailyQuota:t.summarizeYoutubeMaxCnt||0,todayUsage:t.summarizeYoutubeUsage||0},search:{dailyQuota:t.searchMaxCnt||0,todayUsage:t.searchUsage||0},refreshTime:t.refreshTime};await this.cacheService.set(e,{syncTime:t.checkTime})}}};var Rt=new P;var N=class extends J{constructor(){super(...arguments);this.modelUsageCacheService=new w({saveKey:"MAXAI_CLIENT__FEATURES__BILLING__MODEL_USAGE",cacheTime:w.DAILY})}async fetchModelUsage(){let e=await f.fetch("/user/get_user_quota_usage");if(e.data?.status==="OK"){let o=e.data.data;return{fastText:o.fast_text,advancedText:o.advanced_text,imageGenerate:o.image_generate,contentChat:o.content_chat,nextRefreshTime:o.next_refresh_time,proChat:o.pro_chat,proChatReward:o.pro_chat_reward}}return null}async getModelUsage(e){let o={fastText:0,advancedText:0,imageGenerate:0,contentChat:0,proChat:0,proChatReward:0},n=await this.modelUsageCacheService.get();if(n.data&&(Object.assign(o,n.data),n.data={...o}),e||n.expired){let i=await this.fetchModelUsage();i&&(Object.assign(o,i),await this.modelUsageCacheService.sync(o))}return n.data&&(n.data.proChat!==o.proChat||n.data.proChatReward!==o.proChatReward)&&this.emit("onUsageChange",n.data,o),o}async refreshModelUsage(){return await this.getModelUsage(!0)}async clearModelUsage(){await this.modelUsageCacheService.clear()}};x([U()],N.prototype,"getModelUsage",1);var ce="CHROME_EXTENSION_USE_CHAT_GPT_AI_USER_QUOTA_USAGE_SAVE_KEY",F=class extends N{constructor(){super(),this.init()}async init(){let t=await g.getItem(ce);t&&(await g.remove(ce),await this.modelUsageCacheService.set(t))}};var D=new F;var L=Z({key:"BillingModelUsageModelAtom",default:{fastText:0,advancedText:0,imageGenerate:0,contentChat:0,proChat:0,proChatReward:0,loading:!1}});var I=R($());var Ne=()=>q(L),Le=()=>{let r=ee(L),t=te(L),e=(0,I.useCallback)(p=>{r(d=>d.loading===p?d:{...d,loading:p})},[]),o=(0,I.useCallback)(async()=>{e(!0);let p=await D.getModelUsage();r(d=>({...d,...p})),e(!1)},[]),n=(0,I.useCallback)(async()=>{e(!0);let p=await D.refreshModelUsage();r(d=>({...d,...p,synced:!0})),e(!1)},[e]),i=re(({snapshot:p})=>async()=>{let{synced:d}=await p.getPromise(L);d||await n()},[n]),s=(0,I.useCallback)(async()=>{await D.clearModelUsage(),t()},[]),c=(0,I.useCallback)(oe(n,500),[n]);return{loadModelUsage:o,clearModelUsage:s,refreshModelUsage:n,refreshModelUsageOnce:i,debounceRefreshModelUsage:c}},Qt=()=>{let r=Ne(),t=Le();return{loading:r.loading,modelUsage:r,...t}};var de=r=>{let t,e=new Set,o=(d,m)=>{let l=typeof d=="function"?d(t):d;if(!Object.is(l,t)){let E=t;t=m??(typeof l!="object"||l===null)?l:Object.assign({},t,l),e.forEach(h=>h(t,E))}},n=()=>t,c={setState:o,getState:n,getInitialState:()=>p,subscribe:d=>(e.add(d),()=>e.delete(d))},p=t=r(o,n,c);return c},pe=r=>r?de(r):de;var z=R($(),1);var Me=r=>r;function Oe(r,t=Me){let e=z.default.useSyncExternalStore(r.subscribe,()=>t(r.getState()),()=>t(r.getInitialState()));return z.default.useDebugValue(e),e}var le=r=>{let t=pe(r),e=o=>Oe(t,o);return Object.assign(e,t),e},ue=r=>r?le(r):le;var be=[T({display_order:0,path:"/refine_draft/Social media edit or review draft",prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",parent_prompt_id:"",prompt_icon:"Reply",prompt_title:"Edit or review draft",visibility_settings:{allowed_domains:[...b.SOCIAL_MEDIA,...b.CHAT_APP,...b.EMAIL],blocked_domains:[],use_allow_list:!0}}),a({display_order:0,path:"/refine_draft/Social media edit or review draft/Improve writing",prompt_id:"4e54395c-5e8b-4bbd-a309-b6057a4737d3",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Improve writing",prompt_icon:"AutoFix"}),a({display_order:1,path:"/refine_draft/Social media edit or review draft/Fix spelling grammar",prompt_id:"496d1369-941d-49a5-a9ce-68eadd7601de",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Fix spelling grammar",prompt_icon:"Done"}),a({display_order:2,path:"/refine_draft/Social media edit or review draft/Make shorter",prompt_id:"547b5b2d-4f7b-4b39-8fdc-524a31659238",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Make shorter",prompt_icon:"ShortText"}),a({display_order:3,path:"/refine_draft/Social media edit or review draft/Make longer",prompt_id:"1f0b58d6-10cb-4e60-bbc9-10912ca6301c",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Make longer",prompt_icon:"LongText"}),T({display_order:4,path:"/refine_draft/Social media edit or review draft/Change tone",prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",parent_prompt_id:"",prompt_title:"Change tone",prompt_icon:"Voice"}),a({display_order:0,path:"/refine_draft/Social media edit or review draft/Change tone/Professional",prompt_id:"202a7ddd-bea5-46b3-b32c-a0300c7ac1ee",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Professional"}),a({display_order:1,path:"/refine_draft/Social media edit or review draft/Change tone/Friendly",prompt_id:"61404250-a6af-41e2-8b9a-4d6fcfefdb95",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Friendly"}),a({display_order:2,path:"/refine_draft/Social media edit or review draft/Change tone/Straightforward",prompt_id:"ce02e42f-e341-4b94-8bbc-095122507bd2",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Straightforward"}),a({display_order:3,path:"/refine_draft/Social media edit or review draft/Change tone/Confident",prompt_id:"3c3edab4-4125-43ac-89c0-ca95cda06d34",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Confident"}),a({display_order:4,path:"/refine_draft/Social media edit or review draft/Change tone/Casual",prompt_id:"df5768a8-448d-4070-afa1-5307838ed965",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Casual"}),a({display_order:5,path:"/refine_draft/Social media edit or review draft/Simplify language",prompt_id:"3ca990dc-b70b-49b5-abfa-eb1dc8e5f271",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Simplify language",prompt_icon:"AutoAwesome"}),a({display_order:6,path:"/refine_draft/Social media edit or review draft/Paraphrase",prompt_id:"84060107-e962-412b-afa2-f8134e593320",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Paraphrase",prompt_icon:"Autorenew"})],er=a({display_order:7,path:"/refine_draft/Social media edit or review draft/Follow-up AI reply or AI compose",prompt_id:"8c0c38d4-1dfe-498e-8229-05e758b2dc03",parent_prompt_id:"",prompt_title:"Follow-up AI reply or AI compose",prompt_icon:"DefaultIcon"}),me=be;var Pe=[T({display_order:3,path:"/rewrite/Edit or Review",prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",parent_prompt_id:"",prompt_title:"Edit or Review"}),a({display_order:0,path:"/rewrite/Edit or Review/Improve Writing",prompt_id:"4e54395c-5e8b-4bbd-a309-b6057a4737d3",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Improve Writing",prompt_icon:"AutoFix"}),a({display_order:1,path:"/rewrite/Edit or Review/Fix spelling & grammar",prompt_id:"496d1369-941d-49a5-a9ce-68eadd7601de",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Fix spelling & grammar",prompt_icon:"Done"}),a({display_order:2,path:"/rewrite/Edit or Review/Make shorter",prompt_id:"547b5b2d-4f7b-4b39-8fdc-524a31659238",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Make shorter",prompt_icon:"ShortText"}),a({display_order:3,path:"/rewrite/Edit or Review/Make longer",prompt_id:"1f0b58d6-10cb-4e60-bbc9-10912ca6301c",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Make longer",prompt_icon:"LongText"}),T({display_order:4,path:"/rewrite/Edit or Review/Change tone",prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Change tone",prompt_icon:"Voice"}),a({display_order:0,path:"/rewrite/Edit or Review/Change tone/Professional",prompt_id:"202a7ddd-bea5-46b3-b32c-a0300c7ac1ee",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Professional"}),a({display_order:1,path:"/rewrite/Edit or Review/Change tone/Friendly",prompt_id:"61404250-a6af-41e2-8b9a-4d6fcfefdb95",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Friendly"}),a({display_order:2,path:"/rewrite/Edit or Review/Change tone/Straightforward",prompt_id:"ce02e42f-e341-4b94-8bbc-095122507bd2",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Straightforward"}),a({display_order:3,path:"/rewrite/Edit or Review/Change tone/Confident",prompt_id:"3c3edab4-4125-43ac-89c0-ca95cda06d34",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Confident"}),a({display_order:4,path:"/rewrite/Edit or Review/Change tone/Casual",prompt_id:"df5768a8-448d-4070-afa1-5307838ed965",parent_prompt_id:"718dae5a-8c58-47a7-9089-5dc02cedbc3c",prompt_title:"Casual"}),a({display_order:5,path:"/rewrite/Edit or Review/Simplify language",prompt_id:"3ca990dc-b70b-49b5-abfa-eb1dc8e5f271",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Simplify language",prompt_icon:"AutoAwesome"}),a({display_order:6,path:"/rewrite/Edit or Review/Paraphrase",prompt_id:"84060107-e962-412b-afa2-f8134e593320",parent_prompt_id:"30f27496-1faf-4a00-87cf-b53926d35bfd",prompt_title:"Paraphrase",prompt_icon:"Autorenew"})],Fe=[T({display_order:4,path:"/rewrite/Generate from Selection",prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",parent_prompt_id:"",prompt_title:"Generate from Selection"}),a({display_order:0,path:"/rewrite/Generate from Selection/Explain this",prompt_id:"1444ae1f-dbb1-4136-8898-98431ee3a1bb",parent_prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",prompt_title:"Explain this",prompt_icon:"Question"}),a({display_order:0,path:"/rewrite/Generate from Selection/Get answer",prompt_id:"c93afaf2-080c-4646-a4dc-5e638f9a0cdb",parent_prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",prompt_title:"Get answer",prompt_icon:"PlayArrow"}),T({display_order:1,path:"/rewrite/Generate from Selection/Translate",prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",parent_prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",prompt_title:"Translate",prompt_icon:"Translate"}),a({display_order:0,path:"/rewrite/Generate from Selection/Translate/English",prompt_id:"b517f321-5533-41e5-8ed0-64eb6aa4b7bd",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"English"}),a({display_order:1,path:"/rewrite/Generate from Selection/Translate/Chinese (Simplified)",prompt_id:"e5a30298-52e9-431d-89d8-6f5431c236c9",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Chinese (Simplified)"}),a({display_order:2,path:"/rewrite/Generate from Selection/Translate/Chinese (Traditional)",prompt_id:"0cb5746c-b879-4ac4-86fb-49f366c81542",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Chinese (Traditional)"}),a({display_order:3,path:"/rewrite/Generate from Selection/Translate/Portuguese",prompt_id:"481f6d4a-9045-4cd0-b5e7-1eec6822bed3",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Portuguese"}),a({display_order:4,path:"/rewrite/Generate from Selection/Translate/Spanish",prompt_id:"1aabb1d3-f1af-4e81-aab9-fe4d16630cc3",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Spanish"}),a({display_order:5,path:"/rewrite/Generate from Selection/Translate/French",prompt_id:"ad6cebdb-c5ab-4db5-8776-95d6381b90de",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"French"}),a({display_order:6,path:"/rewrite/Generate from Selection/Translate/Korean",prompt_id:"6de2edc2-019f-4a6c-9051-a15aa11338a0",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Korean"}),a({display_order:7,path:"/rewrite/Generate from Selection/Translate/Vietnamese",prompt_id:"24766e7e-a419-4992-aaaf-786a37a0e111",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Vietnamese"}),a({display_order:8,path:"/rewrite/Generate from Selection/Translate/Japanese",prompt_id:"2a753c24-a5cb-496a-a34b-1037e366e690",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Japanese"}),a({display_order:9,path:"/rewrite/Generate from Selection/Translate/Russian",prompt_id:"3aca0447-12a5-4453-b4b2-64e45f16598a",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Russian"}),a({display_order:10,path:"/rewrite/Generate from Selection/Translate/German",prompt_id:"8b6f4e3f-7669-44a8-a020-fb88c5c9d592",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"German"}),a({display_order:11,path:"/rewrite/Generate from Selection/Translate/Turkish",prompt_id:"fee4c3e1-8970-436a-a535-e6085f283973",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Turkish"}),a({display_order:12,path:"/rewrite/Generate from Selection/Translate/Italian",prompt_id:"d1484846-cba5-4b2b-9fef-0a2d0f4b15b7",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Italian"}),a({display_order:13,path:"/rewrite/Generate from Selection/Translate/Dutch",prompt_id:"96248543-4145-4b5c-b4eb-e6398695a24e",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Dutch"}),a({display_order:14,path:"/rewrite/Generate from Selection/Translate/Polish",prompt_id:"f8a45478-0da3-4c34-8306-b922b68fab5b",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Polish"}),a({display_order:15,path:"/rewrite/Generate from Selection/Translate/Arabic",prompt_id:"c78b028f-ae08-4c3b-830b-c71bc03ead25",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Arabic"}),a({display_order:16,path:"/rewrite/Generate from Selection/Translate/Hebrew",prompt_id:"e361913f-b0af-443f-8122-1affa88478be",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Hebrew"}),a({display_order:17,path:"/rewrite/Generate from Selection/Translate/Indonesian",prompt_id:"d4051326-c55b-4611-944a-3457ff0a8ed7",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Indonesian"}),a({display_order:18,path:"/rewrite/Generate from Selection/Translate/Swedish",prompt_id:"9b1b232b-c036-4131-bd6c-c2e5e690c4ea",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Swedish"}),a({display_order:19,path:"/rewrite/Generate from Selection/Translate/Filipino",prompt_id:"0d6cce80-546b-4b09-8fe5-f84f195d9d2e",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Filipino"}),a({display_order:20,path:"/rewrite/Generate from Selection/Translate/Norwegian",prompt_id:"2628ad04-86f3-4306-a8bf-5c6a4e7cfbc6",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Norwegian"}),a({display_order:21,path:"/rewrite/Generate from Selection/Translate/Suomi",prompt_id:"8f877635-6585-4de0-9a7d-812a2e987ab2",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Suomi"}),a({display_order:22,path:"/rewrite/Generate from Selection/Translate/Danish",prompt_id:"bc8e3fbc-13ab-4150-b748-93c1bd60969d",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Czech"}),a({display_order:23,path:"/rewrite/Generate from Selection/Translate/Hungarian",prompt_id:"9809d92a-0ec1-4f55-bf03-782a79e8bf37",parent_prompt_id:"4d226b15-9e21-42ba-8af8-57d6fbae5a3d",prompt_title:"Hungarian"}),a({display_order:2,path:"/rewrite/Generate from Selection/Summarize",prompt_id:"7b26a25c-e869-4832-b5bb-b19685f5c3a5",parent_prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",prompt_title:"Summarize",prompt_icon:"Summarize"}),a({display_order:3,path:"/rewrite/Generate from Selection/Find action items",prompt_id:"bd4f9e5a-f9d4-4d1c-aab8-43f951739ab0",parent_prompt_id:"80e6d17b-2cf5-456b-944b-5f645f0e12de",prompt_title:"Find action items",prompt_icon:"Bulleted"})],De=[T({display_order:5,path:"/rewrite/Write with AI",prompt_id:"3cc70e82-29db-45a0-8136-7ba4cf90bf8e",parent_prompt_id:"",prompt_title:"Write with AI"}),a({display_order:0,path:"/rewrite/Write with AI/Write a blog post",prompt_id:"c0f7a642-9e34-4b1f-a2ee-1c4c5e93fa23",parent_prompt_id:"3cc70e82-29db-45a0-8136-7ba4cf90bf8e",prompt_title:"Continue writing",prompt_icon:"DefaultIcon"},[{name:"MAXAI_CONTINUE_WRITING_TEXT_DRAFT",type:"text",hint:"Enter context",default_value:"{{SELECTED_TEXT}}",hidden:!0}])],We=[...Pe,...Fe,...De],_e=We;var Ee=R(ne()),fe=r=>{let e=(r.match(/[a-zA-Z0-9]+/g)||[]).join("_").toUpperCase(),o=(0,Ee.default)().format("YYYYMMDDHHmmss");return e?`CUSTOM_VARIABLE_${e}_${o}`:`CUSTOM_VARIABLE_${o}`};var Ge=()=>[..._e,...ae,...me,...ie],B=class{constructor(t,e){this.key=t,this.defaultValue=e}async getLocalCache(){return await g.getItem(this.key)||this.defaultValue}async setLocalCache(t){let e;if(typeof t=="function"){let o=await this.getLocalCache();e=t(o)}else e=t;await g.setItem(this.key,e)}async clearLocalCache(){await g.remove(this.key)}},H=class extends B{constructor(){super("MAXAI_CLIENT__FEATURES__CONTEXT_MENU__DATA",[]);this.presetContextMenuItems=[];this.presetContextMenuItems=Ge()}async checkUpdate(){let e=await g.getItem("MAXAI_CLIENT__FEATURES__CONTEXT_MENU__DATA__TIMESTAMP");if(!e)return await this.fetchLiteContextMenuGroupData(""),await g.setItem("MAXAI_CLIENT__FEATURES__CONTEXT_MENU__DATA__TIMESTAMP",Date.now()),!0;let o=await f.fetch("/user/prompt/check_update",{method:"POST",body:JSON.stringify({local_snapshot_timestamp:e})});return o.data?.data?.need_update?(await this.fetchLiteContextMenuGroupData(""),await g.setItem("MAXAI_CLIENT__FEATURES__CONTEXT_MENU__DATA__TIMESTAMP",o.data?.data?.latest_update_timestamp||Date.now()),!0):!1}async addOrUpdateContextMenuGroup(e){let o=e.prompt_id||G(),n=await f.fetch("/user/prompt/upsert_group_node",{method:"POST",body:JSON.stringify({...e,prompt_icon:void 0,prompt_id:o})});if(await this.fetchLiteContextMenuGroupData(""),n.data?.status==="OK"){let i=await this.getContextMenuById(o);return{data:i,error:"",success:!!i}}else return{data:null,error:n.data?.detail||"Network error",success:!1}}async addOrUpdateContextMenu(e){let o=e.prompt_id||G(),n=await f.fetch("/user/prompt/upsert_prompt_action",{method:"POST",body:JSON.stringify({...e,prompt_id:o})});if(await this.fetchLiteContextMenuGroupData(""),n.data?.status==="OK"){let i=await this.getContextMenuById(o);return{data:i,error:"",success:!!i}}else return{data:null,error:n.data?.detail||"Network error",success:!1}}async deleteContextMenuNode(e,o){let n=await f.fetch("/user/prompt/delete_node",{method:"POST",body:JSON.stringify({prompt_id:e})});return await this.fetchLiteContextMenuGroupData(""),n}async deleteContextMenuNodes(e){if(e.length===0)return;let o=await f.fetch("/user/prompt/delete_nodes",{method:"POST",body:JSON.stringify({prompt_ids:e})});return await this.fetchLiteContextMenuGroupData(""),o}async moveContextMenuNode(e,o,n,i){let s=await f.fetch("/user/prompt/move_node",{method:"POST",body:JSON.stringify({source_prompt_id:e,destination_parent_prompt_id:n,target_display_order:i})});return await this.fetchLiteContextMenuGroupData(""),s}async getContextMenuChildren(e,o){return(await this.getLocalCache()).filter(s=>s.path.startsWith(e)&&s.path!==e)}async getContextMenuById(e,o=!0){let i=(await this.getLocalCache()).find(s=>s.prompt_id===e)||this.presetContextMenuItems.find(s=>s.prompt_id===e);if(i)return i;if(!i&&o){let s=await this.getContextMenuDetail(e);if(s)return await this.setLocalCache(c=>[...c,s]),s}return null}async getContextMenuByPath(e){return(await this.getLocalCache()).find(i=>i.path===e)}async getContextMenuDetail(e){return(await f.fetch("/user/prompt/get_node_detail",{method:"POST",body:JSON.stringify({id:e})})).data?.data||null}async forceRefresh(e){if(!e)return this.fetchLiteContextMenuGroupData("");let o=await this.fetchLiteContextMenuGroupData("",{basic:!1}),n=!1;for(let i of o)if(i.type==="chat_complete"&&i.prompt_template?.default){let s=i.prompt_template.default,c=/{{([^\s{}]+)}}/g,p=[...s.matchAll(c)].map(l=>l[1]),m=[...new Set(p)].filter(l=>!i.variables.find(E=>E.name===l)).map(l=>{let E={name:fe(l),hint:l,type:"text"};return i.prompt_template={...i.prompt_template,default:s.replaceAll(`{{${E.hint}}}`,`{{${E.name}}}`)},E});m.length>0&&(n=!0,i.variables.push(...m),await f.fetch("/user/prompt/upsert_prompt_action",{method:"POST",body:JSON.stringify(i)}))}return n&&await this.setLocalCache(o),o}async fetchLiteContextMenuGroupData(e,o){let{depth:n=2,basic:i=!0}=o||{},s=await f.fetch("/user/prompt/get_children_nodes",{method:"POST",body:JSON.stringify({parent_prompt_id:e,basic:i,depth:e===""?10:n})}),c=s.data?.data||[];return s.data?.status==="OK"&&(e===""?await this.setLocalCache(c):await this.setLocalCache(p=>{let d=p.find(l=>l.prompt_id===e);return d?[...p.filter(l=>!(l.path.startsWith(d.path)&&l.path!==d.path)),...c]:p})),c}async clearLocalCache(){await super.clearLocalCache()}},ge=H;var $e=new ge,fr=$e;var u=R($(),1),nt=R(Re(),1);function at(r=!1){if(typeof r!="boolean")throw new Error("defaultValue must be `true` or `false`");let[t,e]=(0,u.useState)(r),o=(0,u.useCallback)(()=>{e(!0)},[]),n=(0,u.useCallback)(()=>{e(!1)},[]),i=(0,u.useCallback)(()=>{e(s=>!s)},[]);return{value:t,setValue:e,setTrue:o,setFalse:n,toggle:i}}var it=typeof window<"u"?u.useLayoutEffect:u.useEffect;function st(r){let[t,e]=(0,u.useState)(r??0),o=(0,u.useCallback)(()=>{e(s=>s+1)},[]),n=(0,u.useCallback)(()=>{e(s=>s-1)},[]),i=(0,u.useCallback)(()=>{e(r??0)},[r]);return{count:t,increment:o,decrement:n,reset:i,setCount:e}}function ct(r,t){let e=(0,u.useRef)(r);it(()=>{e.current=r},[r]),(0,u.useEffect)(()=>{if(t===null)return;let o=setInterval(()=>{e.current()},t);return()=>{clearInterval(o)}},[t])}function Tr({countStart:r,countStop:t=0,intervalMs:e=1e3,isIncrement:o=!1}){let{count:n,increment:i,decrement:s,reset:c}=st(r),{value:p,setTrue:d,setFalse:m}=at(!1),l=(0,u.useCallback)(()=>{m(),c()},[m,c]),E=(0,u.useCallback)(()=>{if(n===t){m();return}o?i():s()},[n,t,s,i,o,m]);return ct(E,p?e:null),[n,{startCountdown:d,stopCountdown:m,resetCountdown:l}]}function dt(){let r=(0,u.useRef)(!1);return(0,u.useEffect)(()=>(r.current=!0,()=>{r.current=!1}),[]),(0,u.useCallback)(()=>r.current,[])}var Ie={width:void 0,height:void 0};function Sr(r){let{ref:t,box:e="content-box"}=r,[{width:o,height:n},i]=(0,u.useState)(Ie),s=dt(),c=(0,u.useRef)({...Ie}),p=(0,u.useRef)(void 0);return p.current=r.onResize,(0,u.useEffect)(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;let d=new ResizeObserver(([m])=>{let l=e==="border-box"?"borderBoxSize":e==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",E=Ae(m,l,"inlineSize"),h=Ae(m,l,"blockSize");if(c.current.width!==E||c.current.height!==h){let M={width:E,height:h};c.current.width=E,c.current.height=h,p.current?p.current(M):s()&&i(M)}});return d.observe(t.current,{box:e}),()=>{d.disconnect()}},[e,t,s]),{width:o,height:n}}function Ae(r,t,e){return r[t]?Array.isArray(r[t])?r[t][0][e]:r[t][e]:t==="contentBoxSize"?r.contentRect[e==="inlineSize"?"width":"height"]:void 0}var ye=ue(r=>({onStartPolling:null,onCompletePolling:null,setOnStartPolling:t=>{r({onStartPolling:t})},setOnStopPolling:t=>{r({onCompletePolling:t})}})),yr=async r=>{if(await k.isLogin())return!0;let{maxWaitTime:e=3*60*1e3,customLoginCheck:o,emitEvent:n=!1}=r||{},{onStartPolling:i,onCompletePolling:s}=ye.getState();if(n)if(i)await i();else return!1;return new Promise(async c=>{let p=null,d=async m=>{if(m?.data?.event==="MAX_AI_CONNECT_ACCOUNT"&&m.data.type==="COMPLETE"){window.removeEventListener("message",d),p&&clearTimeout(p);let l=o?await o():await k.isLogin();n&&s&&await s(l),c(l)}};p=setTimeout(()=>{c(!1)},e),window.addEventListener("message",d)})},wr=r=>{ye.getState().setOnStartPolling(r)};export{Rt as a,D as b,Ne as c,Le as d,Qt as e,er as f,me as g,_e as h,fe as i,fr as j,Tr as k,Sr as l,pe as m,Oe as n,ue as o,yr as p,wr as q};
