import{b as m}from"./BGNVWJOE.js";import{r as A}from"./F5AXRJSB.js";import{C as h,z as d}from"./JDSHOLU5.js";import{A as o,F as c,G as l,I as S}from"./WINLMBYH.js";import{t as p}from"./HKBWT4XT.js";import{a as E}from"./4B6UFNBQ.js";import{f as x}from"./GAV6HCJA.js";var y=x(E());var g=o({key:"AuthState",default:{isLogin:!1}}),a=o({key:"AuthLoadingState",default:!1}),L=o({key:"AuthLoadedState",default:!1});var C=()=>{let[s]=c(m),f=l(g),r=e=>{f(typeof e=="function"?t=>{let n=e(t);return p(t,n)?t:n}:e)},i=S(({snapshot:e,set:t})=>async()=>{if(!await e.getPromise(a)){t(a,!0);try{let k=await A.getAccessToken();r(k?u=>({...u,isLogin:!0}):u=>({...u,isLogin:!1}))}catch{}finally{t(L,!0),t(a,!1)}}},[]);return d(()=>void i()),h(i),(0,y.useEffect)(()=>{s.open&&i()},[s.open]),null},v=C;export{v as a};
