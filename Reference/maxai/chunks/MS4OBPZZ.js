import{h as d,s as u}from"./F5AXRJSB.js";import{b as h,e as m}from"./DKMNSB2V.js";import{a as n,n as f}from"./WINLMBYH.js";import{vb as s}from"./NO5PF2KS.js";import{h as l}from"./GAV6HCJA.js";var v={chat_sync:!0,voice_input:!1,enabled_artifacts:!1,project_content:!1,page_translator_v2:!1},i=class{constructor(){this.cacheService=new u({saveKey:"MAXAI_CLIENT__FEATURES__CHAT__BETA_FEATURES",cacheTime:u.DAILY})}async fetchBetaFeatures(){let e=await f.fetch("/user/user_beta_features",{method:"GET"});return e.data?.status==="OK"?s({},v,e.data.data):null}async getBetaFeatures(e){let t={...v},a=await this.cacheService.get();if(a.data&&(t=s(t,a.data)),e||a.expired){let p=await this.fetchBetaFeatures();p&&(t=s(t,p),await this.cacheService.sync(t))}return t}async clearBetaFeatures(){await this.cacheService.clear()}};l([d()],i.prototype,"getBetaFeatures",1);var b="MAXAI_BETA_FEATURES_SAVE_KEY",o=class extends i{constructor(){super(),this.init()}async init(){let e=await n.getItem(b);if(e){await n.remove(b);let t=new Date(e.lastModified).toISOString();await this.cacheService.set(e.data,{syncTime:t})}}};var C=new o;var c=class r extends h{constructor(t){super();this.name=t;this.inputValue="";this.subscribers=[];this.ref=null;this.isComposing=!1;this.log=new m(t)}static{this.mediators={}}static getMediator(t){return r.mediators[t]||(r.mediators[t]=new r(t)),r.mediators[t]}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(a=>a!==t)}bindRef(t){this.ref=t}unbindRef(){this.ref=null}focus(){this.log.info("focus"),this.ref?.focus(),setTimeout(()=>{this.ref?.focus()},500)}blur(){this.ref?.blur()}getCursorPosition(){return this.ref&&this.ref.selectionStart||0}updateInputValue(t,a){this.log.info("updateInputValue",t),t!==this.inputValue&&(this.inputValue=t,this.notifySubscribers(a))}getInputValue(){return this.inputValue}setIsComposing(t){this.isComposing=t}resetInputValue(){this.updateInputValue("")}notifySubscribers(t){this.subscribers.forEach(a=>{a(this.inputValue,t)})}};function V(r){return c.getMediator(r)}export{C as a,V as b};
