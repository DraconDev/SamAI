import{a as aa,b as Pr}from"./GFBSDQGY.js";import"./3BL6ANT4.js";import{A as ji,B as Ri,C as Gi,D as qi,E as Qi,F as Zi,G as ta,H as dp,I as Ar,J as ra,K as na,N as ia,a as Ci,b as qe,c as vi,d as mp,e as cp,f as wi,h as Pi,i as ki,j as Bi,k as Me,l as wr,m as Mi,n as Po,o as Oi,p as Li,q as Di,r as Wi,s as Tr,t as Hi,u as Ui,v as Ni,w as Fi,x as zi,y as $i,z as Vi}from"./XRFP4TG5.js";import"./DNC6SQVP.js";import"./WMPFE6AN.js";import{D as Ki,R as Mo,S as Eo,Y as Ji,h as Be,q as Ei}from"./336Q5MDV.js";import"./KNHMBNA7.js";import"./SGC75SOE.js";import"./KIGND2UM.js";import{b as yi,e as Ii,f as Si}from"./M3UQDCQB.js";import"./SVFJ2TB3.js";import{a as Ir}from"./25VTRN6P.js";import{c as Kn,e as bi}from"./GLUVJUTU.js";import{a as br,b as Cr}from"./WSOUGDJD.js";import"./IEC6JE54.js";import{a as yr,m as pp}from"./ONFLPVF7.js";import{$a as pi,$b as xi,Aa as ii,F as vr,Ma as vo,Pb as fi,Qa as ne,Qb as wo,Ta as ai,Xa as ge,_a as si,ac as hi,b as Gn,c as $,da as Zn,e as Yn,ha as Jn,i as Ge,ia as ti,ib as li,ic as _i,ja as ei,jb as ui,kc as To,ma as oi,ob as mi,pb as ci,tb as di,za as ni}from"./DP6NKKZS.js";import{c as gi}from"./2WYRGMZA.js";import{e as yo,h as Ae,k as qn}from"./EVCDN77N.js";import{a as Xn}from"./VM6AHHKV.js";import"./JAJUIZ4Q.js";import{b as Io,f as Qn}from"./2Z5YDK5O.js";import{f as lp,q as $t}from"./PRI4DNE5.js";import"./74EYRKBC.js";import"./LIH4LVLA.js";import"./ZRYDJGAJ.js";import"./UAB7UEHC.js";import"./XHCCXCYD.js";import"./TIMUG6T2.js";import"./SUSBQMNS.js";import{b as fr,j as $n}from"./3T6N3UXS.js";import{c as Dn,d as dr,j as Wn,p as gr}from"./KSVMQXXA.js";import{d as Hn}from"./2BN67YOS.js";import{a as Fn,f as zn,h as bo}from"./F5E7GPVZ.js";import{a as zt}from"./3MCB6OT2.js";import{a as sp}from"./72XNZIFC.js";import"./FAXKEQHZ.js";import{b as _r}from"./4JH5L7TP.js";import"./IR2EOPWG.js";import"./YYNJ5ORL.js";import"./BTVCBEO2.js";import"./R6BKBS6G.js";import"./QPGJKNBT.js";import{a as ri}from"./NRYYY66K.js";import{a as up}from"./TJJA7WJ7.js";import"./KVGG4OH6.js";import"./ZPJNXK6I.js";import{a as Sn,b as kt}from"./BGNVWJOE.js";import"./ZU7VWBA5.js";import"./JJYFTZZZ.js";import{a as hr}from"./O3PGOLSM.js";import"./DQJU6P5N.js";import"./F6B4GLR5.js";import"./WZACKIKL.js";import{d as Vn}from"./QDA27QWI.js";import"./4ZAQU4SR.js";import"./GEQQUCT3.js";import"./RVPFLFJI.js";import{g as mr,h as xo}from"./BJ6OZ2RR.js";import"./LU2HGRXL.js";import{a as Un,b as Nn}from"./QAN7YQ5O.js";import{a as je}from"./7ETG7F5K.js";import{a as go,b as Cn,c as ur}from"./K3RX6V6Z.js";import{a as Ft}from"./QPKKGBHL.js";import{G as Re,h as fn,p as xn,q as hn}from"./WOMY7LQF.js";import{b as co,c as fo}from"./DXFQZN2P.js";import{c as _n}from"./4L3TOTPW.js";import{C as In,c as tt,i as bn,k as yn}from"./K5PYBOWW.js";import"./NVWM5Y2A.js";import"./JIAFCUZI.js";import"./APRT2ZHQ.js";import"./W4INSQR4.js";import"./KOAEEWKV.js";import{N as re,h as uo,l as mo,o as cn,z as dn}from"./DXJBONGG.js";import"./NW2F2GVH.js";import"./CBDTKGC6.js";import{c as St}from"./6IAOONHC.js";import"./XCJRDUIT.js";import{b as gn,e as W}from"./Y2RTU6FS.js";import"./IE6X6P55.js";import"./HLAVUWHF.js";import"./F3AKZR3O.js";import{c as P}from"./BJ6PO45I.js";import{a as mn}from"./Y6DWXSB3.js";import{b as ap}from"./HFXK7G4X.js";import{a as lo,b as ln,c as ce,d as un,h as Nt,la as b,na as _}from"./URK6S63I.js";import"./GJU7DMEZ.js";import{a as Ut}from"./PCHDBHHN.js";import{a as sa}from"./DQJX4ERA.js";import"./RBCVDQ72.js";import{a as jt,b as Bo,c as Xi}from"./B5IQJ4CT.js";import"./4VUWARP7.js";import"./J63ZRIPB.js";import{d as Yi}from"./3RZ46UQL.js";import{a as ko}from"./ZES4ZAHH.js";import"./MAPXS3RR.js";import{a as ea,b as oa}from"./7BDZPPQH.js";import"./IOVDQST2.js";import{q as Vt,r as F,w as fe}from"./JK5JXJMM.js";import"./PSTOF4IU.js";import{b as Ln,d as Bt}from"./VT4ATK36.js";import{A as Ao,E as Xt,F as ft,G as rt,s as Ti,y as Ai,z as ke}from"./6DSWP2JT.js";import{a as Mt}from"./N5EAU2XY.js";import{c as Sr,d as Pe}from"./454JMIH7.js";import{b as So}from"./MS4OBPZZ.js";import"./RFIQSMEX.js";import"./X7IGDKSO.js";import"./JX4MH7BP.js";import"./IKVWN3LL.js";import"./HPHM72CW.js";import"./ABK4JG3U.js";import"./27O46L5C.js";import{a as xr,c as jn,g as Co}from"./NVNEBEEL.js";import{a as vn,b as Yt,j as wn}from"./DIGZHHNW.js";import{k as Rn}from"./Y34OKDQ4.js";import"./3JI2HIGL.js";import{E as On,M as Te,N as z,c as Bn,g as we,w as cr,y as Mn,z as En}from"./F5AXRJSB.js";import{k as ho}from"./27G4S2R3.js";import{C as _o,E as kn,H as de,b as Tn,e as An,v as Pn,z as ve}from"./JDSHOLU5.js";import{c as sn,h as pn}from"./HFEXSQX6.js";import"./QS33EOHT.js";import{E as nn,F as Ve,H as an,ja as po}from"./3M3IYJ36.js";import{f as Jr}from"./DKMNSB2V.js";import{A as en,E as ut,F as oe,G as Ie,J as on,M as v,a as io,i as ao,k as $e,la as pr,ta as lr,ua as so,za as rn}from"./WINLMBYH.js";import{x as Se}from"./HKBWT4XT.js";import{F as ar,J as sr,M as Xr,c as R,d as Gr,ka as Kr,n as ee,o as no,qa as Qr,ra as Zr,wb as tn,x as qr,y as Yr}from"./NO5PF2KS.js";import"./UB52WFCV.js";import{a as C}from"./4B6UFNBQ.js";import"./PJ57C2TE.js";import{c as Ht,f as d}from"./GAV6HCJA.js";var Ba=Ht(Do=>{"use strict";"use client";var Lp=Ut();Object.defineProperty(Do,"__esModule",{value:!0});Do.default=void 0;var Dp=Lp(Ft()),Wp=Nt(),ud=Do.default=(0,Dp.default)((0,Wp.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen")});var Ma=Ht(Wo=>{"use strict";"use client";var Hp=Ut();Object.defineProperty(Wo,"__esModule",{value:!0});Wo.default=void 0;var Up=Hp(Ft()),Np=Nt(),cd=Wo.default=(0,Up.default)((0,Np.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")});var Er=Ht(Ho=>{"use strict";"use client";var Jp=Ut();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=void 0;var tl=Jp(Ft()),el=Nt(),og=Ho.default=(0,tl.default)((0,el.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMadeOutlined")});var Xa=Ht(Uo=>{"use strict";"use client";var rl=Ut();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.default=void 0;var nl=rl(Ft()),il=Nt(),dg=Uo.default=(0,nl.default)((0,il.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")});var Za=Ht(No=>{"use strict";"use client";var al=Ut();Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var sl=al(Ft()),pl=Nt(),Og=No.default=(0,sl.default)((0,pl.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCardOutlined")});var Ja=Ht(Fo=>{"use strict";"use client";var ll=Ut();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var ul=ll(Ft()),ml=Nt(),Dg=Fo.default=(0,ul.default)((0,ml.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")});var ts=Ht(zo=>{"use strict";"use client";var cl=Ut();Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var dl=cl(Ft()),fl=Nt(),Hg=zo.default=(0,dl.default)((0,fl.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRightOutlined")});var es=Ht($o=>{"use strict";"use client";var gl=Ut();Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var xl=gl(Ft()),hl=Nt(),Ng=$o.default=(0,xl.default)((0,hl.jsx)("path",{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5z"}),"LogoutOutlined")});var os=Ht(Vo=>{"use strict";"use client";var _l=Ut();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var bl=_l(Ft()),Cl=Nt(),zg=Vo.default=(0,bl.default)((0,Cl.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNoneOutlined")});var rs=Ht(jo=>{"use strict";"use client";var yl=Ut();Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var Il=yl(Ft()),Sl=Nt(),Vg=jo.default=(0,Il.default)((0,Sl.jsx)("path",{d:"M14 11c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2m-6.02 7.25c-.29-.9-.57-1.94-.76-3L6 16.07v2.98zM12 2s5 2 5 11l2.11 1.41c.56.37.89 1 .89 1.66V22l-5-2H9l-5 2v-5.93c0-.67.33-1.29.89-1.66L7 13c0-9 5-11 5-11m0 2.36S9 6.38 9 13c0 2.25 1 5 1 5h4s1-2.75 1-5c0-6.62-3-8.64-3-8.64m6 14.69v-2.98l-1.22-.81c-.19 1.05-.47 2.1-.76 3z"}),"RocketOutlined")});var L=d(C());var nt=d(C()),pa=d(dp());var{getBrowser:fp}=new pa.UAParser,gp=e=>{let[t,o]=(0,nt.useState)(null),[r,n]=(0,nt.useState)(null),[s,p]=(0,nt.useState)(!0),i=(0,nt.useMemo)(()=>t?t==="Chrome"?"chrome://settings/help":t==="Edge"?"edge://settings/help":t==="Chromium"?"https://download-chromium.appspot.com/":t==="Opera"?"opera://about":t==="Firefox"?"https://support.mozilla.org/en-US/kb/update-firefox-latest-release":t==="Safari"?"https://support.apple.com/en-us/HT204416":"":"",[t]);return ve(()=>{let a=fp();o(a.name),n(a.version);let u=Number(a.version?.match(/\d+/)?.[0]||""),l=!0;u!==0&&(a.name==="Chrome"&&u<103&&(l=!1),a.name==="Edge"&&u<103&&(l=!1),p(l),l||rt().then(async g=>{g.ON_BOARDING_RECORD_BROWSER_VERSION||(await Ar("CLIENT","[CLIENT] Browser version is not compatible",`Browser: [${a.name}]
Version: [${a.version}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),await ft("ON_BOARDING_RECORD_BROWSER_VERSION",!0))}))}),!t||!r||s?nt.default.createElement(nt.default.Fragment,null,e.children):nt.default.createElement(_,{sx:{mx:"auto",px:1,flex:1,alignItems:"center",justifyContent:"center",maxWidth:400},spacing:2},nt.default.createElement(Qi,{sx:{color:"text.primary",fontSize:"88px"}}),nt.default.createElement(b,{fontSize:"26px",fontWeight:800,color:"text.primary"},`Update your ${t} browser`),nt.default.createElement(b,{textAlign:"center",fontSize:"16px",color:"text.primary"},"In order to use this extension, please update your browser to the latest version. Your current browser version is not compatible."),nt.default.createElement(St,{underline:"none",href:"#",target:"_blank",onClick:a=>{a.preventDefault(),a.stopPropagation(),Ar("CLIENT","[CLIENT] Browser clicked update",`Browser: [${t}]
Version: [${r}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),Co({url:i})}},nt.default.createElement(W,{sx:{height:"48px",fontSize:"16px",borderRadius:"24px"},variant:"contained",color:"primary"},`Update ${t} browser`)))},la=gp;var mt=d(C()),ga=d(tn());ln();un();var I=d(C());ln();un();var Kt=d(C());var xp=e=>{let{children:t,rootId:o,root:r,disabled:n,platformFeatureCover:s,onClickContextMenuItem:p}=e,{changeMode:i}=pi(),{liteContextMenuActionsItems:a}=Ei("",{enabledFavorite:!1}),u=(0,Kt.useRef)(null),[l,g]=(0,Kt.useState)(null);return(0,Kt.useEffect)(()=>{if(r&&o&&!u.current){let c=document.createElement("style");c.setAttribute("data-emotion-id",o),r.appendChild(c),u.current=lo({key:"max-ai-input-assistant-context-menu",prepend:!0,container:c}),g(u.current)}},[r,o]),!r||!l?null:Kt.default.createElement(ce,{value:l},Kt.default.createElement(Zi,{defaultPlacement:"bottom-start",defaultFallbackPlacements:["bottom-end","bottom","top-start","top-end","top","right","left"],root:r,menuList:a,needAutoUpdate:!0,hoverOpen:!1,menuWidth:260,referenceElement:t,onClickContextMenu:async(c,x)=>{let m=x?.target,f=br(m);if(f){let h=Cr(f);_r(h,f,{platformFeatureCover:s})}p(c)},onClickReferenceElement:c=>{i("list");let x=c.target,m=br(x);if(m){let f=Cr(m);_r(f,m)}},hoverIcon:null,...n?{customOpen:!0,referenceElementOpen:!1}:{}}))},kr=xp;var xe=d(C());var Ye={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailComposeButton > Got it"},hp=e=>{let{showStateTrigger:t,...o}=e,{t:r}=v(),[n,s]=(0,xe.useState)(!1);return(0,xe.useEffect)(()=>{t?Mo(Ye.sceneType).then(p=>{p||Eo(Ye.sceneType).then(()=>{s(!0)})}):s(!1)},[t]),xe.default.createElement(Be,{autoCloseOnClick:!0,hideBackdrop:!0,sx:{visibility:"hidden",zIndex:5},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Ye.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Ye.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Ye.id,...o},xe.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON__text")))},ua=hp;var Qt=d(C());var Xe={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailAIReplyButton > Got it"},_p=e=>{let{showStateTrigger:t,...o}=e,{t:r}=v(),[n,s]=(0,Qt.useState)(!1);return(0,Qt.useEffect)(()=>{t?Mo(Xe.sceneType).then(p=>{p||Eo(Xe.sceneType).then(()=>{s(!0)})}):s(!1)},[t]),Qt.default.createElement(Be,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:1},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Xe.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Xe.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Xe.id,footerLeft:Qt.default.createElement(Ji,null),...o},Qt.default.createElement(_,{spacing:.5},Qt.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON__text"))))},ma=_p;var Et=e=>e?typeof e=="function"?e():e:{},ca="sidebar_reply_rewrite",Cp=e=>{let{observerData:t,placement:o}=e,[r,n]=(0,I.useState)(o);(0,I.useEffect)(()=>{sr()==="facebook.com"?n("left"):n(o)},[o]);let{id:s,config:p,buttonGroup:i,shadowRootElement:a}=t,{InputAssistantBoxSx:u,DropdownButtonStyle:l,CTAButtonStyle:g,instantReplyWebsiteType:c,needReplyDivider:x,replyDividerStyle:m,loadingButtonStyle:f,needListenElementSelector:h,brandLogoStyle:w,CTAButtonBoxStyle:k}=p,{askAIWithShortcutsV2:S}=wo(),{conversationId:B,setConversationIds:E}=$(M=>({conversationId:M.conversationIds[0]||"",setConversationIds:M.setConversationIds})),[H,Q]=(0,I.useState)(null),ot=Ie(si),{createConversation:Zt}=ge(),Jt=(0,I.useRef)(null),O=(0,I.useRef)(null),Lt=async(M,X)=>{let Z=(await Zt("Chat",{reason:"initCreate"}))[0].id;E([Z]),ot(c??Rn(sr())),jt();let It=Se(M),q=[{type:"SET_VARIABLE_MAP",parameters:{VariableMap:{OperationElementSelector:{key:"OperationElementSelector",value:`[maxai-input-assistant-button-id="${s}"]`,isBuiltIn:!0},[pr.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name]:{key:pr.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name,value:c,isBuiltIn:!0}}}}];q.push({type:"SET_VARIABLE",parameters:{Variable:{key:Ln,value:ca}}}),await S(q.concat(It),{conversationId:Z}),X?.onClick&&(Jt.current?.closeTooltip(),O.current?.closeTooltip(),setTimeout(()=>{X.onClick?.(t)},100)),setTimeout(()=>{So("chatBoxSetVariablesModalInputMediator").focus()},500)},[j,pe]=(0,I.useState)($e()),le=(0,I.useRef)(h);(0,I.useEffect)(()=>{if(!le.current)return;let M=le.current,X=[];if(M.forEach(Z=>{(Array.isArray(Z)?Z:[Z]).forEach(q=>{let Y=Array.from(document.querySelectorAll(q));Y.length&&X.push(...Y)})}),X.length===0)return;let pt=new MutationObserver(()=>{pe($e())});return X.forEach(Z=>{pt.observe(Z,{attributes:!0,childList:!0,subtree:!0})}),()=>{pt.disconnect()}},[]);let At=Et(g),Dt=Et(l),be=Et(u),N=Et(m),te=Et(f),Gt=Et(w),Ue=Et(k),yt=(0,I.useRef)(null),{t:Ne}=v(["client"]),qt=ne(B),[Ce,oo]=(0,I.useState)(!1),{isDarkMode:ye}=zt(),ue=(0,I.useMemo)(()=>{let M=Se(At),X=Se(Dt),pt=Se(N),Z={},It={};if(i.forEach(q=>{let Y=Et(q.CTAButtonStyle),J=Et(q.DropdownButtonStyle),lt=Et(q.replyDividerStyle);Y&&(M=Object.assign(M||{},{...Y})),J&&(X=Object.assign(X||{},{...J})),lt&&(pt=Object.assign(pt||{},{...lt}))}),Z){let{backgroundColor:q="white",hoverBackgroundColor:Y="#F2F2F2",color:J="rgba(0, 0, 0, 0.87)",hoverColor:lt="rgba(0, 0, 0, 0.87)",borderColor:Pt="rgba(0, 0, 0, 0.87)",hoverBorderColor:er="rgba(0, 0, 0, 0.87)",borderRadius:or="4px 0 0 4px",borderWidth:rr="1px",iconSize:ze=20,padding:nr="8px 12px",...me}=M||{},ir=me["&:hover"]||{};delete me["&:hover"],Z={minWidth:"unset",backgroundColor:q,color:J,borderColor:Pt,borderRadius:or,fontSize:`${ze}px`,borderWidth:rr,borderStyle:"solid",position:"relative",padding:nr,iconSize:ze,transition:"unset","&:hover":{color:lt,backgroundColor:Y,borderColor:er,...ir},...me}}if(It){let{backgroundColor:q="white",hoverBackgroundColor:Y="#F2F2F2",color:J="rgba(0, 0, 0, 0.87)",hoverColor:lt="rgba(0, 0, 0, 0.87)",borderColor:Pt="rgba(0, 0, 0, 0.87)",hoverBorderColor:er="rgba(0, 0, 0, 0.87)",borderRadius:or="0 4px 4px 0",borderWidth:rr="1px",iconSize:ze=20,padding:nr="8px 4px",...me}=X||{},ir=me["&:hover"]||{};delete me["&:hover"],It={minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:q,color:J,borderColor:Pt,borderRadius:or,fontSize:`${ze}px`,borderWidth:rr,borderStyle:"solid",padding:nr,iconSize:ze,borderLeftWidth:"0px","&:hover":{color:lt,backgroundColor:Y,borderColor:er,...ir},...me}}return{ctaButtonSx:Z,dropdownButtonSx:It,replyDividerStyle:pt}},[i,At,Dt,N]),ro=(0,I.useMemo)(()=>{let M=Se(be)||{};i.forEach(Z=>{let It=Et(Z.InputAssistantBoxSx);It&&Object.assign(M,It)});let X=ye?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.08)",pt={boxShadow:`0px 2px 3px 1px ${X}, 1px 0px 2px 0px ${X}, -1px 0px 2px 0px ${X}`,...M?.["&:hover"]};return pt&&delete M["&:hover"],{...Ce?pt:{},...M}},[Ce,i,ye,be]);(0,I.useEffect)(()=>{Q(document.querySelector(`#${pn}`)?.shadowRoot?.querySelector("div"))},[]);let[Wt,Fe]=(0,I.useState)(null);return(0,I.useEffect)(()=>{if(Fe(a?.querySelector("div:first-of-type")),a){let M=document.createElement("style");a.appendChild(M),yt.current=lo({key:"max-ai-input-assistant-context-menu",prepend:!0,container:M})}},[a]),I.default.createElement(I.default.Fragment,null,I.default.createElement("div",{key:j,style:{height:"inherit",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4px",...ro},onMouseEnter:()=>oo(!0),onMouseLeave:()=>oo(!1)},i[0]&&I.default.createElement(qe,{defaultContextMenuPath:i[0].liteContextMenuRootPath},I.default.createElement(kr,{rootId:s,root:H,disabled:qt,onClickContextMenuItem:M=>{Lt(M.actions,i[0])}},I.default.createElement(P,{style:{width:"100%",height:"inherit",display:"flex",alignItems:"center"},component:"div"},yt.current&&I.default.createElement(ce,{value:yt.current},I.default.createElement(hr,{placement:r,zIndex:2e6,PopperProps:{container:a},title:i[0]?.tooltip?Ne(i[0].tooltip):""},I.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",...Ue}},I.default.createElement(P,{position:"absolute",top:`-${At?.transparentHeight||0}px`,width:"100%",height:`${At?.transparentHeight||0}px`,bgcolor:Yt?"transparent":"red",zIndex:2000001}),I.default.createElement(W,{id:`maxAIInputAssistantCtaButton${s}`,"data-testid":"maxai-input-assistant-cta-button","data-button-key":i[0].liteContextMenuRootPath,disabled:qt,sx:ue.ctaButtonSx,onMouseDownCapture:M=>{M.stopPropagation(),M.preventDefault()},onMouseUpCapture:M=>{M.stopPropagation(),M.preventDefault()},onClick:M=>{M.stopPropagation(),M.preventDefault(),Lt(i[0].actions,i[0])}},qt?I.default.createElement(re,{size:ue.ctaButtonSx?.iconSize||16,sx:{fontSize:"inherit",color:"rgba(125, 125, 125, 0.6)",...te||{}}}):I.default.createElement(Un,{sx:{fontSize:"inherit",color:"inherit",...Gt}}),i[0].displayText&&I.default.createElement(b,{component:"span",fontSize:"14px",sx:i[0].displayTextSx,noWrap:!0},typeof i[0].displayText=="function"?i[0].displayText(Ne):i[0].displayText)),I.default.createElement(P,{position:"absolute",bottom:`-${At?.transparentHeight||0}px`,width:"100%",height:`${At?.transparentHeight||0}px`,bgcolor:Yt?"transparent":"red",zIndex:2000001})))))),i[0].onboardingTooltipSceneType&&yt.current&&I.default.createElement(ce,{value:yt.current},i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?I.default.createElement(ma,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Wt,container:Wt}):i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON"?I.default.createElement(ua,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Wt,container:Wt}):I.default.createElement(Pr,{container:Wt,sceneType:i[0].onboardingTooltipSceneType}))),x&&I.default.createElement("div",{style:{display:"flex",height:"70%",width:"1px",flexShrink:0,backgroundColor:"rgba(0, 0, 0, 0.12)",...ue.replyDividerStyle}}),i[1]&&I.default.createElement(qe,{defaultContextMenuPath:i[1].liteContextMenuRootPath},I.default.createElement(kr,{platformFeatureCover:ca,rootId:s,root:H,disabled:qt,onClickContextMenuItem:M=>{Lt(M.actions,i[1])}},I.default.createElement(P,null,I.default.createElement(hr,{placement:r,controlsRef:O,zIndex:2e6,PopperProps:{container:H},title:i[1]?.tooltip?Ne(i[1].tooltip):""},I.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer"}},yt.current&&I.default.createElement(ce,{value:yt.current},I.default.createElement(P,{position:"absolute",top:`-${Dt?.transparentHeight||0}px`,width:"100%",height:`${Dt?.transparentHeight||0}px`,bgcolor:Yt?"transparent":"red",zIndex:2000001}),I.default.createElement(P,{id:`maxAIInputAssistantDropdownButton${s}`,"data-testid":"maxai-input-assistant-dropdown-button","data-button-key":i[1].liteContextMenuRootPath,sx:{...ue.dropdownButtonSx,...qt?{pointerEvents:"none",cursor:"not-allowed"}:{}}},I.default.createElement($t,{icon:"Rewrite",sx:{fontSize:"inherit",color:"inherit"}})),I.default.createElement(P,{position:"absolute",bottom:`-${Dt?.transparentHeight||0}px`,width:"100%",height:`${Dt?.transparentHeight||0}px`,bgcolor:Yt?"transparent":"red",zIndex:2000001})))))),i[1].onboardingTooltipSceneType&&yt.current?I.default.createElement(ce,{value:yt.current},I.default.createElement(Pr,{container:Wt,sceneType:i[1].onboardingTooltipSceneType})):null),I.default.createElement(go,null,I.default.createElement("span",{style:{all:"inherit"}},"id:",t.config.id))))},fa=Cp;var yp=()=>{let{appSettings:e}=Te(),[t,o]=(0,mt.useState)([]),r=(0,mt.useMemo)(()=>new Ai,[]),{pageUrl:n}=Li(),s=(0,mt.useMemo)(()=>{let i=Sr(n);return Wi[i]||null},[n]);(0,mt.useEffect)(()=>(r.createInputAssistantButtonListener(o),()=>{r.destroy()}),[r]);let p=(0,mt.useMemo)(()=>{let i=Sr();return i==="mail.google.com"?e.userSettings?.inputAssistantButton?.gmail===!0:i==="outlook.live.com"||i==="outlook.office.com"||i==="outlook.office365.com"?e.userSettings?.inputAssistantButton?.outlook===!0:i==="twitter.com"?e.userSettings?.inputAssistantButton?.twitter===!0:i==="linkedin.com"?e.userSettings?.inputAssistantButton?.linkedIn===!0:i==="facebook.com"?e.userSettings?.inputAssistantButton?.facebook===!0:i==="youtube.com"||i==="studio.youtube.com"?e.userSettings?.inputAssistantButton?.youtube===!0:i==="instagram.com"?e.userSettings?.inputAssistantButton?.instagram===!0:i==="discord.com"?e.userSettings?.inputAssistantButton?.discord===!0:i==="app.slack.com"?e.userSettings?.inputAssistantButton?.slack===!0:i==="web.whatsapp.com"?e.userSettings?.inputAssistantButton?.whatsApp===!0:i==="web.telegram.org"?e.userSettings?.inputAssistantButton?.telegram===!0:i==="messenger.com"?e.userSettings?.inputAssistantButton?.messenger===!0:!1},[e.userSettings?.inputAssistantButton]);return(0,mt.useEffect)(()=>{let i=u=>{let l=u.target;l&&l instanceof Element&&s?.selectors?.some(g=>l.matches(g))&&Tr.getInstance().setLastFocusInstantReplyInput(l)},a=()=>{window.removeEventListener("focus",i,{capture:!0}),Tr.getInstance().setLastFocusInstantReplyInput(void 0)};return p?window.addEventListener("focus",i,{capture:!0}):a(),()=>{a()}},[r,p,s?.selectors]),(0,mt.useEffect)(()=>{p?r.continue():r.pause()},[r,p]),mt.default.createElement(mt.default.Fragment,null,t.map(i=>(0,ga.createPortal)(mt.default.createElement(fa,{observerData:i,key:i.id}),i.renderRootElement,i.id)))},xa=yp;var Oo=(e=!1)=>{let t=e?"rgba(255, 255, 255, 0.87)":"rgba(0, 0, 0, 0.87)",o=e?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)";return e?{frame:"#333",tabBackground:"#333",tabBackgroundInactive:"#222",tabBackgroundHover:"rgba(255, 255, 255, 0.08)",tabText:t,tabTextInactive:o}:{frame:"#fff",tabBackground:"#fff",tabBackgroundInactive:"#eee",tabBackgroundHover:"rgba(0, 0, 0, 0.08)",tabText:t,tabTextInactive:o}};var Br=d(C()),gt=(0,Br.createContext)({theme:Oo(!1),maxAIBrowserWindows:[]}),ha=(0,Br.createContext)({tabId:"",tabData:null});var Rt=d(C());var Ke=d(C()),Sp=e=>{let{tab:t}=e,o=(p,i)=>{let a={status:"loading",viewerController:p};i?.doc_type==="image"&&(a.favIconUrl=i.s3?.doc_url||""),F.update(t.id,a)},r=()=>{F.update(t.id,{status:"complete"})},n=()=>{F.update(t.id,{status:"unloaded"})},s=()=>{if(t.customRender)return t.customRender(t);if(t.documentId)return Ke.default.createElement(ei,{documentId:t.documentId,title:t.title,onLoadStart:o,onLoadSuccess:r,onLoadError:n,viewerProps:t.viewerProps});if(t.url)return Ke.default.createElement(ti,{url:t.url,title:t.title,onLoadStart:o,onLoadSuccess:r,onLoadError:n,...t.viewerProps})};return Ke.default.createElement(ha.Provider,{value:{tabData:t,tabId:t.id}},Ke.default.createElement(_,{sx:{height:"100%",width:"100%",display:t.active?"flex":"none",borderRadius:1,overflow:"auto"},tabIndex:-1,component:"div","data-testid":`maxai--browser-panel--${t.id}`},s()))},_a=Sp;var ba=d(je());var G=d(C()),vp=e=>{let{tabInstance:t}=e,{theme:o}=(0,G.useContext)(gt),{id:r,title:n,favIconUrl:s,active:p,status:i}=t,a=i==="loading",{document:u}=Qn(t.documentId),l=async()=>{await F.update(r,{active:!0})},g=async()=>{await F.remove(r)},c=(0,G.useMemo)(()=>({maxWidth:"144px",flexDirection:"row",alignItems:"center",gap:"8px",borderRadius:p?"6px 6px 0 0":"6px",padding:"6px 8px",backgroundColor:p?o.tabBackground:o.tabBackgroundInactive,color:p?o.tabText:o.tabTextInactive,position:"relative",width:0,flex:1,"&:hover":{background:p?o.tabBackground:o.tabBackgroundHover}}),[p]);return G.default.createElement(_,{onClick:l,className:"maxai--browser-window--header--tabs-bar--tab","data-testid":`maxai--browser-tab--${r}`,sx:c},G.default.createElement(_,{sx:{width:"16px",height:"16px",position:"relative",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,"& > img":{width:a?"12px":"16px",height:a?"12px":"16px",boxSizing:"border-box",borderRadius:a?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"},"& > svg":{fontSize:a?"12px":"16px",boxSizing:"border-box",borderRadius:a?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"}}},G.default.createElement(re,{thickness:4,size:16,sx:{position:"absolute",color:"primary.main",display:a?"block":"none"}}),s?G.default.createElement("img",{src:s,width:16,height:16,alt:n}):u?.doc_type?G.default.createElement(Io,{documentType:u.doc_type}):null),G.default.createElement(b,{fontSize:"14px",noWrap:!0,textAlign:"left",width:0,flex:1},n),G.default.createElement(tt,{"aria-label":"close",sx:{flexShrink:0,width:"16px",height:"16px",padding:0},onClick:g},G.default.createElement(ba.default,{sx:{fontSize:"12px"}})),p&&G.default.createElement(wp,null))},wp=()=>{let{theme:e}=(0,G.useContext)(gt);return G.default.createElement(P,{sx:{position:"absolute",width:"100%",bottom:"-6px",height:"6px",left:0,backgroundColor:e.tabBackground}},G.default.createElement(P,{sx:{width:"8px",height:"8px",position:"absolute",left:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},G.default.createElement(P,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",left:"-8px"}})),G.default.createElement(P,{sx:{width:"8px",height:"8px",position:"absolute",right:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},G.default.createElement(P,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",right:"-8px"}})))},Ca=vp;var Qe=d(C()),Tp=e=>{let{tabs:t}=e,{theme:o}=(0,Qe.useContext)(gt);return Qe.default.createElement(_,{className:"maxai--browser-window--header--tabs-bar",sx:{flexDirection:"row",alignItems:"center",gap:"6px",padding:"6px",background:o.tabBackgroundInactive}},t.map(r=>Qe.default.createElement(Ca,{tabInstance:r,key:r.id})))},ya=Tp;var xt=d(C()),Ap=e=>{let{windowInstance:t}=e,{theme:o}=(0,xt.useContext)(gt),{id:r,type:n,width:s,height:p,alwaysOnTop:i,focused:a,top:u,left:l}=t,[g,c]=(0,xt.useState)(t.tabs);(0,xt.useEffect)(()=>{let m=()=>{c(t.tabs)};return F.addListener("onCreated",m),F.addListener("onRemoved",m),F.addListener("onUpdated",m),m(),()=>{F.removeListener("onCreated",m),F.removeListener("onRemoved",m),F.removeListener("onUpdated",m)}},[r]);let x=(0,xt.useMemo)(()=>{let m={width:"100%",height:"100%",position:"absolute",boxSizing:"border-box",zIndex:0,top:0,left:0,borderRadius:1,backgroundColor:o.frame,boxShadow:" 0px 2px 8px 0px rgba(0, 0, 0, 0.12)",overflow:"hidden",border:"1px solid",borderColor:"border.main"};return i?m.zIndex=9999:a&&(m.zIndex=100),n==="popup"&&(m.zIndex=1e3,m.width=s,m.height=p),m},[s,p,n,a,i,u,l,o.frame]);return xt.default.createElement(_,{sx:x,"data-testid":r,className:"maxai--browser-window",component:"div",tabIndex:-1,onKeyDownCapture:m=>{(m.metaKey||m.ctrlKey)&&m.key==="w"&&F.query({active:!0,currentWindow:!0}).then(f=>{f.forEach(h=>{F.remove(h.id)})})}},xt.default.createElement(_,{className:"maxai--browser-window--header"},!t.hiddenTabBar&&xt.default.createElement(ya,{tabs:g})),g.map(m=>xt.default.createElement(_a,{tab:m,key:m.id})))},Ia=Ap;var Ze=d(C()),Pp=e=>{let{sx:t,...o}=e,{maxAIBrowserWindows:r}=(0,Ze.useContext)(gt);return r.length===0?null:Ze.default.createElement(_,{sx:{flex:1,boxSizing:"border-box",width:"100%",height:"100%",position:"relative",...t},...o},r.map(n=>Ze.default.createElement(Ia,{windowInstance:n,key:n.id})))},Lo=Pp;var kp=e=>{let{autoClearWindows:t=!0,sx:o,children:r}=e,n=zt(),s=$(l=>l.conversationIds),[p,i]=(0,Rt.useState)([]),a=(0,Rt.useMemo)(()=>Oo(n.isDarkMode),[n.isDarkMode]),u={maxAIBrowserWindows:p,theme:a};return(0,Rt.useEffect)(()=>{let l=()=>{i(Vt.windows)};return Vt.addListener("onCreated",l),Vt.addListener("onUpdated",l),Vt.addListener("onDestroyed",l),()=>{Vt.removeListener("onCreated",l),Vt.removeListener("onUpdated",l),Vt.removeListener("onDestroyed",l)}},[]),(0,Rt.useEffect)(()=>{if(!t)return;(async()=>{let g=await Vt.getCurrent();if(g){let c=await F.query({windowId:g.id});await Promise.all(c.map(x=>F.remove(x.id))),await Vt.remove(g.id)}})()},[t,s]),Rt.default.createElement(gt.Provider,{value:u},r||Rt.default.createElement(Lo,{sx:o}))},Sa=kp;var va=d(C()),Bp=()=>{let e=o=>{Bt(o==="showed"?"plan_subscription_failed_reminder_showed":"plan_subscription_failed_reminder_clicked",{reminder_type:"topbar"})},t=(0,va.useRef)(e);return t.current=e,{trackSubscriptionFailedReminder:e,trackSubscriptionFailedReminderRef:t}},wa=Bp;var Ta=d(cp());var ie=d(C()),Mp=e=>{let{title:t,content:o,href:r,target:n="_blank",onClick:s,onClose:p,sx:i}=e,a=Xr();return ie.default.createElement(_,{direction:"row",spacing:1,p:1.5,sx:{position:"relative",bgcolor:"rgba(255, 239, 188, 1)",color:"rgba(132, 49, 0, 1)",pr:a?{xs:"60px",md:1.5}:"60px",justifyContent:a?{md:"center"}:null,...i}},ie.default.createElement(Ta.default,{sx:{colo:"inherit",fontSize:20,mt:"2px"}}),ie.default.createElement(_,{spacing:1},ie.default.createElement(b,{sx:{fontSize:14}},t),ie.default.createElement(St,{href:r,target:n,sx:{color:"inherit",fontSize:16,fontWeight:500},onClick:s},o)),ie.default.createElement(tt,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:p},ie.default.createElement($t,{icon:"Close",sx:{color:"rgba(0, 0, 0, 0.6)",fontSize:"24px"}})))},Aa=Mp;var Ee=d(C());var Ep=()=>{let{t:e}=v(),{isSubscriptionPaymentFailed:t}=z(),[o,r]=oe(yo),{trackSubscriptionFailedReminder:n,trackSubscriptionFailedReminderRef:s}=wa(),{show:p,barHeight:i}=o;return(0,Ee.useEffect)(()=>{r(a=>({...a,show:t}))},[t]),(0,Ee.useEffect)(()=>{p&&s.current("showed")},[p]),p?Ee.default.createElement(P,{id:"maxai-unable-subscription-bar",ref:a=>{a&&i!==a.offsetHeight&&r(u=>({...u,barHeight:a.offsetHeight}))}},Ee.default.createElement(Aa,{title:e("package__features:pricing__unable_subscription__title"),content:e("package__features:pricing__unable_subscription__link__title"),href:`${R}/account/your-plan/`,onClick:()=>n("clicked"),onClose:()=>r(a=>({...a,show:!1}))})):null},Pa=Ep;var V=d(C());var Op=e=>{let{t}=v(),[{open:o,title:r,onPassword:n,onCancel:s},p]=oe(mi),{isDownSm:i}=zn(),[a,u]=(0,V.useState)(""),[l,g]=(0,V.useState)(!1),c=x=>{(x.key==="Enter"||x.code==="Enter")&&a&&(n?.(a),u(""),p({open:!1}))};return V.default.createElement(mo,{open:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{zIndex:2147483647}},V.default.createElement(P,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:i?"85%":400,bgcolor:"background.paper",borderRadius:4,boxShadow:"rgba(26, 26, 26, 0.2) 0px 0px 24px",p:3,outline:"none"}},V.default.createElement(b,{fontWeight:"bold",fontSize:22,color:"text.primary"},t("package__features:chat__pdf__password_modal__enter_password__title")),V.default.createElement(P,{sx:{mt:3}},V.default.createElement(_,{flexDirection:"row",flexWrap:"nowrap",alignItems:"center",sx:{width:"100%",overflow:"hidden"},gap:1},V.default.createElement(b,{component:"div",fontSize:16,color:"text.primary"},t("package__features:chat__pdf__password_modal__open_file__title")),V.default.createElement(b,{component:"div",fontSize:16,color:"text.primary",fontWeight:"bold",noWrap:!0,sx:{flex:1,overflow:"hidden"}},r)),V.default.createElement(bn,{sx:{width:"100%",mt:1,'& input[type="password"]::-ms-reveal':{display:"none"}},type:l?"text":"password",size:"small",placeholder:t("package__features:chat__pdf__password_modal__enter_password__title"),value:a,onChange:x=>{x.stopPropagation(),x.preventDefault(),u(x.target.value)},onKeyDown:c,InputProps:{endAdornment:V.default.createElement(_n,{position:"end"},V.default.createElement(tt,{onClick:()=>g(!l),edge:"end"},l?V.default.createElement(Si,null):V.default.createElement(Ii,null)))}}),V.default.createElement(_,{sx:{mt:4}},V.default.createElement(W,{variant:"contained",sx:{height:48},disabled:a.length===0,onClick:()=>{n?.(a),u(""),p({open:!1})}},V.default.createElement(b,{fontSize:16},t("package__common:continue"))),V.default.createElement(W,{sx:{mt:1},onClick:()=>{s?.(),u(""),p({open:!1})}},V.default.createElement(b,{fontSize:16},t("package__common:cancel")))))))},ka=Op;var Ea=d(lp()),Oa=d(mp()),La=d(Ba()),Da=d(Ma());var et=d(C()),zp=e=>{let{data:t,sx:o}=e,{t:r}=v(),n=()=>t.uploadType==="folder"?et.default.createElement(La.default,{sx:{color:"text.primary",fontSize:20}}):et.default.createElement(Io,{documentType:t.uploadType,file:t.uploadFile,link:t.uploadLink,size:20}),s=()=>{switch(t.uploadStatus){case"error":return et.default.createElement(et.default.Fragment,null,t.uploadType==="folder"&&et.default.createElement(b,{sx:{color:"text.primary",fontSize:14}},r("package__features:project__upload_view__failed__title",{COUNT:t.errorCount})),et.default.createElement(Oa.default,{sx:{color:"rgba(237, 80, 80, 1)",fontSize:20}}));case"uploading":return et.default.createElement(et.default.Fragment,null,t.uploadType==="folder"&&et.default.createElement(b,{sx:{color:"text.primary",fontSize:14}},r("package__features:project__upload_view__uploading_folder__description",{DONE_COUNT:t.successCount+t.errorCount,UPLOAD_COUNT:t.uploadCount})),et.default.createElement(re,{size:16,sx:{color:"text.primary",mr:"2px"}}));case"pending":return et.default.createElement(Da.default,{sx:{color:"rgba(217, 217, 217, 1)",fontSize:20}});case"success":return et.default.createElement(Ea.default,{sx:{color:"rgba(16, 156, 122, 1)",fontSize:20}});case"canceled":return et.default.createElement(b,{sx:{color:"text.secondary",fontSize:14}},r("package__features:project__upload_view__canceled__description"))}return null};return et.default.createElement(_,{direction:"row",gap:1,height:36,minHeight:36,alignItems:"center",sx:o},n(),et.default.createElement(b,{flex:1,sx:{color:"text.primary",fontSize:14,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.uploadName),s())},Wa=zp;var U=d(C()),$p=()=>{let{uploads:e,cancelAllUploads:t,clearAllUploads:o}=di(),{t:r}=v(),[n,s]=(0,U.useState)(!1),[p,i]=(0,U.useState)(!1);(0,U.useEffect)(()=>{if(e.length>0&&e.every(x=>["success","error","canceled"].includes(x.uploadStatus))){let x=null;return no&&e.length===1&&e[0].uploadType!=="folder"&&e[0].uploadStatus==="success"&&(x=setTimeout(()=>{let f=e[0].projectNode;f&&f.doc_id&&((f.doc_type==="page_content__webpage"||f.doc_type==="page_content__email")&&f.link?fe.previewWebpage(f.link,{title:f.name,url:f.link}):fe.previewDocument(f.doc_id,{documentType:f.doc_type,title:f.name,url:f.link||f.file_download_link}))},2e3)),e.some(m=>m.uploadStatus==="success")&&(x=setTimeout(()=>{ci.emit("MAXAI_PROJECT_UPLOAD_SUCCESS")},2e3)),i(!0),()=>{x&&clearTimeout(x)}}},[e]);let a=(0,U.useMemo)(()=>{if(!e.length)return null;if(!p)return e.length>1?r("package__features:project__upload_view__uploading_multiple__title",{COUNT:e.length}):r("package__features:project__upload_view__uploading_single__title",{COUNT:e.length});let c=0,x=0,m=0;if(e.forEach(w=>{w.uploadStatus==="canceled"?c+=1:w.uploadStatus==="success"?x+=1:w.uploadStatus==="error"&&(m+=1)}),c)return c>1?r("package__features:project__upload_view__canceled_multiple__title",{COUNT:c}):r("package__features:project__upload_view__canceled_single__title",{COUNT:c});let f=x>1?r("package__features:project__upload_view__complete_multiple__title",{COUNT:x}):r("package__features:project__upload_view__complete_single__title",{COUNT:x}),h=m?r("package__features:project__upload_view__failed__title",{COUNT:m}):"";return`${f} ${h}`},[e,p]),u=()=>{t(),i(!0)},l=(0,U.useMemo)(()=>{if(ee)return!1;let c=[`${R}/app`,"http://localhost:"];return!!(typeof window<"u"&&c.find(x=>window.location.href.startsWith(x)))},[]);(0,U.useEffect)(()=>{e.length&&(s(!0),i(!1))},[e.length]);let g=Bn();return(0,U.useEffect)(()=>{if(p){let c=setTimeout(()=>{if(s(!1),i(!1),o(),l)try{let x=g.query?.id;x&&g.noSenseReplace(`/app?id=${x}`)}catch{}},2e3);return()=>{clearTimeout(c)}}},[p,l]),U.default.createElement(U.default.Fragment,null,U.default.createElement(mo,{open:n,sx:{position:"fixed",zIndex:2147483647}},U.default.createElement(P,{sx:{width:"100%",height:"100%",outline:"none"},onDragEnter:c=>c.stopPropagation(),onDragOver:c=>c.stopPropagation(),onDragLeave:c=>c.stopPropagation(),onDrop:c=>c.stopPropagation()},U.default.createElement(P,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",minWidth:"min(448px, calc(100% - 32px))",maxWidth:"min(448px, calc(100% - 32px))",backgroundColor:"background.paper",boxSizing:"border-box",borderRadius:2}},U.default.createElement(_,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",borderBottom:"1px solid ",borderColor:"border.main"}},U.default.createElement(b,{sx:{fontSize:"24px",fontWeight:700,lineHeight:"34px",height:"34px",textAlign:"left",color:"text.primary",margin:"24px 24px 16px 24px",display:"flex",alignItems:"center",gap:"4px"}},a)),U.default.createElement(_,{direction:"column",p:3,sx:{overflow:"auto",maxHeight:"calc(100vh - 300px)"}},e.map(c=>U.default.createElement(Wa,{key:c.uploadId,data:c}))),!p&&U.default.createElement(_,{sx:{p:3,pb:2,borderTop:"1px solid",borderColor:"border.main",alignItems:"center"}},U.default.createElement(W,{variant:"contained",sx:c=>({bgcolor:c.palette.mode==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.12)",color:"text.secondary",padding:"10px 16px",lineHeight:"20px",width:"100%","&:hover":c.palette.mode==="light"?{}:{bgcolor:"rgba(255, 255, 255, 0.16)",color:"rgba(255, 255, 255, 1)"}}),onClick:u},r("package__features:project__upload_view__cancel_upload__title")))))),U.default.createElement(ka,null))},Ha=$p;var Ot=d(C());var vt=d(C());var Ua=d(C());var Vp=()=>{let e=$(o=>o.conversationType),t=ut(kt);return(0,Ua.useEffect)(()=>{if(t.open&&t.loadedAppSidebar&&!Ti()){let o=So(e);if(o.ref){ki(o.ref);let r=setTimeout(()=>{o.focus()},200);return()=>clearTimeout(r)}}},[t.open,t.loadedAppSidebar,e]),null},Na=Vp;var Je=d(C());var jp=async()=>{try{let t=await new xr({runtime:"client"}).postMessage({event:"Client_ping"});if(t.data?.tabId){let o=await io.getItem("SidebarAutoNewChatCached");if(o[t.data.tabId])return o[t.data.tabId]?.conversationIds||[]}return[]}catch{return[]}},Rp=async e=>{try{let r=(await new xr({runtime:"client"}).postMessage({event:"Client_ping"})).data?.tabId;if(!r)return;let n=await io.getItem("SidebarAutoNewChatCached")||{};n[r]={conversationIds:e,createTime:Date.now()};let s=Object.keys(n),p=3*24*60*60*1e3;s.forEach(i=>{n[i].createTime<Date.now()-p&&delete n[i]}),await io.setItem("SidebarAutoNewChatCached",n)}catch{}},Gp=()=>{let{setConversationIds:e,conversationIds:t}=$(n=>({setConversationIds:n.setConversationIds,conversationIds:n.conversationIds})),{createConversation:o,getConversation:r}=ge();return ve(()=>{(async()=>{let s=await jp();if(s.length>0){if((await r(s[0]))?.isDelete||!await En.getUserInfo()){let l=await o("Chat",{reason:"initCreate"});e([l[0].id]);return}e(s);return}let a=(await o("Chat",{reason:"initCreate"})).map(u=>u.id)[0];e([a])})()}),(0,Je.useEffect)(()=>{t.length>0&&Rp(t)},[t]),ui(),Je.default.createElement(Je.default.Fragment,null)},Fa=Gp;var Oe=d(C());var ae=d(C());var qp=()=>{let[e,t]=(0,ae.useState)(()=>window.location.href),[o,r]=(0,ae.useState)(document.title),n=(0,ae.useRef)(null),s=()=>{p(),n.current=setInterval(()=>{r(document.title),t(window.location.href)},1e3)},p=()=>{n.current&&clearInterval(n.current)};return{pageUrl:e,documentTitle:o,startListen:s,stopListen:p}},za=qp;function $a(){let[e,t]=(0,ae.useState)();return(0,ae.useEffect)(()=>{let o=()=>{t(document.querySelector("h2[data-thread-perm-id]")?.textContent)};return o(),Ve.addEventListeners("view_thread",o),Ve.addEventListeners("close_email",o),()=>{Ve.removeEventListeners("view_thread",o),Ve.removeEventListeners("close_email",o),t(null)}},[window.location.href]),e}var Xp=()=>{let e=ut(kt),t=e.open||e.loadedAppSidebar,{conversationId:o,setCurrentDocument:r}=$(c=>({conversationId:c.conversationIds[0],setChatDocuments:c.setChatDocuments,setCurrentDocument:c.setCurrentDocument,setEnableSearch:c.setEnableSearch})),{pageUrl:n,documentTitle:s,startListen:p,stopListen:i}=za(),a=$a(),u=(0,Oe.useMemo)(()=>an(n)&&nn()&&a?a:s,[n,s,a]),l=vo(o),g=de(l);return(0,Oe.useEffect)(()=>{if(!t)return;let c=window.location.href;fe.analyzeToDocument(c).then(x=>{x.data?.doc_id&&fe.uploadDocument(x.data).then().catch()})},[t]),(0,Oe.useEffect)(()=>{let c=fe.analyzeToDocumentType(n)||"page_content__webpage";r(x=>{if(x)return{...x,title:u,link:n,maxAIDocumentId:so,maxAIDocumentType:c,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:n,previewIcon:ar(n)}};let m=!!(!g.current?.meta.chatSources||g.current?.meta.chatSources.enableCurrent);return{id:so,status:"idle",title:u,link:n,selected:m,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),maxAIDocumentId:so,maxAIDocumentType:c,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:n,previewIcon:ar(n)}}})},[n,u,g]),(0,Oe.useEffect)(()=>(p(),()=>{i()}),[]),null},Va=Xp;var Kp=()=>{let e=ut(kt),t=e.open||e.loadedAppSidebar,{conversationIds:o}=$(a=>({conversationIds:a.conversationIds})),{getConversation:r,updateConversation:n}=ge(),{refreshModelUsageOnce:s}=dr(),p=de(o[0]),{refetch:i}=_i();return(0,vt.useEffect)(()=>{t&&(ii("Chat").then(async a=>{let u=a[0];if(!u||!p.current)return;let l=await r(p.current);l&&l.meta.AIModel!==u.value&&n(l.id,{meta:{AIProvider:u.AIProvider,AIModel:u.value,maxTokens:u.maxTokens}},{syncToRemote:!!l.meta.isUploaded})}),s(),Wn.checkUpdate().then(a=>{a&&i("OpenSidebar")}))},[t]),vt.default.createElement(vt.default.Fragment,null,vt.default.createElement(Fa,null),vt.default.createElement(Va,null),vt.default.createElement(ta,null),vt.default.createElement(Na,null),vt.default.createElement(Qp,null))},Qp=()=>{let{conversationId:e,setConversationIds:t,setSelectionContent:o,getChatHubState:r}=$(m=>({conversationId:m.conversationIds[0],setConversationIds:m.setConversationIds,setSelectionContent:m.setSelectionContent,getChatHubState:m.getChatHubState})),{askAIQuestionV2:n,askAIWithShortcutsV2:s}=wo(e),p=ne(e),i=de(p),a=de(s),u=de(n),{uploadChatScreenshotFiles:l}=Hi(),{updateConversation:g}=ge(),c=Ie(kt),{refreshModelUsage:x}=dr();return Kn(async(m,f)=>{if(m==="SyncContextMenuConversationInSidebar"){let{conversationId:h}=f;h&&t([h])}if(m==="ContextMenuQuickSearchSelectedText"){let{question:h}=f;h&&(o(null),jt(),g(e,{meta:{chatSources:{enableSearch:!0}}},{syncToRemote:!1,isPartialUpdate:!0,updateUpdatedAt:!1}),r().setEnableSearch(!0),Di(),await ao(300),await u.current({text:h,type:"user",meta:{includeHistory:!0}},{chatDocuments:[{id:lr,title:on().t("package__features:home_view__chat_with_any_content__chat__chat_document_selector__chip__search__title"),status:"idle",selected:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),hidden:!0,maxAIDocumentId:lr,maxAIDocumentType:"search_results"}]}))}if(m==="ContextMenuChatWithImage"){if(!await gr({emitEvent:!0}))return;await ao(300),Jr.send("SetVariablesModalClose",null);let h=[],w=async k=>{let S=await oa(k,{parse:"blob",method:"GET",cache:"no-store",mode:"cors"});if(!S?.data)return;let B=k.split("/").pop?.()?.split("?")?.[0]||"Image.png";if(B.endsWith(".svg")){let E=await Zr(Qr(S.data,B));E&&h.push(E)}else h.push(ea(S.data,B))};try{let k=f?.imageSrc?.split(";")?.[0]?.split("/")?.[1]||"png",S=`${f?.image?.alt||"Image"}.${k}`;if(f.imageSrc.startsWith("data:image")){let B=await Kr(f.imageSrc,S);B&&h.push(B)}else await w(f.imageSrc)}catch{await w(f.image.src||f.imageSrc)}h.length>0&&await l(h)}if(m==="MaxAIContinueSearchWithAI"){let{conversationId:h,AIMessage:w}=f;if(!h)return;let k=await g(h,{type:"Chat",meta:{chatSources:{enableSearch:!0}}},{syncToRemote:!0,updateUpdatedAt:!0});r().setEnableSearch(!0),k&&((await vr.getService().dangerouslyGetTotalMessageIds(k.id)).includes(w.messageId)||await vr.getService().addMessages(k.id,[w],{waitUntilRemoteDBUpdated:!0}),t([k.id]),jt())}if(m==="QuickAccessSummary"){if(!await gr({emitEvent:!0}))return;jt();let{currentDocument:h,setCurrentDocument:w}=r();if(!h||i.current)return;g(e,{meta:{chatSources:{enableCurrent:!0}}},{syncToRemote:!1,isPartialUpdate:!0,updateUpdatedAt:!1}),w(E=>E?{...E,selected:!0}:null),await ao(300);let{pageSummaryType:k}=f,S=rn[k]||[];if(!S)return;let B=S([h]);B?.[0]?.actions?.length&&a.current(B[0].actions,{chatDocuments:[h],isFocusInput:!0})}m==="QuickAccessScreenshot"&&c(h=>({...h,open:!0})),m==="RefreshUsage"&&x()}),vt.default.createElement(vt.default.Fragment,null)},ja=Kp;var Ra=d(je());var it=d(C()),Zp=e=>{let{open:t,onClose:o,noHeader:r=!0,noFooter:n=!0}=e,s=mn(),{t:p}=v(),{userSettings:i}=Te(),[a,u]=(0,it.useState)(!0),l=(0,it.useMemo)(()=>{let g={bgcolor:s.palette.background.paper,divider:s.palette.divider,color:s.palette.text.primary,lang:i?.preferredLanguage||"en"};r&&(g.noHeader="1"),n&&(g.noFooter="1");let c=new URLSearchParams(g).toString();return`${R}/release-notes/?${c}`},[s,r,n,i?.preferredLanguage]);return it.default.createElement(it.default.Fragment,null,it.default.createElement(hn,{keepMounted:!a,anchor:"bottom",open:t,onClose:o,sx:{zIndex:2147483647,position:ee?"absolute":"fixed",[`& .${xn.paper}`]:{position:"absolute",borderTopRightRadius:8,borderTopLeftRadius:8,minHeight:"80vh",bgcolor:"background.paper",backgroundImage:"unset"}},disableScrollLock:!0,disableEnforceFocus:!0,PaperProps:{"data-testid":"maxai--release-notes-drawer--paper"},slotProps:{backdrop:{sx:{position:"absolute"}}}},it.default.createElement(_,{direction:"row",spacing:1,alignItems:"center",justifyContent:"flex-end",px:2,py:2.5},it.default.createElement(Jn,{openLink:l,title:p("package__features:document__document_toolbar__open_link_in_new_window__title"),tooltipProps:{zIndex:2147483648}}),it.default.createElement(tt,{onClick:o,size:"small",sx:{zIndex:1}},it.default.createElement(Ra.default,{sx:{fontSize:"20px"}}))),it.default.createElement(P,{sx:{position:"relative",width:"100%",height:0,flex:1,"& > iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}},a&&it.default.createElement(Xn,{loading:!0}),it.default.createElement("iframe",{src:l,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,onLoad:()=>{u(!0)}}))))},Ga=Zp;var qa=d(Er());var he=d(C()),ol=()=>{let{t:e}=v();return he.default.createElement(St,{underline:"none",target:"_blank",href:`${R}/account/rewards/`,position:"relative","data-testid":"rewards-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",justifyContent:"end",bgcolor:"#fff",p:1,borderRadius:1},onClick:()=>{Bt("referral_card_clicked",{referralType:"REWARDS"})}},he.default.createElement(P,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},he.default.createElement("img",{src:ho("/images/activity/rewards.png"),style:{height:140},alt:"rewards"})),he.default.createElement(W,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:he.default.createElement(qa.default,{color:"inherit",fontSize:"inherit"})},he.default.createElement(b,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__rewards__card__button__title"))))},Ya=ol;var Ka=d(Er());var wt=d(C());var Qa=()=>{let{t:e}=v();return wt.default.createElement(St,{underline:"none",target:"_blank",href:`${R}/affiliate/`,position:"relative","data-testid":"affiliate-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",p:1},onClick:()=>{Bt("referral_card_clicked",{referralType:"AFFILIATE"})}},wt.default.createElement("img",{src:ho("/images/activity/affiliate-bg.png"),style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:-1},alt:"rewards-bg"}),wt.default.createElement(_,{width:"100%",my:"auto"},wt.default.createElement(b,{fontSize:"20px",fontWeight:700,lineHeight:1.4,color:"#fff",textAlign:"center",whiteSpace:"pre-line"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__title")),wt.default.createElement(b,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_1"),wt.default.createElement(b,{component:"b",sx:{color:"#000",bgcolor:"#ffca16",fontSize:"16px",fontWeight:600,p:"2px 4px",ml:"2px",borderRadius:"6px"}},"25%")),wt.default.createElement(b,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_2"))),wt.default.createElement(W,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px",textAlign:"center","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:wt.default.createElement(Ka.default,{color:"inherit",fontSize:"inherit"})},wt.default.createElement(b,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__button__title"))))};var ns=d(Za()),is=d(sp()),Lr=d(Ja()),as=d(ts()),ss=d(es()),ps=d(os()),ls=d(rs()),us=d(up());var Dr=d(ap());var T=d(C());var Ro=d(C()),vl=({sx:e,fontSize:t=12,...o})=>{let{userInfo:r,fetching:n}=z();return Ro.default.createElement(fn,{sx:{textTransform:"capitalize",fontSize:t,backgroundColor:s=>s.palette.mode==="dark"?"#444647":"#E8E8E8",color:s=>s.palette.mode==="dark"?"#9D9D9D":"#8B8B8B",...e},...o},n?Ro.default.createElement(re,{size:t}):r?.email?.[0]||Ro.default.createElement("span",{hidden:!0}))},Or=vl;var wl=()=>{let[e,t]=(0,T.useState)(ee?"left-end":"right-end"),o=(0,T.useRef)(null),r=(0,T.useCallback)(n=>{if(!n)return;let s=n.getBoundingClientRect(),p=window.innerWidth,i=window.innerHeight,a=p-s.right,u=s.left,l=s.top,g=i-s.bottom,c=300;ee?u>=c?t("left-end"):a>=c?t("right-end"):l>=g?t("top-end"):t("bottom-end"):a>=c?t("right-end"):u>=c?t("left-end"):l>=g?t("top-end"):t("bottom-end")},[]);return{helpMenuPlacement:e,helpButtonRef:o,calculatePlacement:r}},Tl=e=>{let{OptionsCardProps:t,avatarProps:o,needPopoverPointerMovingBuffer:r=!0,...n}=e,[s,p]=(0,T.useState)(!1),{helpMenuPlacement:i,helpButtonRef:a,calculatePlacement:u}=wl(),{t:l}=v(),{collapsed:g}=gi(),{isLogin:c,sigOutMaxAIAccount:x}=On(),{canShowSurvey:m}=Ni(),{userInfo:f,isFreeUser:h,isPayingUser:w,hasGroupId:k}=z(),S=Hn(),{proChatReward:B}=Dn(),{dashboard:E}=Pi(),{openConfirm:H,closeConfirm:Q}=qn(),ot=c&&h&&(B>0||!E?.is_webstore_commented),Zt=()=>{H({footerButtonVariant:"vertical",closeButton:!1,headerContainerSx:{border:"none",pb:0},sx:{p:2},titleSx:{width:"100%"},title:T.default.createElement(b,{component:"p",fontSize:32,fontWeight:900,textAlign:"center"},l("package__features:user__user_avatar__log_out__title")),content:T.default.createElement(b,{component:"p",fontSize:20,textAlign:"center"},l("package__features:user__user_avatar__log_out__content")),confirmButtonText:l("package__common:log_out"),onConfirm:O=>(O&&(Q(),x()),!0)})},Jt=(0,T.useMemo)(()=>{let O={padding:"12px 10px"};return[{value:"email",disabled:!0,divider:!0,render:()=>T.default.createElement(_,{gap:"16px",sx:{padding:"7px 8px 12px 8px"}},T.default.createElement(_,{direction:"row",alignItems:"center",gap:"8px",sx:{color:j=>j.palette.mode==="dark"?"rgba(255, 255, 255, 0.38) !important":"rgba(0, 0, 0, 0.38) !important",textAlign:"left"}},T.default.createElement(Nn,{sx:{fontSize:"14px",color:"inherit"}}),ee&&T.default.createElement(b,{fontSize:"12px"},Gr)),T.default.createElement(mr,{testid:"maxai--sidebar--user-avatar--options--user-info",disabled:!0,sx:{padding:"0",justifyContent:"start"}},T.default.createElement(Or,{sx:{width:"34px",height:"34px"}}),T.default.createElement(Oi,{sx:{color:"text.secondary"},fontSize:"14px",title:f?.email},f?.email)))},{testid:"maxai--sidebar--user-avatar--options--your-plan",value:"your-plan",label:T.default.createElement(b,{fontSize:"14px"},l("package__features:user__user_avatar__menu_item__my_plan"),T.default.createElement(b,{fontSize:"inherit",ml:"12px",component:"span",sx:{fontSize:"14px",lineHeight:"1.5",fontWeight:400,color:j=>j.palette.mode==="dark"?"rgba(255, 255, 255, 0.50)":"rgba(0, 0, 0, 0.38)"}},S)),icon:T.default.createElement(ns.default,null),sx:O},...w&&k?[{testid:"maxai--sidebar--user-avatar--options--people",value:"people",label:l("package__features:user__user_avatar__menu_item__team_plan"),icon:T.default.createElement(In,null),sx:O}]:[],{testid:"maxai--sidebar--user-avatar--options--settings",value:"settings",label:l("common:settings"),icon:T.default.createElement(us.default,null),sx:O},{testid:"maxai--sidebar--user-avatar--options--chat-beta-features",render:()=>T.default.createElement(Ui,{buttonSize:"medium"}),value:"chat-beta-features",divider:!0,sx:O},...m&&c?[{icon:T.default.createElement(Dr.default,{sx:{fontSize:20,color:"inherit"}},T.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},T.default.createElement("path",{d:"M4.8127 6.80792H15.1877M4.8127 10.0007H15.1877M4.46686 14.0898V16.9173L8.15621 14.0898H16.5724C17.5269 14.0898 18.3002 13.3151 18.3002 12.3606V4.81315C18.3002 3.85865 17.5255 3.08398 16.571 3.08398H3.42936C2.47486 3.08398 1.7002 3.85865 1.7002 4.81315V12.3606C1.7002 13.3151 2.47486 14.0898 3.42936 14.0898H4.46686Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"1.60645"}))),testid:"maxai--sidebar--user-avatar--options--feedback",label:l("package__features:chat__chat_input__feedback_button"),value:"feedback",sx:O}]:[],{icon:T.default.createElement(Lr.default,null),value:"help",disabledOnSelectOptionAutoClosePopup:!0,label:l("package__features:user__user_avatar__menu_item__help_menu"),sx:O,divider:!0,ButtonProps:{placement:i,endIcon:T.default.createElement(as.default,null),needPopoverPointerMovingBuffer:!0,buttonRefBind:j=>{a.current=j,j&&setTimeout(()=>u(j))},onSelectOption:(j,pe)=>{pe.close(),j==="release-notes"&&p(!0),j==="help-center"&&window.open(qr),j==="get-started"&&window.open(`${R}/onboarding/browser/step-1/`),j==="contact-us"&&window.open(Yr)},options:[{sx:O,icon:T.default.createElement(ps.default,null),testid:"maxai--sidebar--user-avatar--options--release-notes",value:"release-notes",label:l("package__common:release_notes")},{sx:O,icon:T.default.createElement(Lr.default,null),testid:"maxai--sidebar--user-avatar--options--help-center",value:"help-center",label:l("package__ui:sidebar_nav__footer__button__help")},{sx:O,icon:T.default.createElement(ls.default,null),testid:"maxai--sidebar--user-avatar--options--get-started",value:"get-started",label:l("package__features:user__user_avatar__menu_item__get_started")},{sx:O,icon:T.default.createElement(is.default,null),testid:"maxai--sidebar--user-avatar--options--contact-us",value:"contact-us",label:l("package__common:contact_us")}]}},{testid:"maxai--sidebar--user-avatar--options--signout",icon:T.default.createElement(ss.default,null),value:"logout",label:l("package__features:user__user_avatar__menu_item__log_out"),divider:!0,sx:O},{testid:"maxai--sidebar--user-avatar--options--gift",icon:T.default.createElement(Dr.default,{sx:{fontSize:20,color:"inherit"}},T.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},T.default.createElement("path",{d:"M12 6V22M12 6H8.46429C7.94332 6 7.4437 5.78929 7.07533 5.41421C6.70695 5.03914 6.5 4.53043 6.5 4C6.5 3.46957 6.70695 2.96086 7.07533 2.58579C7.4437 2.21071 7.94332 2 8.46429 2C11.2143 2 12 6 12 6ZM12 6H15.5357C16.0567 6 16.5563 5.78929 16.9247 5.41421C17.293 5.03914 17.5 4.53043 17.5 4C17.5 3.46957 17.293 2.96086 16.9247 2.58579C16.5563 2.21071 16.0567 2 15.5357 2C12.7857 2 12 6 12 6ZM20 11V18.8C20 19.9201 20 20.4802 19.782 20.908C19.5903 21.2843 19.2843 21.5903 18.908 21.782C18.4802 22 17.9201 22 16.8 22L7.2 22C6.07989 22 5.51984 22 5.09202 21.782C4.71569 21.5903 4.40973 21.2843 4.21799 20.908C4 20.4802 4 19.9201 4 18.8V11M2 7.6L2 9.4C2 9.96005 2 10.2401 2.10899 10.454C2.20487 10.6422 2.35785 10.7951 2.54601 10.891C2.75992 11 3.03995 11 3.6 11L20.4 11C20.9601 11 21.2401 11 21.454 10.891C21.6422 10.7951 21.7951 10.6422 21.891 10.454C22 10.2401 22 9.96005 22 9.4V7.6C22 7.03995 22 6.75992 21.891 6.54601C21.7951 6.35785 21.6422 6.20487 21.454 6.10899C21.2401 6 20.9601 6 20.4 6L3.6 6C3.03995 6 2.75992 6 2.54601 6.10899C2.35785 6.20487 2.20487 6.35785 2.10899 6.54601C2 6.75992 2 7.03995 2 7.6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),value:"gift",label:l(ot?"package__features:user__user_avatar__menu_item__rewards":"package__features:user__user_avatar__menu_item__affiliate"),sx:O,ButtonProps:{title:ot?T.default.createElement(Ya,null):T.default.createElement(Qa,null),tooltipProps:{placement:"right",disableInteractive:!1,PopperProps:{disablePortal:!0,sx:{"& > div":{p:"0px !important",maxWidth:"unset!important",bgcolor:"transparent !important"}}}}}}]},[l,S,w,k,m,c,ot,f?.email,i,u]);return c?T.default.createElement(T.default.Fragment,null,T.default.createElement(mr,{needPopoverPointerMovingBuffer:r,placement:g?"right-end":"top-start",options:Jt,testid:"maxai--sidebar--user-avatar--button",PopoverProps:{keepMounted:!0},OptionsCardProps:{sx:{minWidth:"300px"},...t},onSelectOption:O=>{if(O==="logout"&&(no?Zt():window.open(`${R}/logout/`)),O==="feedback"&&window.open(`${R}/survey/feedback/`),O==="help"){u(a.current);return}O==="your-plan"&&window.open(`${R}/account/your-plan/`),O==="people"&&window.open(`${R}/account/team-plan/`,"_blank"),O==="settings"&&po.openPage({key:"options"}),O==="gift"&&(ot?window.open(`${R}/account/rewards/`,"_blank"):window.open(`${R}/affiliate/`,"_blank"))},...n},T.default.createElement(Or,{sx:{width:"24px",height:"24px"},...o})),T.default.createElement(Ga,{open:s,onClose:()=>p(!1)})):null},ms=Tl;var A=d(C());var Wr=d(C());var Al=({sx:e})=>{let{t}=v(),{chatBoxShortCutKey:o}=ko();return o?null:Wr.default.createElement(b,{fontSize:12,sx:e},Wr.default.createElement(St,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",onClick:()=>{po.openPage({key:"shortcuts"})}},t("package__features:chat__navbar__conversation_share__set_shortcut_button__tooltip")))},cs=Al;var ds=d(C()),fs=()=>{let{isLogin:e}=we(),{t}=v(),{openAuthSignInCardModal:o}=$n();return e?null:ds.default.createElement(W,{"data-testid":"maxai--auth--un-login-sign-in-button",variant:"contained",sx:{fontSize:"14px",fontWeight:500,minWidth:"64px",p:"6px 12px",borderRadius:"9999px"},onClick:()=>{o()}},t("client:sidebar__home_view__sign_in_button__title"))};var Hr=d(C());var Pl=()=>{let{conversationId:e}=ni(),{showWithClickAlwaysPintoSidebar:t}=Ki(),{t:o}=v(["package__features"]);return Hr.default.createElement(oi,{"data-testid":"maxai--context-window--always-responses-in-contextmenu--button",title:o("package__features:chat__ai_message__tools__unpin_button"),sx:{p:"6px",borderRadius:"8px",color:"text.secondary","&:hover":{color:"text.primary",bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, 0.04)"}},onClick:async()=>{await t(e)},TouchRippleProps:{center:!1}},Hr.default.createElement($t,{icon:"AlwaysResponsesInContextMenu",sx:{fontSize:"20px"}}))},gs=Pl;var xs=d(C()),kl=()=>{let{setDragging:e}=xi();return xs.default.createElement(Lo,{onDragEnter:t=>{t.stopPropagation(),e(!1)},onDragOver:t=>t.stopPropagation(),onDragLeave:t=>t.stopPropagation(),onDrop:t=>t.stopPropagation()})},hs=kl;var ks=d(cr()),Bs=d(Mn()),ht=d(C());var _s=d(cr()),bs=d(Mn()),to=d(C());_s.default.extend(bs.default);var Rx=Object.freeze({CHRISTMAS_2024:{endTime:"2025-1-1 00:00:00"}}),Bl=e=>{if(!e)return!1;let{group_id:t,subscription_plan_name:o}=e;return t?!1:o?["BASIC_MONTHLY","BASIC_YEARLY","PRO_MONTHLY"].includes(o):!0};var Ml=()=>{let{userInfo:e,loaded:t}=z();return{isActivityUser:(0,to.useMemo)(()=>Bl(e),[e]),loaded:t,isActivityOpen:!1}},Go=Ml;var qo=d(pp()),ys=d(je());var y=d(C());var Ur=e=>{let{variant:t,children:o,sx:r,...n}=e;return y.default.createElement(W,{variant:t||"contained",fullWidth:!0,sx:{fontSize:16,px:2,py:1.5,borderRadius:1,...t==="outlined"&&{borderColor:s=>s.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)","&:hover":{borderColor:s=>s.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)"}},...r},...n},o)},Is=(0,y.forwardRef)(function(t,o){let{sx:r,...n}=t,{pricingPlansInfo:s}=yr(),{t:p}=v(),{showPricingUpgradeContentPopup:i}=Ir(),{onCardClose:a}=Le(),u=l=>{Ae("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:l?.currentTarget}),i(),a?.()};return(0,y.useImperativeHandle)(o,()=>({click:u})),y.default.createElement(Ur,{startIcon:y.default.createElement(yn,{sx:{color:l=>l.palette.mode==="dark"?"#000":"#fff"}}),sx:{position:"relative",...r},...n,onClick:u},p("client:sidebar__promotion_dialog__cta_button"),y.default.createElement(P,{sx:{position:"absolute",right:10,top:0,transform:"translateY(-50%)",bgcolor:"rgba(255, 126, 53, 1)",color:"#fff",borderRadius:1,px:1,py:.5}},y.default.createElement(b,{fontSize:14,fontWeight:500,lineHeight:1},p("client:sidebar__promotion_dialog__discount__title",{DISCOUNT:s.pro_yearly.discount_title}))))}),Cs=(0,y.forwardRef)(function(t,o){let{t:r}=v(),{...n}=t,{onCardClose:s,upgradeCardTemplate:p}=Le(),i=a=>{Ae("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"try_ai_art",targetElement:a?.currentTarget}),window.open(`${wn}/ai-tools/ai-art/?ai_model=gpt-image-1`,"_blank"),s?.()};return(0,y.useImperativeHandle)(o,()=>({click:i})),y.default.createElement(Ur,{...n,onClick:i},r("client:sidebar__promotion_dialog__try_it_now"),y.default.createElement(qo.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}}))}),Ss=(0,y.forwardRef)(function(t,o){let{t:r}=v(),{...n}=t,{onCardClose:s,upgradeCardTemplate:p}=Le(),i=a=>{Ae("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:a?.currentTarget}),window.open(p.learnMoreLink,"_blank"),s?.()};return(0,y.useImperativeHandle)(o,()=>({click:i})),p.learnMoreLink?y.default.createElement(Ur,{...n,onClick:i},r("client:sidebar__promotion_dialog__learn_more"),y.default.createElement(qo.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}})):null}),vs=e=>{let{sx:t,...o}=e,{t:r}=v(),{upgradeCardTemplate:n}=Le();return n.learnMoreLink?y.default.createElement(St,{href:n.learnMoreLink,target:"_blank",rel:"noreferrer",fontSize:14,sx:{textAlign:"left",color:s=>s.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",textDecoration:"underline",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",...t},...o},r("client:sidebar__promotion_dialog__learn_more"),y.default.createElement(qo.default,{sx:{fontSize:"16px",color:"inherit"}})):null},El=()=>{let{isPayingUser:e,upgradeCardTemplate:t}=Le(),{t:o}=v();return y.default.createElement(y.default.Fragment,null,!e&&y.default.createElement(vs,null),y.default.createElement(P,{pt:2},!e&&y.default.createElement(Is,null),e&&y.default.createElement(Ss,null)))},Ol=()=>{let{isPayingUser:e,upgradeCardTemplate:t}=Le();return y.default.createElement(y.default.Fragment,null,!e&&y.default.createElement(vs,null),y.default.createElement(_,{sx:{pt:2,gap:"12px"}},e?y.default.createElement(y.default.Fragment,null,y.default.createElement(Cs,null),y.default.createElement(Ss,{variant:"outlined"})):y.default.createElement(y.default.Fragment,null,y.default.createElement(Is,null),y.default.createElement(Cs,{variant:"outlined"}))))},ws=(0,y.createContext)({isPayingUser:!1,upgradeCardTemplate:{},onCardClose:void 0}),Le=()=>(0,y.useContext)(ws),Ll=e=>{let{upgradeCardTemplate:t,onClose:o}=e,{t:r}=v(),{isPayingUser:n}=z(),{showPricingUpgradeContentPopup:s}=Ir(),p=i=>{n?t.learnMoreLink&&(Ae("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:i?.currentTarget}),window.open(t.learnMoreLink,"_blank")):(Ae("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:i?.currentTarget}),s()),o?.()};return y.default.createElement(ws.Provider,{value:{isPayingUser:n,upgradeCardTemplate:t,onCardClose:o}},y.default.createElement(_,{sx:{maxHeight:"75vh",p:2,gap:2,textAlign:"left",bgcolor:i=>i.palette.mode==="dark"?"#2C2C2C":"#FFFFFF"}},y.default.createElement(_,{direction:"row",spacing:1,alignItems:"center",flexShrink:0},y.default.createElement(b,{fontSize:16,color:"text.primary",flex:1,fontWeight:500},r("client:sidebar__promotion_dialog__title",{VERSION:vn})),y.default.createElement(tt,{onClick:o},y.default.createElement(ys.default,{sx:{fontSize:24,color:"text.primary"}}))),y.default.createElement(_,{flex:1,sx:{overflowY:"auto"}},y.default.createElement(Ge,{src:t.image,width:832,height:468,onClick:p,sx:{cursor:"pointer"}}),y.default.createElement(_,{pt:2,spacing:2},y.default.createElement(b,{fontSize:20,color:"text.primary",flex:1,fontWeight:800},t.title(r)),y.default.createElement(_,{spacing:1,sx:{marginTop:"0px!important",...t.templateSx}},t.descriptions(r).map((i,a)=>{let u=i.needListStyle||i.needListStyleSecondary,l=i.needListStyleSecondary;return y.default.createElement(_,{key:a,direction:"row",sx:{marginTop:"12px!important",position:"relative",...u?{pl:l?2.5:1.5}:{},...l?{marginTop:"2px!important"}:{},...i.sx}},u&&y.default.createElement(P,{width:4,height:4,flexShrink:0,borderRadius:"50%",bgcolor:"text.primary",sx:{position:"absolute",top:8,left:l?"8px":0}}),y.default.createElement(b,{fontSize:16,lineHeight:1.5,sx:{color:"text.secondary","& > b":{color:"text.primary"}}},i.title&&y.default.createElement("b",null,i.title,": "),i.description))})))),t.showAIArtToolLink?y.default.createElement(Ol,null):y.default.createElement(El,null)))},Nr=Ll;var eo=()=>ke[0],Ts=e=>Ao[eo()](e),Yo=async()=>{let e=eo(),t=await rt();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:(await ft(e,!1),!1)},As=async()=>{let e=eo();await ft(e,!0)};var Xo=d(C());var Dl=()=>{let{userInfo:e,loaded:t}=z(),[o,r]=(0,Xo.useState)(()=>ke[0]),n=(0,Xo.useMemo)(()=>!t||!e?null:Ao[o](e),[o,t,e]);return{extensionUpgradeCardType:o,extensionUpgradeCardTemplate:n,setExtensionUpgradeCardType:r}},Ps=Dl;ks.default.extend(Bs.default);var Wl=()=>{let{extensionUpgradeCardTemplate:e,extensionUpgradeCardType:t,setExtensionUpgradeCardType:o}=Ps(),r=Tn(),{userInfo:n,isPayingUser:s}=z(),{isActivityUser:p,loaded:i,isActivityOpen:a}=Go(),[u,l]=(0,ht.useState)(!1),{paywallShowDebounce:g}=Yn(),c=(0,ht.useRef)(!1),x=()=>{l(!1)};return(0,ht.useEffect)(()=>{let m=n?.created_at;n===null||!m||!i||Yo().then(async f=>{if(f||!e)return;let h=!1;if(e.cardType==="activity")h=p;else if(e.cardType==="feature"){let w=new Date(m).getTime()+2592e5;new Date().getTime()>w&&(h=!0)}else h=!0;h&&setTimeout(async()=>{await As(),c.current||(l(!0),c.current=!0),g({paywallType:"browser_extension_update",paywallReason:"proactive"})},1500)})},[r.name,n,s,a,i,e,p,g]),e?ht.default.createElement(fo,{open:u,disableScrollLock:!0,disableEnforceFocus:!0,onClose:(m,f)=>{f!=="backdropClick"&&x()},slotProps:{backdrop:{onClick:()=>null}},"data-testid":"maxai-sidebar--promotion-dialog",sx:{position:"absolute",zIndex:2147483645,[`.${uo.root}`]:{position:"absolute"},[`.${co.paper}`]:{maxHeight:"max-content",maxWidth:448,width:"calc(100% - 32px)",mx:2,borderRadius:2,overflow:"hidden",boxShadow:"0px 4px 8px 0px rgba(128, 128, 128, 0.16)",...e.cardType==="activity"&&{maxWidth:460,background:"transparent",boxShadow:"none"}}}},ht.default.createElement(go,null,ht.default.createElement("select",{defaultValue:t,onChange:m=>{o(m.target.value)}},ke.map(m=>ht.default.createElement("option",{key:m,value:m},m)))),e.cardType==="activity"&&ht.default.createElement(Nr,{upgradeCardTemplate:e,onClose:x}),e.cardType==="feature"&&ht.default.createElement(Nr,{upgradeCardTemplate:e,onClose:x})):null},Ms=Wl;var se=d(C());var Es=d(je()),Os=d(Xa());var K=d(C());var Fr=`${R}/survey/feedback`,Hl=({surveyKey:e,handleCloseClick:t,sx:o,closeBtn:r=!0})=>{let{t:n}=v(["client"]),s=()=>{window.open(Fr),Bt("survey_card_clicked",{survey_type:e})};return ve(()=>{Bt("survey_card_showed",{survey_type:e})}),K.default.createElement(_,{sx:{textAlign:"left",color:"text.primary",bgcolor:p=>p.palette.mode==="dark"?"#3B3D3E":"#fff",...o}},K.default.createElement(_,{direction:"row",spacing:1,alignItems:"center",flexShrink:0,py:2.5,px:2},K.default.createElement(b,{fontSize:20,color:"text.primary",flex:1,fontWeight:700},n("client:sidebar__survey_dialog__title")),r&&K.default.createElement(tt,{onClick:t},K.default.createElement(Es.default,{sx:{fontSize:24,color:"text.primary"}}))),K.default.createElement(_,{px:2,sx:{overflowY:"auto"}},K.default.createElement(Ge,{src:Mt("/images/survey/dialog-banner.png"),width:832,height:468,onClick:s,sx:{cursor:"pointer"}}),K.default.createElement(_,{py:2,spacing:2},K.default.createElement(b,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item1__part1")," ",K.default.createElement(fr,{href:Fr,underline:"always",onClick:()=>{Bt("survey_card_clicked",{survey_type:e})},sx:{color:p=>p.palette.mode==="dark"?"text.primary":"primary.main",textDecorationColor:p=>p.palette.mode==="dark"?"#fff":p.palette.primary.main}},n("client:sidebar__survey_dialog__description__item1__part2")),"?"),K.default.createElement(b,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item2")),K.default.createElement(b,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__thanks"),",",K.default.createElement("br",null),n("client:sidebar__survey_dialog__by_who")))),K.default.createElement(_,{flexShrink:0,spacing:1,p:2},K.default.createElement(W,{variant:"contained",fullWidth:!0,href:Fr,target:"_blank",startIcon:K.default.createElement(Os.default,{sx:{color:"#F36666"}}),sx:{borderRadius:1,fontSize:16,px:2,py:1.5},onClick:()=>{Bt("survey_card_clicked",{survey_type:e})}},n("client:sidebar__survey_dialog__cta_button_text"))))},Ls=Hl;var zr=d(cr()),_e=d(C());var Ul=()=>{let e="feedback",[t,o]=(0,_e.useState)(!1),{userInfo:r,isPayingUser:n}=z(),s=ut(ra),p=ut(na),[i,a]=(0,_e.useState)(!1),u=async()=>{(await rt()).ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT?a(!0):a(!1)},l=(0,_e.useMemo)(()=>{if(!t||!p||s[e]||r===null)return!1;let g=r?.created_at,c=r?.subscribed_at;return n?c?(0,zr.default)(Date.now()).diff(c*1e3,"day")>14:g?(0,zr.default)(Date.now()).diff(g,"day")>21:!1:!1},[r,n,s,t,p,e]);return(0,_e.useEffect)(()=>{r&&u().then(()=>{o(!0)})},[r]),{loaded:t,canShowSurvey:l,alreadyPoppedSurveyModal:i}},Ds=Ul;var Nl=()=>{let{canShowSurvey:e,alreadyPoppedSurveyModal:t,loaded:o}=Ds(),[r,n]=(0,se.useState)(!1),s=()=>{n(!1)};return(0,se.useEffect)(()=>{let p=()=>{o&&e&&!t&&setTimeout(async()=>{await ft("ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT",!0),n(!0)},1500)};Yo().then(i=>{i&&p()})},[e,t,o]),se.default.createElement(fo,{open:r,disableScrollLock:!0,disableEnforceFocus:!0,"data-testid":"maxai-sidebar--survey-dialog",onClose:(p,i)=>{i!=="backdropClick"&&s()},slotProps:{backdrop:{onClick:()=>null}},sx:{position:"absolute",zIndex:2147483645,[`.${uo.root}`]:{position:"absolute"},[`.${co.paper}`]:{maxWidth:448,width:"calc(100% - 32px)",mx:2}}},se.default.createElement(P,{sx:{maxHeight:"calc(100vh - 100px)"}},se.default.createElement(Ls,{surveyKey:"feedback",handleCloseClick:s})))},Ws=Nl;var bt=d(C());var at=d(C());function Fl(e){let t=at.default.useRef();return t.current=e,at.default.useCallback((...r)=>t.current?.(...r),[])}function $r(e,t,o,r,n,s){let[p,i]=(0,at.useState)(null),a=kn(()=>s,[s],Zn);(0,at.useEffect)(()=>{},[a]);let u=(0,at.useCallback)(()=>{requestAnimationFrame(()=>{let f=typeof e=="function"?e(o):e;i(f||null)})},[o,e]);(0,at.useEffect)(()=>{let f=new Map;return a?.length&&a.forEach(h=>{let w=o?.querySelector(h);if(w){let k=f.get(h)||new ResizeObserver(u);k.observe(w),f.set(h,k)}}),u(),()=>{f.forEach(h=>{h.disconnect()}),f.clear()}},[o,u,a]);let[l,g]=(0,at.useState)(null),c=Fl(()=>{if(p){!Cn(p,o)&&t&&p?.scrollIntoView?.(n);let f=p.getBoundingClientRect(),{left:h,top:w}=f,{width:k,height:S}=f,{left:B,top:E}=o?o.getBoundingClientRect():{left:0,top:0};h=h-B,w=w-E;let H={left:h,top:w,width:k,height:S,radius:0};g(Q=>JSON.stringify(Q)!==JSON.stringify(H)?H:Q)}else g(null)}),x=f=>(Array.isArray(r?.offset)?r?.offset[f]:r?.offset)??6;return(0,at.useLayoutEffect)(()=>{let f=An(c,200),h=()=>{c(),f()};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[p,t,c,o]),[(0,at.useMemo)(()=>{if(!l)return l;let f=x(0),h=x(1),w=r?.radius||8;return{left:l.left-f,top:l.top-h,width:l.width+f*2,height:l.height+h*2,radius:w}},[l,r]),p]}var ct=d(C()),Ko={fill:"transparent",pointerEvents:"auto"},zl=e=>{let{pos:t,showMask:o,fill:r="rgba(0,0,0,0.5)",open:n,zIndex:s,disabledInteraction:p,animation:i,animationDuration:a=300,maskMode:u="fixed",onClick:l}=e,c=`MaxAITourMask-${$e()}`,m=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"};return n?ct.default.createElement("div",{style:{position:u,left:0,right:0,top:0,bottom:0,zIndex:s,pointerEvents:t&&!p?"none":"auto"},onClick:l},o?ct.default.createElement("svg",{style:{width:"100%",height:"100%"}},ct.default.createElement("defs",null,ct.default.createElement("mask",{id:c},ct.default.createElement("rect",{x:"0",y:"0",...m,fill:"white"}),t&&ct.default.createElement("rect",{x:t.left,y:t.top,rx:t.radius,width:t.width,height:t.height,fill:"black",style:{transition:i?`all ${a}ms`:"none"}}))),ct.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:r,mask:`url(#${c})`}),t&&ct.default.createElement(ct.default.Fragment,null,ct.default.createElement("rect",{...Ko,x:"0",y:"0",width:"100%",height:t.top}),ct.default.createElement("rect",{...Ko,x:"0",y:"0",width:t.left,height:"100%"}),ct.default.createElement("rect",{...Ko,x:"0",y:t.top+t.height,width:"100%",height:`calc(100vh - ${t.top+t.height}px)`}),ct.default.createElement("rect",{...Ko,x:t.left+t.width,y:"0",width:`calc(100vw - ${t.left+t.width}px)`,height:"100%"}))):null):null},Hs=zl;var D=d(C()),_t=d(C());var Us=d(C());var Qo="maxai-tour--triangle-arrow";var $l=({placement:e,arrowColor:t="#000",arrowSize:o=6,borderRadius:r=6})=>{let n={};switch(e){case"top":n={bottom:-o,left:`calc(50% - ${o}px)`,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"left":n={top:`calc(50% - ${o}px)`,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"bottom":n={top:-o,left:`calc(50% - ${o}px)`,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"right":n={top:`calc(50% - ${o}px)`,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;case"bottom-start":n={top:-o,left:r,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"bottom-end":n={top:-o,right:r,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"left-start":n={top:r,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"left-end":n={bottom:r,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"top-start":n={bottom:-o,left:r,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"top-end":n={bottom:-o,right:r,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"right-start":n={top:r,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;case"right-end":n={bottom:r,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;default:break}return Us.default.createElement(P,{className:Qo,sx:{position:"absolute",width:0,height:0,border:"solid",...n}})},Ns=$l;var Vr=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},Vl=e=>{let{mixpanelPrefix:t,title:o,titleTestid:r,description:n,imgCover:s,arrow:p,placement:i,onNext:a,onPrev:u,onFinish:l,onClose:g,showClose:c,closeIcon:x,current:m,total:f,sx:h,placementSx:w,refContentUpdate:k,updatePopperPosition:S}=e,{theme:B}=zt(),{t:E}=v(),H=(0,_t.useRef)(null),Q=(0,_t.useRef)(null),ot=(0,_t.useRef)(0),Zt=m===f,Jt=m===1,O=B.palette.background.paper,Lt=typeof i=="function"?i():i,j=D.useCallback(N=>r&&t?`${t} > ${r} > ${N}`:N,[r,t]),[pe,le]=(0,_t.useState)(window.innerHeight<=380);(0,_t.useEffect)(()=>{let N=setInterval(()=>{S?.(),At?.()},60),te=setTimeout(()=>{clearInterval(N)},5e3);return()=>{clearInterval(N),clearTimeout(te)}},[m]);let At=(0,_t.useCallback)(Pn(()=>{if(Q.current&&H.current){let N=Q.current.getBoundingClientRect();ot.current=Math.max(ot.current,H.current.clientHeight),N.bottom<ot.current||N.top+ot.current>document.documentElement.clientHeight||window.innerHeight<=380?le(!0):le(!1)}},50,{leading:!1}),[]);(0,_t.useEffect)(()=>{function N(){At()}N(),window.addEventListener("resize",N);let te=window.innerWidth,Gt=window.innerHeight,Ue=setInterval(()=>{(te!==window.innerWidth||Gt!==window.innerHeight)&&(te=window.innerWidth,Gt=window.innerHeight,Vr())},500);return()=>{window.removeEventListener("resize",N),clearInterval(Ue)}},[]);let Dt=(0,_t.useCallback)(()=>{u?.(),Vr()},[u]),be=(0,_t.useCallback)(()=>{a?.(),Vr()},[a]);return D.createElement(cn,{elevation:1,sx:{position:"relative",backgroundColor:"background.paper",display:"flex",flexDirection:"column",borderRadius:"8px",...h,...w?w(Lt):{},backgroundImage:"none"},"data-testid":"maxai-tour-step"},D.createElement(P,{ref:Q,sx:{overflow:"auto"}},D.createElement(P,{ref:N=>{H.current=N,k?.(N)},sx:{height:"auto",width:"100%"}},!pe&&s&&D.createElement(D.Fragment,null,typeof s.node=="string"?D.createElement(P,{sx:{borderRadius:"8px 8px 0 0",width:"100%",overflow:"hidden",position:"relative",paddingTop:`${s.height/s.width*100}%`,"& > img":{width:"100%",height:"100%",position:"absolute",top:0,left:0}}},D.createElement("img",{src:s.node,alt:`MaxAI tour step of ${m}`})):s.node),D.createElement(_,{sx:{padding:"16px"}},Lt&&p&&D.createElement(Ns,{placement:Lt,arrowSize:11,arrowColor:O}),c&&D.createElement(tt,{sx:{position:"absolute",top:12,right:12},onClick:g},x||D.createElement(yi,{sx:{fontSize:"16px",color:"text.secondary"}})),(o||n)&&D.createElement(_,{gap:"8px"},o&&D.createElement(b,{textAlign:"left",component:"div",fontSize:"20px",color:"text.primary",lineHeight:1.2,fontWeight:700,noWrap:!0,"data-testid":r?`maxai-tour--title--${r.replaceAll(" ","-")}`:null},o),n&&D.createElement(b,{sx:{fontSize:"14px",fontWeight:400,color:"text.primary",textAlign:"left"}},n)),D.createElement(_,{mt:o||n?2:0,direction:"row",alignItems:"center",justifyContent:"space-between",height:"40px"},D.createElement(_,{direction:"row",alignItems:"center",width:0,flex:1},f&&f>1&&D.createElement(b,{fontSize:"12px",textAlign:"left",fontWeight:400,sx:{color:N=>N.palette.mode==="dark"?"rgba(255, 255, 255, 0.38)":"rgba(0, 0, 0, 0.38)"}},m,"/",f)),D.createElement(_,{direction:"row",alignItems:"center",gap:1,flexShrink:0,sx:{[`.${gn.root}`]:{height:"40px",padding:"6px 8px",borderRadius:"8px"}}},!Jt&&D.createElement(W,{variant:"outlined",onClick:Dt,sx:{border:"none!important",color:"text.secondary",p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--back-button"},E("package__ui:maxai_tour__button__back__title")),Zt?D.createElement(W,{variant:"contained",onClick:l,"data-button-clicked-name":j("Start now"),sx:{p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--finish-button"},E(f===1?"package__features:onboarding__onboarding_popover__cta_button__got_it":"package__ui:maxai_tour__button__start_now__title")):D.createElement(W,{variant:"contained","data-button-clicked-name":j("Next"),onClick:be,"data-testid":"maxai-tour--next-button",sx:{p:"10px 16px !important",lineHeight:"20px"}},E("package__ui:maxai_tour__button__next__title"))))))))},jl=e=>{let{current:t,renderPanel:o}=e;return D.createElement(D.Fragment,null,typeof o=="function"?o(e,t):D.createElement(Vl,{...e}))},Fs=jl;var Rl={block:"center",inline:"center"},Gl=e=>{let{steps:t,open:o,defaultCurrent:r,current:n,onClose:s,onFinish:p,onChange:i,zIndex:a,disabledInteraction:u=!0,animation:l=!0,animationDuration:g=300,gap:c,rootContainer:x,maskMode:m,poperOffset:f,mixpanelPrefix:h}=e,[w,k]=bt.default.useState(n??r??0);(0,bt.useEffect)(()=>{if(n!==void 0){if(n<0||n>=t.length){k(0);return}k(n)}},[n,t]);let{target:S,title:B,titleTestid:E,description:H,imgCover:Q,placement:ot,fallbackPlacements:Zt,arrow:Jt,sx:O,placementSx:Lt,mask:j,scrollIntoViewOptions:pe=Rl,gap:le,closeIcon:At,showClose:Dt=!1,renderPanel:be,poperOffset:N,sizeObserverSelectorArray:te}=t[w],Gt=(0,bt.useRef)(null),Ue=Gt.current?{width:Gt.current.clientWidth,height:Gt.current.clientHeight}:void 0,yt=typeof ot=="function"?ot(Ue):ot,{isDarkMode:Ne}=zt(),[qt,Ce]=bt.default.useState(o??!1),oo=le??c,ye=qt&&(j??!0),ue=typeof ye=="boolean"?ye:!!ye,[ro,Wt]=$r(S,qt,x,oo,pe,te),Fe=(c?.offset?.[1]||c?.offset?.[0]||6)+(Jt?16:8),M=q=>{if(typeof q=="number")return q;let[Y,J=Fe]=q,lt=typeof J=="function"?J(Fe):J;return[Y,lt]},X=Fn("maxai-animation-fade-in",{enable:l,duration:g,fillMode:"forwards"}),pt=(0,bt.useRef)(null),Z=()=>{pt.current?.update&&pt.current.update()};if(!x)return null;let It=[{name:"offset",options:{offset:M(N??f??[0,Fe])}}];return Zt&&It.push({name:"flip",options:{fallbackPlacements:Zt}}),bt.default.createElement(bt.default.Fragment,null,ro&&bt.default.createElement(Hs,{fill:"rgba(0,0,0,0.6)",animation:l?w>0:!1,open:ue,pos:ro,showMask:ue,zIndex:a,disabledInteraction:u,animationDuration:g,maskMode:m,onClick:()=>{t[w].emitFinishOnClickAway&&(Ce(!1),p?.())}}),bt.default.createElement(dn,{ref:pt,key:w,open:qt&&!!Wt,anchorEl:Wt,placement:yt,container:x,style:{zIndex:(a||0)+1},sx:{opacity:l?0:1,...X},modifiers:It},({placement:q})=>bt.default.createElement(Fs,{refContentUpdate:Y=>{Gt.current=Y},mixpanelPrefix:h,title:B,titleTestid:E,description:H,imgCover:Q,arrow:Jt,showClose:Dt,target:Wt,placement:q.startsWith("auto")?yt:q,renderPanel:be,mask:j,sx:{opacity:l?0:1,...X,...O},placementSx:Lt,closeIcon:At,current:w+1,total:t.length,onClose:()=>{Ce(!1),s?.()},onNext:async()=>{let Y=t[w]?.afterStep;Y&&await Y();let J=t[w+1]?.beforeStep;J&&await J(),k(lt=>{let Pt=lt+1;return Pt<t.length?(i?.(Pt),Pt):lt})},onPrev:async()=>{let Y=t[w]?.afterStep;Y&&await Y();let J=t[w-1]?.beforeStep;J&&await J(),k(lt=>{let Pt=lt-1;return Pt>=0?(i?.(Pt),Pt):lt})},onFinish:()=>{Ce(!1),p?.()},updatePopperPosition:Z})))},Zo=Gl;var dt=d(C());var Jo=d(C()),zs=d(tn());var ql=({children:e})=>{let[t,o]=(0,Jo.useState)(null);return(0,Jo.useEffect)(()=>{let r=jn();o(r)},[]),t?(0,zs.createPortal)(e,t):e},tr=ql;var Yl=()=>{let{t:e}=v(["maxai_tour"]),{isDarkMode:t}=zt(),o=(0,dt.useRef)(Pe()),{loaded:r}=we(),n=bo(),[s,p]=(0,dt.useState)(!1),{setExtensionTourOnBoardingOpened:i}=Me(),[a,u]=(0,dt.useState)(!0),[l,g]=(0,dt.useState)("setLanguage"),{setIsInStepTour:c}=$(m=>({setIsInStepTour:m.setIsInStepTour}));(0,dt.useEffect)(()=>{rt().then(m=>{m.ON_BOARDING_MAXAI_3_0===!0&&g("newUI"),m.ON_BOARDING_MAXAI_6_0!==!0&&m[Xt]!==!0&&(p(!0),c(!0))})},[]),_o(()=>{rt().then(m=>{m[Xt]&&p(!1)})});let x=(0,dt.useMemo)(()=>{let m={gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!Yt},f=[];return f.push({...m,placement:h=>ur(n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),h||{width:328,height:380},["top-start","bottom-start","top-start"]),sx:{...m.sx,[`& .${Qo}`]:{left:306/2+"px"}},sizeObserverSelectorArray:['[data-testid="maxai--chat-box--chat-input--header"]'],target:()=>{let h=n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]');if(h){let w=n?.querySelector('[data-testid="maxai--chat-box--chat-input--header"]');return n?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]')?{getBoundingClientRect(){let S=h.getBoundingClientRect(),B=w?.getBoundingClientRect(),E={width:S.width,left:S.left,top:S.top,height:S.height};if(B&&B.width!==0&&B.height!==0&&B.top!==0&&B.left!==0){E.left=Math.min(B.left,S.left),E.top=Math.min(B.top,S.top);let H=Math.max(B.left+B.width,S.left+S.width),Q=Math.max(B.top+B.height,S.top+S.height);E.width=H-E.left,E.height=Q-E.top}return E}}:h}return null},title:e("maxai_tour:sidebar_tour__v6_0__step__2__title"),titleTestid:"Ask AI anything",description:e("maxai_tour:sidebar_tour__v6_0__step__2__description_1"),imgCover:{node:Mt("/images/on-boarding/ask-ai-anything.webp"),width:800,height:450}},{...m,placement:h=>ur(n?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]'),h||{width:328,height:380},["bottom-start","top-start","bottom-start"]),target:()=>{let h=n?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]'),w=n?.querySelector("div.maxai-chat-screenshot-list-view");return h?{getBoundingClientRect(){let k=h.getBoundingClientRect(),S=w?.getBoundingClientRect()||{width:0,height:0};return{width:k.width+16,left:k.left-8,top:k.top-8-S.height,height:k.height+8+S.height}}}:null},title:e("maxai_tour:sidebar_tour__v6_0__step__4__title"),titleTestid:"Add sources",description:e("maxai_tour:sidebar_tour__v6_0__step__4__description_1"),imgCover:{node:Mt("/images/on-boarding/add-sources.webp"),width:800,height:450}}),f},[e,n,t,l]);return(0,dt.useEffect)(()=>{let m=()=>{setTimeout(()=>{n?.querySelector(".max-ai__action__set_variables_modal")?u(!0):u(!1)},1e3)};return window.addEventListener("click",m,{capture:!0}),m(),()=>{window.removeEventListener("click",m,{capture:!0})}},[]),!n||!r||!s||a?null:dt.default.createElement(tr,null,dt.default.createElement(Zo,{mixpanelPrefix:"Onboarding",zIndex:2147483643,rootContainer:n,open:!0,maskMode:o.current?"fixed":"absolute",steps:x,onFinish:async()=>{await ft(Xt,!0),i(!0),p(!1),c(!1)},onClose:()=>{c(!1)}}))},$s=Yl;var Vs=d(je()),jr=d(C());var Xl=e=>{let{tooltipProps:t,...o}=e,{t:r}=v(["client"]),{chatBoxShortCutKey:n}=ko();return jr.default.createElement(xo,{testid:"maxai--sidebar--close--button",title:r("client:sidebar__button__close_sidebar"),description:n,onClick:Bo,tooltipProps:{placement:"left",...t},...o},jr.default.createElement(Vs.default,null))},js=Xl;var Tt=d(C());var Kl=e=>{let{anchorElementSelectors:t='[data-testid="maxai--sidebar--immersive_chat--button"]',placement:o="bottom-end",...r}=e,{t:n}=v(),[s,p]=Tt.default.useState(!1),[i,a]=Tt.default.useState(!0),u=$(m=>m.conversationIds),l=ai(u[0]),g=ne(u[0]),c=(0,Tt.useCallback)(async()=>{let m=await To.getOnboardingDataByKey(Mi),f=[...l].reverse().find(w=>w.type==="user"),h=f?.meta?.messageChatDocuments?f.meta.messageChatDocuments.length>0:!1;m&&l.length>0&&g===!1&&h===!1&&p(!0)},[l,g]),{extensionTourOnBoardingOpened:x}=Bi();return(0,Tt.useEffect)(()=>{x&&To.getOnboardingDataByKey(wr).then(m=>a(!!m))},[x]),(0,Tt.useEffect)(()=>{i||c()},[i,c]),i?null:Tt.default.createElement(Be,{trigger:s,placement:o,anchorElementSelectors:t,onShow:()=>{To.setOnboardingData(wr,!0)},CtaButtonProps:{"data-button-clicked-name":"Onboarding > Chat in full page > Got it"},...r},Tt.default.createElement(_,{spacing:.5},Tt.default.createElement(b,{fontSize:20,lineHeight:1.4,color:"text.primary",fontWeight:700,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__title")),Tt.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__description"))))},Rs=Kl;var De=d(C());var Ql=e=>{let{tooltipProps:t,...o}=e,{conversationId:r}=$(i=>({conversationId:i.conversationIds[0]})),s=vo(r)?.meta?.AIModel,{t:p}=v(["client"]);return De.default.createElement(De.default.Fragment,null,De.default.createElement(xo,{testid:"maxai--sidebar--immersive_chat--button",title:p("client:sidebar__button__immersive_chat"),onClick:()=>{Co({url:ri,query:`?id=${r}${s?`&ai-model=${s}`:""}`})},tooltipProps:{placement:"left",...t},...o},De.default.createElement($t,{icon:"Fullscreen"})),De.default.createElement(Rs,null))},Gs=Ql;var qs=d(C());var Zl=({children:e,autoInitFetch:t})=>{let o=ji({autoInitFetch:t});return qs.default.createElement(Vi.Provider,{value:o},e)},Ys=Zl;var We=d(C()),Xs={leftIsNarrow:!1},Ks=(0,We.createContext)(Xs),Qs=({children:e,leftIsNarrow:t})=>We.default.createElement(Ks.Provider,{value:{leftIsNarrow:t}},e),Zs=()=>{let e=(0,We.useContext)(Ks);return e||Xs};var st=d(C());var Jl=()=>{let{t:e}=v(["maxai_tour"]),t=(0,st.useRef)(Pe()),{loaded:o}=we(),r=bo(),[n,s]=(0,st.useState)(!1),{setExtensionTourOnBoardingOpened:p}=Me(),[i,a]=(0,st.useState)(!0),u=()=>{rt().then(g=>{g.ON_BOARDING_MAXAI_6_0===!0&&!g[Xt]&&s(!0)}).catch(g=>{})};(0,st.useEffect)(()=>{u()},[]),_o(()=>{u()});let l=(0,st.useMemo)(()=>[{...{gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!Yt},emitFinishOnClickAway:!0,placement:"top",title:e("maxai_tour:sidebar_tour__v8_0__step__new_layout__title"),description:e("maxai_tour:sidebar_tour__v8_0__step__new_layout__description"),imgCover:{node:Mt("/images/on-boarding/new-layout.webp"),width:800,height:450},target:()=>{let c=r?.querySelector('[data-testid="maxai--chat-box-header--first-line"]');return c?{getBoundingClientRect(){let x=c.getBoundingClientRect();return{top:x.top,bottom:x.bottom,right:x.right,height:x.height,width:x.width+1,left:x.left-1,x:x.left-1,y:x.top}}}:null}}],[e,r]);return(0,st.useEffect)(()=>{let g=()=>{setTimeout(()=>{r?.querySelector(".max-ai__action__set_variables_modal")?a(!0):a(!1)},1e3)};return window.addEventListener("click",g,{capture:!0}),g(),()=>{window.removeEventListener("click",g,{capture:!0})}},[]),!r||!o||!n||i?null:st.default.createElement(tr,null,st.default.createElement(Zo,{mixpanelPrefix:"Onboarding",zIndex:2147483644,rootContainer:r,open:!0,maskMode:t.current?"fixed":"absolute",steps:l,onFinish:async()=>{await ft(Xt,!0),p(!0),s(!1)}}))},Js=(0,st.memo)(Jl);var tu=()=>{let{userSettings:e}=Te(),t=$(a=>a.conversationIds[0]||""),o=ut(Yi),r=(0,A.useMemo)(()=>o.rootRect&&e?.alwaysContinueInSidebar,[e?.alwaysContinueInSidebar,o.rootRect]),n=ne(t),{leftIsNarrow:s}=Zs(),{maxAIBrowserWindows:p}=(0,A.useContext)(gt),i=p.length>0;return A.default.createElement(A.default.Fragment,null,A.default.createElement(qi,{leftPanelSide:i&&s?"drawer":"separateWindow",leftPanelContent:i&&A.default.createElement(hs,null),onPanelClose:async()=>{let a=await F.getCurrent();a&&await F.remove(a.id)},headerProps:()=>({renderLeftNode:()=>A.default.createElement(A.default.Fragment,null,A.default.createElement(fs,null),A.default.createElement(ms,{placement:"bottom-start"}),A.default.createElement(Ys,{autoInitFetch:!1},A.default.createElement(Gi,{placement:"bottom-start"})),A.default.createElement(Ri,{variant:"icon",tooltipProps:{placement:"bottom"}})),renderRightNode:()=>A.default.createElement(_,{direction:"row",gap:"8px",alignItems:"center",sx:{"&:not(:empty)":{p:"8px 4px"}}},A.default.createElement(zi,null),A.default.createElement(Gs,{tooltipProps:{placement:"bottom"}}),A.default.createElement(js,{tooltipProps:{placement:"bottom"}})),footerNode:A.default.createElement(_,{sx:{flexDirection:"row",justifyContent:"right",paddingRight:"20px"}},A.default.createElement(cs,null)),sx:{marginBottom:0,minHeight:0}}),toolsProps:()=>({renderLeftNode:a=>null,renderRightNode:a=>null}),inputProps:()=>({renderHeaderRightNode:a=>A.default.createElement(A.default.Fragment,null,A.default.createElement($i,{enableState:u=>!u.chatScreenshots.length&&!u.selectionContent},({isEnable:u})=>A.default.createElement("div",{style:u?void 0:{display:"none"}},A.default.createElement(Fi,{getScreenshot:sa,onCropStart:Bo,onCropEnd:jt})))),renderFooterLeftNode:a=>A.default.createElement(A.default.Fragment,null,a.proChatSwitch,A.default.createElement(Po,{enableChatMode:"pro_chat"},a.aiModelSelector),A.default.createElement(Po,{enableChatMode:"pro_chat"},a.aiLanguageSelector),A.default.createElement(Po,null,u=>A.default.createElement("div",{style:u!=="pro_chat"?{display:"none"}:{}},a.portalRoot))),renderFooterRightNode:a=>A.default.createElement(A.default.Fragment,null,a.myOwnToolsButton)}),messageProps:()=>({AIMessage:{renderTools:(a,u,{isLastMessage:l})=>A.default.createElement(A.default.Fragment,null,a.shareConversationButton,a.imageCopyButton,a.textCopyButton,a.attachmentsDownloadButton,a.usePromptButton,a.regenerateButton,a.modelSuggestions,r&&l&&A.default.createElement(A.default.Fragment,null,A.default.createElement(gs,null)))}})}),!n&&A.default.createElement($s,null),!n&&A.default.createElement(Js,null),A.default.createElement(Ms,null),A.default.createElement(Ws,null))},tp=tu;var Ct=d(C());var eu=Mt("/images/activity/promotion-activity_bar_icon.png"),ou=Mt("/images/activity/promotion-activity_bar_bg.png"),ru=Mt("/images/activity/promotion-activity_bar_button_bg.png"),ep=`${eo()}_promotion_activity_bar`,nu=()=>{let{userInfo:e,loaded:t}=z(),[o,r]=(0,Ct.useState)(!1),{isActivityUser:n,loaded:s,isActivityOpen:p}=Go(),i=(0,Ct.useMemo)(()=>!e||!t?null:Ts(e),[e,t]);(0,Ct.useEffect)(()=>{rt().then(g=>{g[ep]||r(!0)})},[]);let a=g=>{g.stopPropagation(),r(!1),ft(ep,!0)},u=g=>{g.stopPropagation(),window.open(i?.learnMoreLink)},{t:l}=v();return!o||!s||!i||!p||!n?null:Ct.default.createElement(_,{spacing:1,direction:"row",sx:{background:`url(${ou}) center / 100% 100% rgba(75, 31, 120, 1)`,height:"56px",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},onClick:u},Ct.default.createElement(W,{sx:{background:`url(${ru}) 0 0 / 100% 131% !important`,overflow:"visible",height:"34px",color:"#fff",minWidth:"200px",pt:"6px",px:"15px"},disableRipple:!0,onClick:u},l("package__features:pricing__promotion_activity_bar__button")),Ct.default.createElement(b,{sx:{fontSize:"18px",fontWeight:500,lineHeight:"27px",textAlign:"center",color:"#fff"}},l("package__features:pricing__promotion_activity_bar__label")),Ct.default.createElement("img",{src:eu,alt:"black-friday-gift-icon",width:24,height:24}),Ct.default.createElement(tt,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:a},Ct.default.createElement($t,{icon:"Close",sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"24px"}})))},op=nu;var iu=()=>{let e=ut(kt),t=e.open||e.loadedAppSidebar;return Ot.default.createElement(bi,null,Ot.default.createElement(ja,null),t&&Ot.default.createElement(hi,{sx:{flex:1,height:0}},Ot.default.createElement(Pa,null),Ot.default.createElement(op,null),Ot.default.createElement(_,{flex:1,direction:"row",height:0},Ot.default.createElement(P,{flex:1,width:0,sx:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}},Ot.default.createElement(Sa,null,Ot.default.createElement(tp,null)))),Ot.default.createElement(Ha,null)))},rp=iu;var He=d(C());var au={top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},su=150,pu=en({key:"SidebarStylesAtom",default:{minWidth:480,visibleWidth:480,maxWidth:0}}),lu=()=>{let{localSettings:e,setLocalSettings:t}=Vn(),[o,r]=(0,He.useState)(!1),[n,s]=oe(pu),{maxWidth:p}=n,i=e.sidebarSettings,a=async u=>{s(l=>({...l,visibleWidth:u})),o&&(await t({sidebarSettings:{common:{chatBoxWidth:u}}}),jt())};return(0,He.useEffect)(()=>{let u=()=>{let l=Math.max((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)-su,480);s(g=>({...g,maxWidth:l}))};return window.addEventListener("resize",u),u(),()=>{window.removeEventListener("resize",u)}},[]),(0,He.useEffect)(()=>{s(u=>({...u,visibleWidth:Math.min(u.visibleWidth,p)}))},[p]),(0,He.useEffect)(()=>{i?.common?.chatBoxWidth&&p&&(s(u=>({...u,visibleWidth:Math.min(p,i?.common?.chatBoxWidth??u.minWidth)})),r(!0))},[i?.common?.chatBoxWidth,p,s]),{loaded:o,minWidth:n.minWidth,maxWidth:n.maxWidth,resizeEnable:{...au,left:!Pe()},visibleWidth:n.visibleWidth,setLocalWidth:a}};var np=lu;var uu=()=>{let e=L.default.useRef(null),{visibleWidth:t,maxWidth:o,minWidth:r,setLocalWidth:n,resizeEnable:s}=np(),{isSubscriptionPaymentFailed:p}=z(),i=Ci(),[a,u]=oe(kt),l=Ie(yo),{setExtensionTourOnBoardingOpened:g}=Me();(0,L.useEffect)(()=>{rt().then(E=>{E[Xt]&&g(!0)});let S=new MutationObserver(E=>{E.forEach(H=>{H.type!=="attributes"&&H.attributeName!=="class"||u(Q=>({...Q,env:Sn(),open:H.target?.classList?.contains("open")||!1}))})}),B=document.getElementById(sn);return B&&S.observe(B,{attributes:!0,childList:!1}),()=>{S.disconnect()}},[]);let{refreshChatAIModelSelector:c}=fi(),x=(0,L.useRef)(!1);(0,L.useEffect)(()=>{a.open&&(x.current||(window.postMessage({event:aa,data:{open:a.open}}),x.current=!0),u(S=>({...S,loadedAppSidebar:!0})))},[a.open,c]),(0,L.useEffect)(()=>{if(!a.loadedAppSidebar){let S=setInterval(()=>{Xi()&&(u(B=>({...B,loadedAppSidebar:!0})),clearInterval(S))},1e3);return()=>{clearInterval(S)}}return()=>{}},[a.loadedAppSidebar]),(0,L.useEffect)(()=>{a.open&&l(S=>({...S,show:p}))},[a.open]),(0,L.useEffect)(()=>()=>{li()},[]);let[m,f]=(0,L.useState)(!1),[h,w]=(0,L.useState)(!1),k=(0,L.useRef)(t);return k.current=t,(0,L.useEffect)(()=>{let S=()=>{f(window.innerWidth-k.current<450)};return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}},[]),L.default.createElement(L.default.Fragment,null,L.default.createElement(vi,{ref:i,size:{width:t,height:"100%"},enable:s,maxWidth:o,minWidth:r,onResize:(S,B,E,H)=>{f(window.innerWidth-t-H.width<450)},onResizeStop:async(S,B,E,H)=>{await n(t+H.width),w(!1)},onResizeStart:()=>{w(!0)}},L.default.createElement(P,{component:"div",className:"use-chat-gpt-ai-app",ref:e,sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",borderLeft:"1px solid",borderColor:S=>S.palette.mode==="light"?"rgba(0, 0, 0, .1)":"rgba(255, 255, 255, 0.12)",bgcolor:"background.paper"},onWheel:S=>{S.stopPropagation()}},h?L.default.createElement("style",null,"#USE_CHAT_GPT_AI_ROOT_Wrapper iframe { pointer-events: none }"):null,L.default.createElement(_,{height:"100%",sx:{"& *":{boxSizing:"border-box",fontFamily:'"Roboto","Helvetica","Arial",sans-serif!important'}}},L.default.createElement(Gn,null,L.default.createElement(xa,null),L.default.createElement(wi,null),L.default.createElement(ia,null),L.default.createElement(la,null,L.default.createElement(qe,{defaultContextMenuPath:"/my_own_tools"},L.default.createElement(Qs,{leftIsNarrow:m},L.default.createElement(rp,null)))))))))},y0=uu;export{y0 as default};
