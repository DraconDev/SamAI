import{a as he,b as we,c as br,f as Ar,g as Fr,i as kr,j as Vr}from"./3T6N3UXS.js";import{e as Ye,j as xr,k as wr,q as Cr}from"./KSVMQXXA.js";import{h as Ir}from"./F5E7GPVZ.js";import{a as Co}from"./72XNZIFC.js";import{a as Io}from"./FAXKEQHZ.js";import{b as de}from"./YYNJ5ORL.js";import{a as Sr,b as vr}from"./QAN7YQ5O.js";import{a as wo}from"./7ETG7F5K.js";import{g as dr}from"./K3RX6V6Z.js";import{a as kt}from"./QPKKGBHL.js";import{f as ur,g as Me,s as Le}from"./WOMY7LQF.js";import{A as pr,c as wt,i as je,w as mr}from"./K5PYBOWW.js";import{c as fr}from"./KOAEEWKV.js";import{C as Ct,U as ze,X as He,f as nr,l as ar,o as lr}from"./DXJBONGG.js";import{e as cr}from"./Y2RTU6FS.js";import{c as ce}from"./BJ6PO45I.js";import{h as Ft,la as U,na as B}from"./URK6S63I.js";import{a as At}from"./PCHDBHHN.js";import{d as Xe}from"./VT4ATK36.js";import{a as hr}from"./JX4MH7BP.js";import{E as Ke,N as yr,g as qe,o as _r,p as $e,q as gr,r as xe,z as Ge}from"./F5AXRJSB.js";import{ja as sr}from"./3M3IYJ36.js";import{A as ke,F as vt,G as bt,L as ir,M as ue,o as ye}from"./WINLMBYH.js";import{A as or,G as St,c as ht,e as xt,n as Pe,z as rr}from"./NO5PF2KS.js";import{a as le}from"./4B6UFNBQ.js";import{c as yt,f as J}from"./GAV6HCJA.js";var Lr=yt(Qe=>{"use strict";"use client";var Do=At();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.default=void 0;var Po=Do(kt()),Mo=Ft(),$i=Qe.default=(0,Po.default)((0,Mo.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBackOutlined")});var Nr=yt(et=>{"use strict";"use client";var Oo=At();Object.defineProperty(et,"__esModule",{value:!0});et.default=void 0;var Bo=Oo(kt()),Uo=Ft(),es=et.default=(0,Bo.default)((0,Uo.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22zm1 14h-2v2h2zm0-6h-2v4h2z"}),"WarningAmberOutlined")});var co=yt(dt=>{"use strict";"use client";var ii=At();Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var si=ii(kt()),ni=Ft(),vs=dt.default=(0,si.default)((0,ni.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")});var Je=J(le());var Er=ke({key:"SurveyFilledOutAtom",default:{feedback:!1}}),Tr=ke({key:"firstFetchSurveyStatusLoadedAtom",default:!1});var Vo=(e=!0)=>{let{isLogin:r}=qe(),t=bt(Er),o=bt(Tr),s=(0,Je.useCallback)(async(n,u=!1)=>{if(r){let c=await hr.getSurveyStatus(n,u);t(c)}else t({});o(!0)},[r]);return(0,Je.useEffect)(()=>{e&&s()},[s,e]),{syncSurveyStatus:s}},Ze=Vo;var Dr=J(Co());var It=J(le()),Eo=e=>{let{sx:r,onClick:t,onConnectSuccess:o}=e,{connectMaxAIAccountInNewTab:s,connectMaxAIAccountWithEmail:n,loading:u}=Ke("Email"),{t:c}=ue(),{syncSurveyStatus:_}=Ze(!1),{refreshModelUsage:b}=Ye();return It.default.createElement(de,{"data-testid":"maxai--auth--email-sign-in",loading:u,fullWidth:!0,variant:"normalOutlined",startIcon:It.default.createElement(Dr.default,null),sx:{height:56,borderRadius:1,fontSize:16,...r},onClick:()=>{ye(async()=>{await xe.clearAuthTokens(),await Ge.clearUserInfo()}).then(({error:m})=>{}),t?.(),Pe?s({onSuccess(){ye(()=>{b(),_(void 0,!0),o?.()})}}):n({onSuccess(){ye(()=>{o?.()})}}),Xe("sign_in_started",{method:"email"}),he({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"email"}})}},c("package__features:auth__sign_in__button__email"))},Pr=Eo;var me=J(le()),To=e=>{let{sx:r,autoLogin:t,variant:o="contained"}=e,{connectMaxAIAccount:s,loading:n}=Ke("Google"),{t:u}=ue(),c=(0,me.useMemo)(()=>o==="contained"?{color:"white",bgcolor:"#1F87FC","&:hover":{bgcolor:"#4285F4",color:"white"}}:{bgcolor:"white",borderColor:"#dadce0",color:"rgba(0,0,0,.54)","&:hover":{borderColor:"#dadce0",bgcolor:"white"}},[o]),_=me.default.useRef(!1);return(0,me.useEffect)(()=>{if(t){if(_.current)return;_.current=!0,s().then().catch()}},[t]),me.default.createElement(de,{"data-testid":"maxai--auth--google-sign-in",loading:n,startIcon:me.default.createElement(B,{sx:{p:.5,bgcolor:"white",borderRadius:"50%"}},me.default.createElement(mr,{sx:{fontSize:"16px"}})),variant:o,sx:{height:56,fontSize:16,mt:3,gap:1,...r,...c},onClick:()=>{ye(async()=>{await xe.clearAuthTokens(),await Ge.clearUserInfo()}).then(({error:b})=>{}),setTimeout(()=>{s()},0),Xe("sign_in_started",{method:"google"}),he({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"google"}})}},u("package__features:auth__sign_in__button__google"))},Mr=To;var _o=J(Lr()),go=J(wo()),yo=J(Io());var k=J(le());var Or=ke({key:"FunnelSurveyPopupOpenStateAtom",default:{}}),Br=ke({key:"FunnelSurveyPopupOpenTimerAtom",default:{}});var Re=J(le());var Lo=e=>{let[r,t]=vt(Or),[o,s]=vt(Br),n=(0,Re.useCallback)(async(_=0)=>{if(await Fr(e))return;let b=window.setTimeout(async()=>{t(m=>({...m,[e]:!0})),await Ar(e,!0)},_);s(m=>({...m,[e]:b}))},[e,t,s]),u=(0,Re.useCallback)(()=>{let _=o[e];_&&(clearTimeout(_),s(b=>({...b,[e]:-1}))),t(b=>({...b,[e]:!1}))},[e,o,t,s]),c=(0,Re.useCallback)((_=br)=>{let b=o[e];b&&(clearTimeout(b),s(m=>({...m,[e]:-1}))),n(_)},[e,o,n,s]);return{open:r[e]||!1,reStartOpenPopupTimer:c,openPopup:n,closePopup:u}},Ur=Lo;var lo=J(Nr());var G=J(le());var A=J(le(),1),Ue=e=>e.type==="checkbox",Ie=e=>e instanceof Date,R=e=>e==null,Kr=e=>typeof e=="object",z=e=>!R(e)&&!Array.isArray(e)&&Kr(e)&&!Ie(e),Xr=e=>z(e)&&e.target?Ue(e.target)?e.target.checked:e.target.value:e,No=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Yr=(e,r)=>e.has(No(r)),Wo=e=>{let r=e.constructor&&e.constructor.prototype;return z(r)&&r.hasOwnProperty("isPrototypeOf")},Ht=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let r,t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Ht&&(e instanceof Blob||e instanceof FileList))&&(t||z(e)))if(r=t?[]:{},!t&&!Wo(e))r=e;else for(let o in e)e.hasOwnProperty(o)&&(r[o]=$(e[o]));else return e;return r}var Ne=e=>Array.isArray(e)?e.filter(Boolean):[],L=e=>e===void 0,d=(e,r,t)=>{if(!r||!z(e))return t;let o=Ne(r.split(/[,[\].]+?/)).reduce((s,n)=>R(s)?s:s[n],e);return L(o)||o===e?L(e[r])?t:e[r]:o},se=e=>typeof e=="boolean",jt=e=>/^\w*$/.test(e),Jr=e=>Ne(e.replace(/["|']|\]/g,"").split(/\.|\[/)),P=(e,r,t)=>{let o=-1,s=jt(r)?[r]:Jr(r),n=s.length,u=n-1;for(;++o<n;){let c=s[o],_=t;if(o!==u){let b=e[c];_=z(b)||Array.isArray(b)?b:isNaN(+s[o+1])?{}:[]}if(c==="__proto__")return;e[c]=_,e=e[c]}return e},ot={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ne={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pe={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zo=A.default.createContext(null),lt=()=>A.default.useContext(zo);var Zr=(e,r,t,o=!0)=>{let s={defaultValues:r._defaultValues};for(let n in e)Object.defineProperty(s,n,{get:()=>{let u=n;return r._proxyFormState[u]!==ne.all&&(r._proxyFormState[u]=!o||ne.all),t&&(t[u]=!0),e[u]}});return s},Q=e=>z(e)&&!Object.keys(e).length,Qr=(e,r,t,o)=>{t(e);let{name:s,...n}=e;return Q(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(u=>r[u]===(!o||ne.all))},te=e=>Array.isArray(e)?e:[e],Rr=(e,r,t)=>!e||!r||e===r||te(e).some(o=>o&&(t?o===r:o.startsWith(r)||r.startsWith(o)));function ut(e){let r=A.default.useRef(e);r.current=e,A.default.useEffect(()=>{let t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Ho(e){let r=lt(),{control:t=r.control,disabled:o,name:s,exact:n}=e||{},[u,c]=A.default.useState(t._formState),_=A.default.useRef(!0),b=A.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),m=A.default.useRef(s);return m.current=s,ut({disabled:o,next:h=>_.current&&Rr(m.current,h.name,n)&&Qr(h,b.current,t._updateFormState)&&c({...t._formState,...h}),subject:t._subjects.state}),A.default.useEffect(()=>(_.current=!0,b.current.isValid&&t._updateValid(!0),()=>{_.current=!1}),[t]),Zr(u,t,b.current,!1)}var fe=e=>typeof e=="string",eo=(e,r,t,o,s)=>fe(e)?(o&&r.watch.add(e),d(t,e,s)):Array.isArray(e)?e.map(n=>(o&&r.watch.add(n),d(t,n))):(o&&(r.watchAll=!0),t);function jo(e){let r=lt(),{control:t=r.control,name:o,defaultValue:s,disabled:n,exact:u}=e||{},c=A.default.useRef(o);c.current=o,ut({disabled:n,subject:t._subjects.values,next:m=>{Rr(c.current,m.name,u)&&b($(eo(c.current,t._names,m.values||t._formValues,!1,s)))}});let[_,b]=A.default.useState(t._getWatch(o,s));return A.default.useEffect(()=>t._removeUnmounted()),_}function qo(e){let r=lt(),{name:t,disabled:o,control:s=r.control,shouldUnregister:n}=e,u=Yr(s._names.array,t),c=jo({control:s,name:t,defaultValue:d(s._formValues,t,d(s._defaultValues,t,e.defaultValue)),exact:!0}),_=Ho({control:s,name:t,exact:!0}),b=A.default.useRef(s.register(t,{...e.rules,value:c,...se(e.disabled)?{disabled:e.disabled}:{}}));return A.default.useEffect(()=>{let m=s._options.shouldUnregister||n,h=(w,K)=>{let M=d(s._fields,w);M&&M._f&&(M._f.mount=K)};if(h(t,!0),m){let w=$(d(s._options.defaultValues,t));P(s._defaultValues,t,w),L(d(s._formValues,t))&&P(s._formValues,t,w)}return()=>{(u?m&&!s._state.action:m)?s.unregister(t):h(t,!1)}},[t,s,u,n]),A.default.useEffect(()=>{d(s._fields,t)&&s._updateDisabledField({disabled:o,fields:s._fields,name:t,value:d(s._fields,t)._f.value})},[o,t,s]),{field:{name:t,value:c,...se(o)||_.disabled?{disabled:_.disabled||o}:{},onChange:A.default.useCallback(m=>b.current.onChange({target:{value:Xr(m),name:t},type:ot.CHANGE}),[t]),onBlur:A.default.useCallback(()=>b.current.onBlur({target:{value:d(s._formValues,t),name:t},type:ot.BLUR}),[t,s]),ref:A.default.useCallback(m=>{let h=d(s._fields,t);h&&m&&(h._f.ref={focus:()=>m.focus(),select:()=>m.select(),setCustomValidity:w=>m.setCustomValidity(w),reportValidity:()=>m.reportValidity()})},[s._fields,t])},formState:_,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!d(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!d(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!d(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!d(_.validatingFields,t)},error:{enumerable:!0,get:()=>d(_.errors,t)}})}}var ct=e=>e.render(qo(e));var $o=(e,r,t,o,s)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[o]:s||!0}}:{},Se=()=>{let e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},Vt=(e,r,t={})=>t.shouldFocus||L(t.shouldFocus)?t.focusName||`${e}.${L(t.focusIndex)?r:t.focusIndex}.`:"",Be=e=>({isOnSubmit:!e||e===ne.onSubmit,isOnBlur:e===ne.onBlur,isOnChange:e===ne.onChange,isOnAll:e===ne.all,isOnTouch:e===ne.onTouched}),Wt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),Ve=(e,r,t,o)=>{for(let s of t||Object.keys(e)){let n=d(e,s);if(n){let{_f:u,...c}=n;if(u){if(u.refs&&u.refs[0]&&r(u.refs[0],s)&&!o)return!0;if(u.ref&&r(u.ref,u.name)&&!o)return!0;if(Ve(c,r))break}else if(z(c)&&Ve(c,r))break}}},to=(e,r,t)=>{let o=te(d(e,t));return P(o,"root",r[t]),P(e,t,o),e},qt=e=>e.type==="file",_e=e=>typeof e=="function",it=e=>{if(!Ht)return!1;let r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},rt=e=>fe(e),$t=e=>e.type==="radio",st=e=>e instanceof RegExp,Wr={value:!1,isValid:!1},zr={value:!0,isValid:!0},ro=e=>{if(Array.isArray(e)){if(e.length>1){let r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?zr:{value:e[0].value,isValid:!0}:zr:Wr}return Wr},Hr={isValid:!1,value:null},oo=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Hr):Hr;function jr(e,r,t="validate"){if(rt(e)||Array.isArray(e)&&e.every(rt)||se(e)&&!e)return{type:t,message:rt(e)?e:"",ref:r}}var Ce=e=>z(e)&&!st(e)?e:{value:e,message:""},zt=async(e,r,t,o,s)=>{let{ref:n,refs:u,required:c,maxLength:_,minLength:b,min:m,max:h,pattern:w,validate:K,name:M,valueAsNumber:N,mount:E,disabled:H}=e._f,F=d(r,M);if(!E||H)return{};let O=u?u[0]:n,oe=C=>{o&&O.reportValidity&&(O.setCustomValidity(se(C)?"":C||""),O.reportValidity())},y={},S=$t(n),v=Ue(n),V=S||v,ee=(N||qt(n))&&L(n.value)&&L(F)||it(n)&&n.value===""||F===""||Array.isArray(F)&&!F.length,j=$o.bind(null,M,t,y),We=(C,T,q,Z=pe.maxLength,ae=pe.minLength)=>{let ie=C?T:q;y[M]={type:C?Z:ae,message:ie,ref:n,...j(C?Z:ae,ie)}};if(s?!Array.isArray(F)||!F.length:c&&(!V&&(ee||R(F))||se(F)&&!F||v&&!ro(u).isValid||S&&!oo(u).isValid)){let{value:C,message:T}=rt(c)?{value:!!c,message:c}:Ce(c);if(C&&(y[M]={type:pe.required,message:T,ref:O,...j(pe.required,T)},!t))return oe(T),y}if(!ee&&(!R(m)||!R(h))){let C,T,q=Ce(h),Z=Ce(m);if(!R(F)&&!isNaN(F)){let ae=n.valueAsNumber||F&&+F;R(q.value)||(C=ae>q.value),R(Z.value)||(T=ae<Z.value)}else{let ae=n.valueAsDate||new Date(F),ie=De=>new Date(new Date().toDateString()+" "+De),Ee=n.type=="time",Te=n.type=="week";fe(q.value)&&F&&(C=Ee?ie(F)>ie(q.value):Te?F>q.value:ae>new Date(q.value)),fe(Z.value)&&F&&(T=Ee?ie(F)<ie(Z.value):Te?F<Z.value:ae<new Date(Z.value))}if((C||T)&&(We(!!C,q.message,Z.message,pe.max,pe.min),!t))return oe(y[M].message),y}if((_||b)&&!ee&&(fe(F)||s&&Array.isArray(F))){let C=Ce(_),T=Ce(b),q=!R(C.value)&&F.length>+C.value,Z=!R(T.value)&&F.length<+T.value;if((q||Z)&&(We(q,C.message,T.message),!t))return oe(y[M].message),y}if(w&&!ee&&fe(F)){let{value:C,message:T}=Ce(w);if(st(C)&&!F.match(C)&&(y[M]={type:pe.pattern,message:T,ref:n,...j(pe.pattern,T)},!t))return oe(T),y}if(K){if(_e(K)){let C=await K(F,r),T=jr(C,O);if(T&&(y[M]={...T,...j(pe.validate,T.message)},!t))return oe(T.message),y}else if(z(K)){let C={};for(let T in K){if(!Q(C)&&!t)break;let q=jr(await K[T](F,r),O,T);q&&(C={...q,...j(T,q.message)},oe(q.message),t&&(y[M]=C))}if(!Q(C)&&(y[M]={ref:O,...C},!t))return y}}return oe(!0),y},Et=(e,r)=>[...e,...te(r)],Tt=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Dt(e,r,t){return[...e.slice(0,r),...te(t),...e.slice(r)]}var Pt=(e,r,t)=>Array.isArray(e)?(L(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],Mt=(e,r)=>[...te(r),...te(e)];function Go(e,r){let t=0,o=[...e];for(let s of r)o.splice(s-t,1),t++;return Ne(o).length?o:[]}var Lt=(e,r)=>L(r)?[]:Go(e,te(r).sort((t,o)=>t-o)),Ot=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]};function Ko(e,r){let t=r.slice(0,-1).length,o=0;for(;o<t;)e=L(e)?o++:e[r[o++]];return e}function Xo(e){for(let r in e)if(e.hasOwnProperty(r)&&!L(e[r]))return!1;return!0}function W(e,r){let t=Array.isArray(r)?r:jt(r)?[r]:Jr(r),o=t.length===1?e:Ko(e,t),s=t.length-1,n=t[s];return o&&delete o[n],s!==0&&(z(o)&&Q(o)||Array.isArray(o)&&Xo(o))&&W(e,t.slice(0,-1)),e}var qr=(e,r,t)=>(e[r]=t,e);function rs(e){let r=lt(),{control:t=r.control,name:o,keyName:s="id",shouldUnregister:n}=e,[u,c]=A.default.useState(t._getFieldArray(o)),_=A.default.useRef(t._getFieldArray(o).map(Se)),b=A.default.useRef(u),m=A.default.useRef(o),h=A.default.useRef(!1);m.current=o,b.current=u,t._names.array.add(o),e.rules&&t.register(o,e.rules),ut({next:({values:y,name:S})=>{if(S===m.current||!S){let v=d(y,m.current);Array.isArray(v)&&(c(v),_.current=v.map(Se))}},subject:t._subjects.array});let w=A.default.useCallback(y=>{h.current=!0,t._updateFieldArray(o,y)},[t,o]),K=(y,S)=>{let v=te($(y)),V=Et(t._getFieldArray(o),v);t._names.focus=Vt(o,V.length-1,S),_.current=Et(_.current,v.map(Se)),w(V),c(V),t._updateFieldArray(o,V,Et,{argA:Tt(y)})},M=(y,S)=>{let v=te($(y)),V=Mt(t._getFieldArray(o),v);t._names.focus=Vt(o,0,S),_.current=Mt(_.current,v.map(Se)),w(V),c(V),t._updateFieldArray(o,V,Mt,{argA:Tt(y)})},N=y=>{let S=Lt(t._getFieldArray(o),y);_.current=Lt(_.current,y),w(S),c(S),t._updateFieldArray(o,S,Lt,{argA:y})},E=(y,S,v)=>{let V=te($(S)),ee=Dt(t._getFieldArray(o),y,V);t._names.focus=Vt(o,y,v),_.current=Dt(_.current,y,V.map(Se)),w(ee),c(ee),t._updateFieldArray(o,ee,Dt,{argA:y,argB:Tt(S)})},H=(y,S)=>{let v=t._getFieldArray(o);Ot(v,y,S),Ot(_.current,y,S),w(v),c(v),t._updateFieldArray(o,v,Ot,{argA:y,argB:S},!1)},F=(y,S)=>{let v=t._getFieldArray(o);Pt(v,y,S),Pt(_.current,y,S),w(v),c(v),t._updateFieldArray(o,v,Pt,{argA:y,argB:S},!1)},O=(y,S)=>{let v=$(S),V=qr(t._getFieldArray(o),y,v);_.current=[...V].map((ee,j)=>!ee||j===y?Se():_.current[j]),w(V),c([...V]),t._updateFieldArray(o,V,qr,{argA:y,argB:v},!0,!1)},oe=y=>{let S=te($(y));_.current=S.map(Se),w([...S]),c([...S]),t._updateFieldArray(o,[...S],v=>v,{},!0,!1)};return A.default.useEffect(()=>{if(t._state.action=!1,Wt(o,t._names)&&t._subjects.state.next({...t._formState}),h.current&&(!Be(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([o]).then(y=>{let S=d(y.errors,o),v=d(t._formState.errors,o);(v?!S&&v.type||S&&(v.type!==S.type||v.message!==S.message):S&&S.type)&&(S?P(t._formState.errors,o,S):W(t._formState.errors,o),t._subjects.state.next({errors:t._formState.errors}))});else{let y=d(t._fields,o);y&&y._f&&!(Be(t._options.reValidateMode).isOnSubmit&&Be(t._options.mode).isOnSubmit)&&zt(y,t._formValues,t._options.criteriaMode===ne.all,t._options.shouldUseNativeValidation,!0).then(S=>!Q(S)&&t._subjects.state.next({errors:to(t._formState.errors,S,o)}))}t._subjects.values.next({name:o,values:{...t._formValues}}),t._names.focus&&Ve(t._fields,(y,S)=>{if(t._names.focus&&S.startsWith(t._names.focus)&&y.focus)return y.focus(),1}),t._names.focus="",t._updateValid(),h.current=!1},[u,o,t]),A.default.useEffect(()=>(!d(t._formValues,o)&&t._updateFieldArray(o),()=>{(t._options.shouldUnregister||n)&&t.unregister(o)}),[o,t,s,n]),{swap:A.default.useCallback(H,[w,o,t]),move:A.default.useCallback(F,[w,o,t]),prepend:A.default.useCallback(M,[w,o,t]),append:A.default.useCallback(K,[w,o,t]),remove:A.default.useCallback(N,[w,o,t]),insert:A.default.useCallback(E,[w,o,t]),update:A.default.useCallback(O,[w,o,t]),replace:A.default.useCallback(oe,[w,o,t]),fields:A.default.useMemo(()=>u.map((y,S)=>({...y,[s]:_.current[S]||Se()})),[u,s])}}var Bt=()=>{let e=[];return{get observers(){return e},next:s=>{for(let n of e)n.next&&n.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(n=>n!==s)}}),unsubscribe:()=>{e=[]}}},nt=e=>R(e)||!Kr(e);function ve(e,r){if(nt(e)||nt(r))return e===r;if(Ie(e)&&Ie(r))return e.getTime()===r.getTime();let t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(let s of t){let n=e[s];if(!o.includes(s))return!1;if(s!=="ref"){let u=r[s];if(Ie(n)&&Ie(u)||z(n)&&z(u)||Array.isArray(n)&&Array.isArray(u)?!ve(n,u):n!==u)return!1}}return!0}var io=e=>e.type==="select-multiple",Yo=e=>$t(e)||Ue(e),Ut=e=>it(e)&&e.isConnected,so=e=>{for(let r in e)if(_e(e[r]))return!0;return!1};function at(e,r={}){let t=Array.isArray(e);if(z(e)||t)for(let o in e)Array.isArray(e[o])||z(e[o])&&!so(e[o])?(r[o]=Array.isArray(e[o])?[]:{},at(e[o],r[o])):R(e[o])||(r[o]=!0);return r}function no(e,r,t){let o=Array.isArray(e);if(z(e)||o)for(let s in e)Array.isArray(e[s])||z(e[s])&&!so(e[s])?L(r)||nt(t[s])?t[s]=Array.isArray(e[s])?at(e[s],[]):{...at(e[s])}:no(e[s],R(r)?{}:r[s],t[s]):t[s]=!ve(e[s],r[s]);return t}var tt=(e,r)=>no(e,r,at(r)),ao=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:o})=>L(e)?e:r?e===""?NaN:e&&+e:t&&fe(e)?new Date(e):o?o(e):e;function Nt(e){let r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return qt(r)?r.files:$t(r)?oo(e.refs).value:io(r)?[...r.selectedOptions].map(({value:t})=>t):Ue(r)?ro(e.refs).value:ao(L(r.value)?e.ref.value:r.value,e)}var Jo=(e,r,t,o)=>{let s={};for(let n of e){let u=d(r,n);u&&P(s,n,u._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:o}},Oe=e=>L(e)?e:st(e)?e.source:z(e)?st(e.value)?e.value.source:e.value:e,$r="AsyncFunction",Zo=e=>(!e||!e.validate)&&!!(_e(e.validate)&&e.validate.constructor.name===$r||z(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===$r)),Qo=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Gr(e,r,t){let o=d(e,t);if(o||jt(t))return{error:o,name:t};let s=t.split(".");for(;s.length;){let n=s.join("."),u=d(r,n),c=d(e,n);if(u&&!Array.isArray(u)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};s.pop()}return{name:t}}var Ro=(e,r,t,o,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(r||e):(t?o.isOnBlur:s.isOnBlur)?!e:(t?o.isOnChange:s.isOnChange)?e:!0,ei=(e,r)=>!Ne(d(e,r)).length&&W(e,r),ti={mode:ne.onSubmit,reValidateMode:ne.onChange,shouldFocusError:!0};function ri(e={}){let r={...ti,...e},t={submitCount:0,isDirty:!1,isLoading:_e(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},o={},s=z(r.defaultValues)||z(r.values)?$(r.defaultValues||r.values)||{}:{},n=r.shouldUnregister?{}:$(s),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,b=0,m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Bt(),array:Bt(),state:Bt()},w=Be(r.mode),K=Be(r.reValidateMode),M=r.criteriaMode===ne.all,N=i=>a=>{clearTimeout(b),b=setTimeout(i,a)},E=async i=>{if(m.isValid||i){let a=r.resolver?Q((await V()).errors):await j(o,!0);a!==t.isValid&&h.state.next({isValid:a})}},H=(i,a)=>{(m.isValidating||m.validatingFields)&&((i||Array.from(c.mount)).forEach(l=>{l&&(a?P(t.validatingFields,l,a):W(t.validatingFields,l))}),h.state.next({validatingFields:t.validatingFields,isValidating:!Q(t.validatingFields)}))},F=(i,a=[],l,g,p=!0,f=!0)=>{if(g&&l){if(u.action=!0,f&&Array.isArray(d(o,i))){let x=l(d(o,i),g.argA,g.argB);p&&P(o,i,x)}if(f&&Array.isArray(d(t.errors,i))){let x=l(d(t.errors,i),g.argA,g.argB);p&&P(t.errors,i,x),ei(t.errors,i)}if(m.touchedFields&&f&&Array.isArray(d(t.touchedFields,i))){let x=l(d(t.touchedFields,i),g.argA,g.argB);p&&P(t.touchedFields,i,x)}m.dirtyFields&&(t.dirtyFields=tt(s,n)),h.state.next({name:i,isDirty:C(i,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else P(n,i,a)},O=(i,a)=>{P(t.errors,i,a),h.state.next({errors:t.errors})},oe=i=>{t.errors=i,h.state.next({errors:t.errors,isValid:!1})},y=(i,a,l,g)=>{let p=d(o,i);if(p){let f=d(n,i,L(l)?d(s,i):l);L(f)||g&&g.defaultChecked||a?P(n,i,a?f:Nt(p._f)):Z(i,f),u.mount&&E()}},S=(i,a,l,g,p)=>{let f=!1,x=!1,D={name:i},X=!!(d(o,i)&&d(o,i)._f&&d(o,i)._f.disabled);if(!l||g){m.isDirty&&(x=t.isDirty,t.isDirty=D.isDirty=C(),f=x!==D.isDirty);let Y=X||ve(d(s,i),a);x=!!(!X&&d(t.dirtyFields,i)),Y||X?W(t.dirtyFields,i):P(t.dirtyFields,i,!0),D.dirtyFields=t.dirtyFields,f=f||m.dirtyFields&&x!==!Y}if(l){let Y=d(t.touchedFields,i);Y||(P(t.touchedFields,i,l),D.touchedFields=t.touchedFields,f=f||m.touchedFields&&Y!==l)}return f&&p&&h.state.next(D),f?D:{}},v=(i,a,l,g)=>{let p=d(t.errors,i),f=m.isValid&&se(a)&&t.isValid!==a;if(e.delayError&&l?(_=N(()=>O(i,l)),_(e.delayError)):(clearTimeout(b),_=null,l?P(t.errors,i,l):W(t.errors,i)),(l?!ve(p,l):p)||!Q(g)||f){let x={...g,...f&&se(a)?{isValid:a}:{},errors:t.errors,name:i};t={...t,...x},h.state.next(x)}},V=async i=>{H(i,!0);let a=await r.resolver(n,r.context,Jo(i||c.mount,o,r.criteriaMode,r.shouldUseNativeValidation));return H(i),a},ee=async i=>{let{errors:a}=await V(i);if(i)for(let l of i){let g=d(a,l);g?P(t.errors,l,g):W(t.errors,l)}else t.errors=a;return a},j=async(i,a,l={valid:!0})=>{for(let g in i){let p=i[g];if(p){let{_f:f,...x}=p;if(f){let D=c.array.has(f.name),X=p._f&&Zo(p._f);X&&m.validatingFields&&H([g],!0);let Y=await zt(p,n,M,r.shouldUseNativeValidation&&!a,D);if(X&&m.validatingFields&&H([g]),Y[f.name]&&(l.valid=!1,a))break;!a&&(d(Y,f.name)?D?to(t.errors,Y,f.name):P(t.errors,f.name,Y[f.name]):W(t.errors,f.name))}!Q(x)&&await j(x,a,l)}}return l.valid},We=()=>{for(let i of c.unMount){let a=d(o,i);a&&(a._f.refs?a._f.refs.every(l=>!Ut(l)):!Ut(a._f.ref))&&mt(i)}c.unMount=new Set},C=(i,a)=>(i&&a&&P(n,i,a),!ve(Gt(),s)),T=(i,a,l)=>eo(i,c,{...u.mount?n:L(a)?s:fe(i)?{[i]:a}:a},l,a),q=i=>Ne(d(u.mount?n:s,i,e.shouldUnregister?d(s,i,[]):[])),Z=(i,a,l={})=>{let g=d(o,i),p=a;if(g){let f=g._f;f&&(!f.disabled&&P(n,i,ao(a,f)),p=it(f.ref)&&R(a)?"":a,io(f.ref)?[...f.ref.options].forEach(x=>x.selected=p.includes(x.value)):f.refs?Ue(f.ref)?f.refs.length>1?f.refs.forEach(x=>(!x.defaultChecked||!x.disabled)&&(x.checked=Array.isArray(p)?!!p.find(D=>D===x.value):p===x.value)):f.refs[0]&&(f.refs[0].checked=!!p):f.refs.forEach(x=>x.checked=x.value===p):qt(f.ref)?f.ref.value="":(f.ref.value=p,f.ref.type||h.values.next({name:i,values:{...n}})))}(l.shouldDirty||l.shouldTouch)&&S(i,p,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&De(i)},ae=(i,a,l)=>{for(let g in a){let p=a[g],f=`${i}.${g}`,x=d(o,f);(c.array.has(i)||!nt(p)||x&&!x._f)&&!Ie(p)?ae(f,p,l):Z(f,p,l)}},ie=(i,a,l={})=>{let g=d(o,i),p=c.array.has(i),f=$(a);P(n,i,f),p?(h.array.next({name:i,values:{...n}}),(m.isDirty||m.dirtyFields)&&l.shouldDirty&&h.state.next({name:i,dirtyFields:tt(s,n),isDirty:C(i,f)})):g&&!g._f&&!R(f)?ae(i,f,l):Z(i,f,l),Wt(i,c)&&h.state.next({...t}),h.values.next({name:u.mount?i:void 0,values:{...n}})},Ee=async i=>{u.mount=!0;let a=i.target,l=a.name,g=!0,p=d(o,l),f=()=>a.type?Nt(p._f):Xr(i),x=D=>{g=Number.isNaN(D)||ve(D,d(n,l,D))};if(p){let D,X,Y=f(),be=i.type===ot.BLUR||i.type===ot.FOCUS_OUT,Ao=!Qo(p._f)&&!r.resolver&&!d(t.errors,l)&&!p._f.deps||Ro(be,d(t.touchedFields,l),t.isSubmitted,K,w),_t=Wt(l,c,be);P(n,l,Y),be?(p._f.onBlur&&p._f.onBlur(i),_&&_(0)):p._f.onChange&&p._f.onChange(i);let gt=S(l,Y,be,!1),Fo=!Q(gt)||_t;if(!be&&h.values.next({name:l,type:i.type,values:{...n}}),Ao)return m.isValid&&(e.mode==="onBlur"?be&&E():E()),Fo&&h.state.next({name:l,..._t?{}:gt});if(!be&&_t&&h.state.next({...t}),r.resolver){let{errors:er}=await V([l]);if(x(Y),g){let ko=Gr(t.errors,o,l),tr=Gr(er,o,ko.name||l);D=tr.error,l=tr.name,X=Q(er)}}else H([l],!0),D=(await zt(p,n,M,r.shouldUseNativeValidation))[l],H([l]),x(Y),g&&(D?X=!1:m.isValid&&(X=await j(o,!0)));g&&(p._f.deps&&De(p._f.deps),v(l,X,D,gt))}},Te=(i,a)=>{if(d(t.errors,a)&&i.focus)return i.focus(),1},De=async(i,a={})=>{let l,g,p=te(i);if(r.resolver){let f=await ee(L(i)?i:p);l=Q(f),g=i?!p.some(x=>d(f,x)):l}else i?(g=(await Promise.all(p.map(async f=>{let x=d(o,f);return await j(x&&x._f?{[f]:x}:x)}))).every(Boolean),!(!g&&!t.isValid)&&E()):g=l=await j(o);return h.state.next({...!fe(i)||m.isValid&&l!==t.isValid?{}:{name:i},...r.resolver||!i?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!g&&Ve(o,Te,i?p:c.mount),g},Gt=i=>{let a={...u.mount?n:s};return L(i)?a:fe(i)?d(a,i):i.map(l=>d(a,l))},Kt=(i,a)=>({invalid:!!d((a||t).errors,i),isDirty:!!d((a||t).dirtyFields,i),error:d((a||t).errors,i),isValidating:!!d(t.validatingFields,i),isTouched:!!d((a||t).touchedFields,i)}),xo=i=>{i&&te(i).forEach(a=>W(t.errors,a)),h.state.next({errors:i?t.errors:{}})},Xt=(i,a,l)=>{let g=(d(o,i,{_f:{}})._f||{}).ref,p=d(t.errors,i)||{},{ref:f,message:x,type:D,...X}=p;P(t.errors,i,{...X,...a,ref:g}),h.state.next({name:i,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},So=(i,a)=>_e(i)?h.values.subscribe({next:l=>i(T(void 0,a),l)}):T(i,a,!0),mt=(i,a={})=>{for(let l of i?te(i):c.mount)c.mount.delete(l),c.array.delete(l),a.keepValue||(W(o,l),W(n,l)),!a.keepError&&W(t.errors,l),!a.keepDirty&&W(t.dirtyFields,l),!a.keepTouched&&W(t.touchedFields,l),!a.keepIsValidating&&W(t.validatingFields,l),!r.shouldUnregister&&!a.keepDefaultValue&&W(s,l);h.values.next({values:{...n}}),h.state.next({...t,...a.keepDirty?{isDirty:C()}:{}}),!a.keepIsValid&&E()},Yt=({disabled:i,name:a,field:l,fields:g,value:p})=>{if(se(i)&&u.mount||i){let f=i?void 0:L(p)?Nt(l?l._f:d(g,a)._f):p;P(n,a,f),S(a,f,!1,!1,!0)}},pt=(i,a={})=>{let l=d(o,i),g=se(a.disabled)||se(e.disabled);return P(o,i,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:i}},name:i,mount:!0,...a}}),c.mount.add(i),l?Yt({field:l,disabled:se(a.disabled)?a.disabled:e.disabled,name:i,value:a.value}):y(i,!0,a.value),{...g?{disabled:a.disabled||e.disabled}:{},...r.progressive?{required:!!a.required,min:Oe(a.min),max:Oe(a.max),minLength:Oe(a.minLength),maxLength:Oe(a.maxLength),pattern:Oe(a.pattern)}:{},name:i,onChange:Ee,onBlur:Ee,ref:p=>{if(p){pt(i,a),l=d(o,i);let f=L(p.value)&&p.querySelectorAll&&p.querySelectorAll("input,select,textarea")[0]||p,x=Yo(f),D=l._f.refs||[];if(x?D.find(X=>X===f):f===l._f.ref)return;P(o,i,{_f:{...l._f,...x?{refs:[...D.filter(Ut),f,...Array.isArray(d(s,i))?[{}]:[]],ref:{type:f.type,name:i}}:{ref:f}}}),y(i,!1,void 0,f)}else l=d(o,i,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(Yr(c.array,i)&&u.action)&&c.unMount.add(i)}}},Jt=()=>r.shouldFocusError&&Ve(o,Te,c.mount),vo=i=>{se(i)&&(h.state.next({disabled:i}),Ve(o,(a,l)=>{let g=d(o,l);g&&(a.disabled=g._f.disabled||i,Array.isArray(g._f.refs)&&g._f.refs.forEach(p=>{p.disabled=g._f.disabled||i}))},0,!1))},Zt=(i,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let p=$(n);if(h.state.next({isSubmitting:!0}),r.resolver){let{errors:f,values:x}=await V();t.errors=f,p=x}else await j(o);if(W(t.errors,"root"),Q(t.errors)){h.state.next({errors:{}});try{await i(p,l)}catch(f){g=f}}else a&&await a({...t.errors},l),Jt(),setTimeout(Jt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},bo=(i,a={})=>{d(o,i)&&(L(a.defaultValue)?ie(i,$(d(s,i))):(ie(i,a.defaultValue),P(s,i,$(a.defaultValue))),a.keepTouched||W(t.touchedFields,i),a.keepDirty||(W(t.dirtyFields,i),t.isDirty=a.defaultValue?C(i,$(d(s,i))):C()),a.keepError||(W(t.errors,i),m.isValid&&E()),h.state.next({...t}))},Qt=(i,a={})=>{let l=i?$(i):s,g=$(l),p=Q(i),f=p?s:g;if(a.keepDefaultValues||(s=l),!a.keepValues){if(a.keepDirtyValues)for(let x of c.mount)d(t.dirtyFields,x)?P(f,x,d(n,x)):ie(x,d(f,x));else{if(Ht&&L(i))for(let x of c.mount){let D=d(o,x);if(D&&D._f){let X=Array.isArray(D._f.refs)?D._f.refs[0]:D._f.ref;if(it(X)){let Y=X.closest("form");if(Y){Y.reset();break}}}}o={}}n=e.shouldUnregister?a.keepDefaultValues?$(s):{}:$(f),h.array.next({values:{...f}}),h.values.next({values:{...f}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!e.shouldUnregister,h.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:p?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ve(i,s)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:p?{}:a.keepDirtyValues?a.keepDefaultValues&&n?tt(s,n):t.dirtyFields:a.keepDefaultValues&&i?tt(s,i):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Rt=(i,a)=>Qt(_e(i)?i(n):i,a);return{control:{register:pt,unregister:mt,getFieldState:Kt,handleSubmit:Zt,setError:Xt,_executeSchema:V,_getWatch:T,_getDirty:C,_updateValid:E,_removeUnmounted:We,_updateFieldArray:F,_updateDisabledField:Yt,_getFieldArray:q,_reset:Qt,_resetDefaultValues:()=>_e(r.defaultValues)&&r.defaultValues().then(i=>{Rt(i,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:i=>{t={...t,...i}},_disableForm:vo,_subjects:h,_proxyFormState:m,_setErrors:oe,get _fields(){return o},get _formValues(){return n},get _state(){return u},set _state(i){u=i},get _defaultValues(){return s},get _names(){return c},set _names(i){c=i},get _formState(){return t},set _formState(i){t=i},get _options(){return r},set _options(i){r={...r,...i}}},trigger:De,register:pt,handleSubmit:Zt,watch:So,setValue:ie,getValues:Gt,reset:Rt,resetField:bo,clearErrors:xo,unregister:mt,setError:Xt,setFocus:(i,a={})=>{let l=d(o,i),g=l&&l._f;if(g){let p=g.refs?g.refs[0]:g.ref;p.focus&&(p.focus(),a.shouldSelect&&p.select())}},getFieldState:Kt}}function ft(e={}){let r=A.default.useRef(),t=A.default.useRef(),[o,s]=A.default.useState({isDirty:!1,isValidating:!1,isLoading:_e(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:_e(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...ri(e),formState:o});let n=r.current.control;return n._options=e,ut({subject:n._subjects.state,next:u=>{Qr(u,n._proxyFormState,n._updateFormState,!0)&&s({...n._formState})}}),A.default.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),A.default.useEffect(()=>{if(n._proxyFormState.isDirty){let u=n._getDirty();u!==o.isDirty&&n._subjects.state.next({isDirty:u})}},[n,o.isDirty]),A.default.useEffect(()=>{e.values&&!ve(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,s(u=>({...u}))):n._resetDefaultValues()},[e.values,n]),A.default.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),A.default.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),A.default.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),r.current.formState=Zr(o,n),r.current}var oi=({onSubmit:e,form:r})=>{let{t}=ue(),{handleSubmit:o,control:s,formState:{isValid:n},setValue:u}=r,[c,_]=(0,G.useState)(""),[b,m]=(0,G.useState)(!1),[h,w]=(0,G.useState)(!1),{reStartOpenPopupTimer:K}=Ur("SURVEY_SIGN_UP_DROPPED"),M=async N=>{if(n){K(),_(""),m(!0);try{await $e(N.email)&&e&&e(N)}catch(E){_(`${E.message}`),e&&e(null)}m(!1)}};return(0,G.useEffect)(()=>{if(typeof window>"u")return;let N=new URLSearchParams(window.location.search),E=decodeURIComponent(N.get("email")||"");E&&St(E)&&!E.includes("+")&&(u("email",E,{shouldValidate:!0,shouldDirty:!0}),setTimeout(()=>{w(!0)},0))},[]),(0,G.useEffect)(()=>{h&&(w(!1),o(M)())},[h]),G.default.createElement(B,{spacing:3,component:"form",onSubmit:N=>{N.preventDefault(),o(M)()}},G.default.createElement(U,{fontSize:"22px",color:"text.primary",textAlign:"center",fontWeight:600},t("package__features:auth__email_sign_in__model__step1__title")),G.default.createElement(ct,{name:"email",control:s,rules:{required:!0,validate:{required:N=>St(N)&&!N.includes("+")||!1}},render:({field:{value:N,onChange:E},fieldState:H})=>{let F=H?.error?.message??"";return G.default.createElement(je,{error:!!F,value:N||"",type:"text",name:"email",disabled:b,onChange:({target:{value:O}})=>E(O.trim().toString().toLowerCase()),InputProps:{sx:{borderRadius:"8px",fontSize:20}},sx:{fontSize:20,".MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"},".MuiFormLabel-root.Mui-focused":{color:"primary.main"},[`& .${He.root}`]:{color:"text.tertiary",fontSize:20},[`& .${Ct.input}:-webkit-autofill`]:{WebkitBoxShadow:O=>`0 0 0 100px ${O.palette.background.paper} inset`,WebkitTextFillColor:"text.primary",caretColor:"text.primary"},[`& .${Ct.input}:-webkit-autofill:focus`]:{WebkitBoxShadow:O=>`0 0 0 100px ${O.palette.background.paper} inset`}},onKeyDown:()=>{c&&_("")},label:F||t("package__features:auth__email_sign_in__model__step1__input__email__placeholder"),fullWidth:!0})}}),c&&G.default.createElement(ce,{sx:{maxWidth:"100%",mt:1}},G.default.createElement(ze,{in:!!c,mountOnEnter:!0,unmountOnExit:!0},G.default.createElement(Me,{severity:"warning",icon:G.default.createElement(lo.default,null),sx:{wordWrap:"break-word",maxWidth:"100%"}},c.startsWith("pages:")?t(c):c))),G.default.createElement(B,{spacing:3},G.default.createElement(de,{loading:b,disabled:!n,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700,borderRadius:"8px"}},G.default.createElement("span",null,t("package__features:auth__email_sign_in__model__step1__button__continue")))))},uo=oi;var fo=J(co());var I=J(le()),ge=J(le());var Ae={gmail:"https://mail.google.com/mail/u/0/#search/MaxAI",yahoo:"https://mail.yahoo.com/d/search/keyword=MaxAI",outlook:"https://outlook.live.com/mail/0/",hotmail:"https://outlook.live.com/mail/0/",qq:"https://mail.qq.com/",mail163:"https://mail.163.com/",protonmail:"https://mail.protonmail.com/u/0/all-mail#keyword=MaxAI",icloud:"https://www.icloud.com/mail/"},ai=e=>{let{sx:r,email:t,onAuthSuccess:o}=e,{t:s}=ue(),[n,u]=(0,ge.useState)(""),[c,_]=(0,ge.useState)(""),[b,m]=(0,ge.useState)(!1),[h,w]=(0,ge.useState)(!1),{handleSubmit:K,control:M,formState:{isValid:N}}=ft({mode:"all",reValidateMode:"onChange"}),[E,{startCountdown:H,stopCountdown:F,resetCountdown:O}]=wr({countStart:60*3,intervalMs:1e3,isIncrement:!1});(0,ge.useEffect)(()=>{switch(!0){case/^[\w-\+\.]+@gmail\.com$/i.test(t):_(Ae.gmail);break;case/^[\w-\.]+@outlook\.com$/i.test(t):case/^[\w-\.]+@hotmail\.com$/i.test(t):_(Ae.outlook);break;case/^[\w-\.]+@yahoo\.com$/i.test(t):_(Ae.yahoo);break;case/^[\w-\.]+@qq\.com$/i.test(t):_(Ae.qq);break;case/^[\w-\.]+@163\.com$/i.test(t):_(Ae.mail163);break;case/^[\w-\.]+@(protonmail\.com)|(proton\.me)$/i.test(t):_(Ae.protonmail);break;case/^[\w-\.]+@icloud\.com$/i.test(t):_(Ae.icloud);break;default:break}},[t]),(0,ge.useEffect)(()=>{H()},[]),(0,ge.useEffect)(()=>{E===0&&(F(),w(!0))},[E]);let oe=async()=>{m(!0),w(!1),u("");try{await $e(t)&&(O(),H())}catch(v){u(`${v.message}`)}m(!1)},y=async v=>{if(N){u(""),m(!0);try{let V=await gr(t,v.verify_code);V&&(await xe.setAuthTokens({accessToken:V.access_token,refreshToken:V.refresh_token,userId:V.user_id,email:V.email}),o&&await o())}catch(V){u(V.message??"Invalid code. Check the code and try again.")}finally{setTimeout(()=>{m(!1)},0)}}},S=v=>v==="10119"?I.default.createElement(B,{spacing:.5},I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:500,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__title")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message1")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message2")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},I.default.createElement(ir,{i18nKey:"package__features:auth__sign_in__model__step2__error__block_registration__message3"},"If you believe this is an error or you need assistance, please contact our support team at",I.default.createElement(we,{href:or,underline:"hover",fontSize:"inherit",lineHeight:"inherit",color:"inherit"},rr),"."))):v;return I.default.createElement(B,{component:"form",onSubmit:v=>{v.preventDefault(),K(y)()},spacing:"24px",sx:{...r}},I.default.createElement(Le,{container:!0,rowSpacing:3,sx:{maxWidth:500}},I.default.createElement(Le,{item:!0,xs:12,sx:{paddingTop:"0!important"}},I.default.createElement(U,{fontSize:32,fontWeight:"500",gutterBottom:!0},s("package__features:auth__email_sign_in__model__step2__title")," "),I.default.createElement(U,{noWrap:!0,fontSize:32,color:"primary",fontWeight:"500"},t)),I.default.createElement(Le,{item:!0,xs:12},I.default.createElement(B,{mb:4,spacing:2},I.default.createElement(Me,{severity:"info",sx:{p:"8px 8px 0",bgcolor:v=>v.palette.mode==="light"?"rgb(229, 246, 253)":"#14162a",".MuiAlert-icon":{color:"#03a9f4"},[`& .${ur.icon}`]:{mr:"8px"}}},I.default.createElement(U,{color:"text.secondary",mt:"-6px",fontSize:14,lineHeight:1.25},s("package__features:auth__email_sign_in__model__step2__alert__part1")," ",I.default.createElement(kr,{TooltipPopperProps:{disablePortal:!0},text:"MaxAI",sx:{minWidth:""}},I.default.createElement(U,{fontWeight:"bold",component:"span",color:"text.primary",fontSize:14,lineHeight:1.25},"MaxAI"))," ",s("package__features:auth__email_sign_in__model__step2__alert__part2")),c&&I.default.createElement(we,{href:c,target:"_blank",onClick:()=>{he({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(cr,{size:"large",variant:"contained",disableElevation:!0,sx:{width:"100%",height:40,mt:1},endIcon:I.default.createElement(fo.default,{sx:{fontSize:"16px!important"}}),onClick:()=>{he({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(U,{fontSize:14},s("package__features:auth__email_sign_in__model__step2__alert__cta_button_label")))))),I.default.createElement(ct,{name:"verify_code",control:M,rules:{required:!0,minLength:6,maxLength:6},render:({field:{value:v,onChange:V},fieldState:ee})=>{let j=ee?.error?.message??"";return I.default.createElement(je,{error:!!j,value:v||"",type:"text",onChange:V,disabled:b,sx:{fontSize:20,[`& .${He.root}`]:{fontSize:20}},InputProps:{sx:{fontSize:20}},onKeyDown:()=>{if(h){u(s("package__features:auth__email_sign_in__model__step2__error__code_expired"));return}n&&u("")},label:j||s("package__features:auth__email_sign_in__model__step2__input_placeholder"),fullWidth:!0})}}),I.default.createElement(ce,{sx:{maxWidth:"100%",mt:1}},I.default.createElement(ze,{in:!!n,mountOnEnter:!0,unmountOnExit:!0},I.default.createElement(Me,{severity:"error",icon:!1,sx:{wordWrap:"break-word",maxWidth:"100%"}},S(n)))),I.default.createElement(ce,{display:"flex",flexDirection:"column",sx:{mt:2}},E>0?I.default.createElement(U,{variant:"body1"},s("package__features:auth__email_sign_in__model__step2__within",{COUNT:E})):I.default.createElement(ce,null,I.default.createElement(de,{loading:b,variant:"contained",disableElevation:!0,onClick:()=>oe()},s("package__features:auth__email_sign_in__model__step2__resend_verification_code"))))),I.default.createElement(Le,{item:!0,xs:12},I.default.createElement(ce,null,I.default.createElement(de,{onClick:()=>{he({eventName:"click",params:{email:t,page_path:location.pathname}})},loading:b,disabled:!N||h,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700}},I.default.createElement("span",null,s("package__features:auth__email_sign_in__cta_button_label")))))))},mo=ai;var Fe=J(le());var li=e=>{let{onAuthSuccess:r,outerBoxSx:t,innerBoxSx:o,step:s,setStep:n}=e,[u,c]=(0,Fe.useState)(""),_=ft({mode:"all",reValidateMode:"onChange"});return Fe.default.createElement(B,{sx:{padding:"24px",alignItems:"center",justifyContent:"center",mb:"40px",...t}},Fe.default.createElement(B,{width:"100%",maxWidth:420,padding:"24px",sx:{minHeight:250,...o}},s===0&&Fe.default.createElement(uo,{form:_,onSubmit:b=>{b?.email&&(c(b.email),n(1))}}),s===1&&Fe.default.createElement(mo,{email:u,onAuthSuccess:r})))},po=li;var ui=e=>{let{sx:r,showHeader:t=!1,autoLogin:o,showCloseButton:s=!0,onClose:n,isVerified:u,setIsVerified:c,onConnectSuccess:_,innerBoxSx:b}=e,{t:m}=ue(),[h,w]=(0,k.useState)(0),{syncUserInfo:K}=yr(),{syncSurveyStatus:M}=Ze(!1),{refreshModelUsage:N}=Ye();return k.default.createElement(B,{className:"auth-sign-in-card",justifyContent:"center",sx:{maxWidth:{xs:"90%",sm:"448px"},width:"100vw",margin:"0 auto",boxSizing:"border-box",boxShadow:"0px 2px 4px 0px #00000014",borderRadius:"16px",p:"2px",bgcolor:"background.paper",position:"relative",...r}},u&&k.default.createElement(ce,{sx:{position:"absolute",top:10,left:10}},k.default.createElement(wt,{"data-testid":"maxai-auth-sign-in-card-back-btn",onClick:()=>{h===0?c?.(!1):w(0)},sx:{width:"44px",height:"44px",color:E=>E.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},k.default.createElement(_o.default,null))),s&&k.default.createElement(ce,{sx:{position:"absolute",top:10,right:10}},k.default.createElement(wt,{"data-testid":"maxai-custom-modal-close-btn",onClick:()=>{n&&n()},sx:{width:"44px",height:"44px",color:E=>E.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},k.default.createElement(go.default,{sx:{fontSize:"26px"}}))),t&&k.default.createElement(ci,null),u?k.default.createElement(po,{step:h,setStep:w,outerBoxSx:{mb:0},innerBoxSx:{minHeight:"unset"},onAuthSuccess:async()=>{if(typeof window<"u"){let E=window.location,H=new URLSearchParams(E.search),F=!Pe&&H.get("opener")==="true",O=await xe.getAuthTokens();if(!O)return;await sr.syncUserTokens({userId:O.userId||"",clientUserId:O.clientUserId||await _r(),accessToken:O.accessToken,refreshToken:O.refreshToken,stopOpenSettingsPage:F}),await ye(async()=>{await K(!0),await xr.forceRefresh(),N(),M(void 0,!0)}),F&&window.close(),n?.()}}}):k.default.createElement(B,{p:"24px",spacing:"24px",sx:b},!t&&k.default.createElement(vr,{className:"auth-sign-in-card--logo",sx:{fontSize:"24px"}}),k.default.createElement(U,{fontSize:20,lineHeight:1.4,fontWeight:600,color:"text.primary",textAlign:"center",className:"auth-sign-in-card--title"},m("package__features:auth__sign_in__modal__title__part1")),k.default.createElement(Mr,{autoLogin:o}),k.default.createElement(fr,{sx:{color:E=>E.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",fontSize:"14px",marginTop:"12px",marginBottom:"-12px"}},"OR"),k.default.createElement(Pr,{onConnectSuccess:_,onClick:()=>{Pe||c?.(!0)}}),k.default.createElement(B,{direction:"row",justifyContent:"left"},k.default.createElement(U,{fontSize:{xs:12,lg:14},lineHeight:1.5,color:"text.tertiary"},m("package__features:auth__sign_in__modal__footer__part1")," ",k.default.createElement(we,{href:ht+"/terms/",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},m("package__features:auth__sign_in__modal__footer__help__terms_of_service"))," ",m("package__features:auth__sign_in__modal__footer__part2")," ",k.default.createElement(we,{href:ht+"/privacy/",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},m("package__features:auth__sign_in__modal__footer__help__privacy_policy")),k.default.createElement(dr,{PopperProps:{disablePortal:!0},title:k.default.createElement(U,{fontSize:14,lineHeight:1.5,textAlign:"left"},m("package__features:auth__sign_in__modal__footer__help__tooltip")),placement:"bottom",arrow:!0,sx:{ml:1}},k.default.createElement(yo.default,{sx:{fontSize:20,verticalAlign:"middle",ml:1,color:"text.tertiary"}}))))))},ci=()=>{let e="1M+",r="13K+",{t}=ue();return k.default.createElement(B,{p:3,pt:3,pb:2,spacing:2,justifyContent:"center",sx:{borderRadius:"16px 16px 0 0",background:o=>o.palette.mode==="dark"?"#FFFFFF0A":"#BA55F814"}},k.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:1},k.default.createElement(Sr,{sx:{fontSize:"28px"}}),k.default.createElement(U,{fontSize:"22px",fontWeight:700,color:"text.primary",textAlign:"center"},"MaxAI")),k.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"space-between",px:3,gap:{xs:1,sm:3},flexWrap:"wrap"},k.default.createElement(B,{justifyContent:"center",alignItems:"center",component:"a",href:"https://a16z.com/100-gen-ai-apps/",target:"_blank",sx:{textDecorationLine:"none",color:"text.secondary","&:hover":{color:"primary.main",cursor:"pointer",transition:"color 0.3s ease"}},spacing:.5},k.default.createElement(B,{direction:"row",alignItems:"center",spacing:.5},k.default.createElement(pr,{sx:{fontSize:20}}),k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},"2024")),k.default.createElement(U,{fontSize:12,color:"inherit"},t("package__features:auth__sign_in__model__header__indicator1_label"))),k.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},e),k.default.createElement(U,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator2_label"))),k.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},r),k.default.createElement(U,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator3_label")))))},ho=ui;var re=J(le());var fi=()=>{let e=Ir(),{open:r,closeAuthSignInCardModal:t,openAuthSignInCardModal:o}=Vr(),s=re.default.useRef(null),{isLogin:n}=qe(),u=(0,re.useRef)(!1);(0,re.useEffect)(()=>{Cr(async()=>{u.current=!0,o()});let m=h=>{if(h.data?.event==="MAX_AI__AUTH_SIGN_IN_CARD_MODAL"&&h.data?.appName===xt){let{action:w="show"}=h.data;if(w==="close"){t();return}w==="show"&&o()}};return window.addEventListener("message",m),()=>{window.removeEventListener("message",m)}},[]);let c=()=>{t()},[_,b]=(0,re.useState)(!1);return(0,re.useEffect)(()=>{b(!1),n&&r&&c(),r||u.current&&(window.postMessage({event:"MAX_AI_CONNECT_ACCOUNT",type:"COMPLETE"}),u.current=!1)},[n,r]),re.default.createElement(ar,{container:e,open:r,onClose:m=>{m.stopPropagation(),m.preventDefault(),c()},sx:{position:"fixed",zIndex:2147483622},slotProps:{root:{onClick:m=>{m.stopPropagation()}},backdrop:{sx:{position:"fixed"}}}},re.default.createElement(nr,{in:r},re.default.createElement(lr,{component:"div",ref:s,translate:"no"},re.default.createElement(B,{component:"div","data-testid":"maxai--auth--sign-in-card-modal",height:"100%",justifyContent:"center",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",my:0,bgcolor:"transparent",boxShadow:"none",overflow:"hidden",height:"auto"},onMouseDown:m=>{m.stopPropagation()},onClick:m=>{m.stopPropagation()}},re.default.createElement(ho,{isVerified:_,setIsVerified:b,onClose:c,sx:{p:1,pt:3,borderRadius:1}})))))};var Vn=fi;export{Er as a,Tr as b,Ze as c,ct as d,rs as e,ft as f,ho as g,Vn as h};
