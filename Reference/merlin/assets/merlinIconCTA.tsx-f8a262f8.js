import{r as u,b as ce,L as B,j as l,A as pe,k as ae,l as F,m as Z}from"./localStorage-70c0cae5.js";import{a as ue}from"./client-4954293f.js";import{b as de,r as ee,Q as le,e as te,q as he,a as fe}from"./browserPolyfillWrapper-bb116cae.js";import{C as ge,R as me}from"./reactQueryProviderExtension-4a0c189d.js";import{T as ve,a as be,b as ye,c as xe}from"./tooltip-d01590d2.js";import{M as Se}from"./select-456431be.js";import{T as we}from"./themeContext-5e650432.js";import{D as Ee,R as ze,s as L}from"./chatIframe-a17298e1.js";import{S as Ce}from"./merlin-logo-4543e454.js";import{c as U,B as I}from"./button-274f6d28.js";import{f as W}from"./analytics-910dabef.js";import{b as Te,s as Pe,c as Me,e as Re,m as Ae}from"./index-eedd1636.js";import{u as He}from"./useTranslation-24cdda08.js";import{A as ke}from"./useSSE-f967edd7.js";import{m as _e,I as Ne}from"./motion-6c2f4b83.js";import{c as $}from"./createReactComponent-640fc4e6.js";import{a as De,b as Ie}from"./helper-0e21f9fb.js";import{c as je}from"./index-82b528a6.js";import"./persist-4b6dccac.js";import"./index-6e4841df.js";import"./index-82f4bfa1.js";import"./IconCheck-e595c264.js";import"./index-e4326246.js";/* empty css             */import"./i18n-bc409d68.js";import"./index-f3a3d194.js";import"./webAccess-4d0d2b1d.js";import"./backend-0efbfbef.js";import"./debounce-c70d88e0.js";import"./utils-9bb6629d.js";import"./types-ad7f11a6.js";import"./accordion-25b76479.js";import"./IconArrowUpRight-b5286921.js";import"./IconLoader-280e82e6.js";import"./IconArrowLeft-27560546.js";var We=$("blockquote","IconBlockquote",[["path",{d:"M6 15h15",key:"svg-0"}],["path",{d:"M21 19h-15",key:"svg-1"}],["path",{d:"M15 11h6",key:"svg-2"}],["path",{d:"M21 7h-6",key:"svg-3"}],["path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-4"}],["path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-5"}]]),Fe=$("bulb","IconBulb",[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]]),Le=$("rocket","IconRocket",[["path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3",key:"svg-0"}],["path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3",key:"svg-1"}],["path",{d:"M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Oe=$("world-www","IconWorldWww",[["path",{d:"M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4",key:"svg-0"}],["path",{d:"M11.5 3a16.989 16.989 0 0 0 -1.826 4",key:"svg-1"}],["path",{d:"M12.5 3a16.989 16.989 0 0 1 1.828 4",key:"svg-2"}],["path",{d:"M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4",key:"svg-3"}],["path",{d:"M11.5 21a16.989 16.989 0 0 1 -1.826 -4",key:"svg-4"}],["path",{d:"M12.5 21a16.989 16.989 0 0 0 1.828 -4",key:"svg-5"}],["path",{d:"M2 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-6"}],["path",{d:"M17 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-7"}],["path",{d:"M9.5 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-8"}]]);let G=!1,V=0;function K(){G=!0,setTimeout(()=>{G=!1},50)}function oe(i){i.pointerType==="touch"&&K()}function Be(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",oe):document.addEventListener("touchend",K),V++,()=>{V--,!(V>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",oe):document.removeEventListener("touchend",K))}}function Ue(i){let{onHoverStart:n,onHoverChange:t,onHoverEnd:e,isDisabled:o}=i,[r,s]=u.useState(!1),a=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(Be,[]);let{hoverProps:g,triggerHoverEnd:f}=u.useMemo(()=>{let x=(c,m)=>{if(a.pointerType=m,o||m==="touch"||a.isHovered||!c.currentTarget.contains(c.target))return;a.isHovered=!0;let S=c.currentTarget;a.target=S,n&&n({type:"hoverstart",target:S,pointerType:m}),t&&t(!0),s(!0)},v=(c,m)=>{if(a.pointerType="",a.target=null,m==="touch"||!a.isHovered)return;a.isHovered=!1;let S=c.currentTarget;e&&e({type:"hoverend",target:S,pointerType:m}),t&&t(!1),s(!1)},d={};return typeof PointerEvent<"u"?(d.onPointerEnter=c=>{G&&c.pointerType==="mouse"||x(c,c.pointerType)},d.onPointerLeave=c=>{!o&&c.currentTarget.contains(c.target)&&v(c,c.pointerType)}):(d.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},d.onMouseEnter=c=>{!a.ignoreEmulatedMouseEvents&&!G&&x(c,"mouse"),a.ignoreEmulatedMouseEvents=!1},d.onMouseLeave=c=>{!o&&c.currentTarget.contains(c.target)&&v(c,"mouse")}),{hoverProps:d,triggerHoverEnd:v}},[n,t,e,o,a]);return u.useEffect(()=>{o&&f({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:g,isHovered:r}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var J=function(i,n){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},J(i,n)};function Ge(i,n){J(i,n);function t(){this.constructor=i}i.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var b=function(){return b=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b.apply(this,arguments)};function $e(i,n){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&n.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(i);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(i,e[o])&&(t[e[o]]=i[e[o]]);return t}var qe={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Xe=function(i){return{bottom:i,bottomLeft:i,bottomRight:i,left:i,right:i,top:i,topLeft:i,topRight:i}},Qe=function(i){Ge(n,i);function n(t){var e=i.call(this,t)||this;return e.resizingPosition={x:0,y:0},e.offsetFromParent={left:0,top:0},e.resizableElement={current:null},e.originalPosition={x:0,y:0},e.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},e.onResizeStart=e.onResizeStart.bind(e),e.onResize=e.onResize.bind(e),e.onResizeStop=e.onResizeStop.bind(e),e.onDragStart=e.onDragStart.bind(e),e.onDrag=e.onDrag.bind(e),e.onDragStop=e.onDragStop.bind(e),e.getMaxSizesFromProps=e.getMaxSizesFromProps.bind(e),e}return n.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,e=t.left,o=t.top,r=this.getDraggablePosition(),s=r.x,a=r.y;this.draggable.setState({x:s-e,y:a-o}),this.forceUpdate()},n.prototype.getDraggablePosition=function(){var t=this.draggable.state,e=t.x,o=t.y;return{x:e,y:o}},n.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},n.prototype.getParentSize=function(){return this.resizable.getParentSize()},n.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,e=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:e}},n.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},n.prototype.getOffsetHeight=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return t.offsetHeight}},n.prototype.getOffsetWidth=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return t.offsetWidth}},n.prototype.onDragStart=function(t,e){this.props.onDragStart&&this.props.onDragStart(t,e);var o=this.getDraggablePosition();if(this.originalPosition=o,!!this.props.bounds){var r=this.getParent(),s=this.props.scale,a;if(this.props.bounds==="parent")a=r;else if(this.props.bounds==="body"){var g=r.getBoundingClientRect(),f=g.left,x=g.top,v=document.body.getBoundingClientRect(),d=-(f-r.offsetLeft*s-v.left)/s,c=-(x-r.offsetTop*s-v.top)/s,m=(document.body.offsetWidth-this.resizable.size.width*s)/s+d,S=(document.body.offsetHeight-this.resizable.size.height*s)/s+c;return this.setState({bounds:{top:c,right:m,bottom:S,left:d}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var z=r.getBoundingClientRect(),k=z.left,_=z.top,w=-(k-r.offsetLeft*s)/s,R=-(_-r.offsetTop*s)/s,m=(window.innerWidth-this.resizable.size.width*s)/s+w,S=(window.innerHeight-this.resizable.size.height*s)/s+R;return this.setState({bounds:{top:R,right:m,bottom:S,left:w}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(r instanceof HTMLElement))){var A=a.getBoundingClientRect(),C=A.left,T=A.top,P=r.getBoundingClientRect(),N=P.left,M=P.top,D=(C-N)/s,y=T-M;if(this.resizable){this.updateOffsetFromParent();var H=this.offsetFromParent;this.setState({bounds:{top:y-H.top,right:D+(a.offsetWidth-this.resizable.size.width)-H.left/s,bottom:y+(a.offsetHeight-this.resizable.size.height)-H.top,left:D-H.left/s}})}}}},n.prototype.onDrag=function(t,e){if(this.props.onDrag){var o=this.offsetFromParent,r=o.left,s=o.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,b(b({},e),{x:e.x+r,y:e.y+s}));if(this.props.dragAxis==="x")return this.props.onDrag(t,b(b({},e),{x:e.x+r,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,b(b({},e),{x:this.originalPosition.x+r,y:e.y+s,deltaX:0}))}},n.prototype.onDragStop=function(t,e){if(this.props.onDragStop){var o=this.offsetFromParent,r=o.left,s=o.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,b(b({},e),{x:e.x+r,y:e.y+s}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,b(b({},e),{x:e.x+r,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,b(b({},e),{x:this.originalPosition.x+r,y:e.y+s,deltaX:0}))}},n.prototype.onResizeStart=function(t,e,o){t.stopPropagation(),this.setState({resizing:!0});var r=this.props.scale,s=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+s.left,y:a.y+s.top},this.originalPosition=a,this.props.bounds){var g=this.getParent(),f=void 0;this.props.bounds==="parent"?f=g:this.props.bounds==="body"?f=document.body:this.props.bounds==="window"?f=window:typeof this.props.bounds=="string"?f=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(f=this.props.bounds);var x=this.getSelfElement();if(x instanceof Element&&(f instanceof HTMLElement||f===window)&&g instanceof HTMLElement){var v=this.getMaxSizesFromProps(),d=v.maxWidth,c=v.maxHeight,m=this.getParentSize();if(d&&typeof d=="string")if(d.endsWith("%")){var S=Number(d.replace("%",""))/100;d=m.width*S}else d.endsWith("px")&&(d=Number(d.replace("px","")));if(c&&typeof c=="string")if(c.endsWith("%")){var S=Number(c.replace("%",""))/100;c=m.height*S}else c.endsWith("px")&&(c=Number(c.replace("px","")));var z=x.getBoundingClientRect(),k=z.left,_=z.top,w=this.props.bounds==="window"?{left:0,top:0}:f.getBoundingClientRect(),R=w.left,A=w.top,C=this.getOffsetWidth(f),T=this.getOffsetHeight(f),P=e.toLowerCase().endsWith("left"),N=e.toLowerCase().endsWith("right"),M=e.startsWith("top"),D=e.startsWith("bottom");if((P||M)&&this.resizable){var y=(k-R)/r+this.resizable.size.width;this.setState({maxWidth:y>Number(d)?d:y})}if(N||this.props.lockAspectRatio&&!P&&!M){var y=C+(R-k)/r;this.setState({maxWidth:y>Number(d)?d:y})}if((M||P)&&this.resizable){var y=(_-A)/r+this.resizable.size.height;this.setState({maxHeight:y>Number(c)?c:y})}if(D||this.props.lockAspectRatio&&!M&&!P){var y=T+(A-_)/r;this.setState({maxHeight:y>Number(c)?c:y})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,e,o)},n.prototype.onResize=function(t,e,o,r){var s=this,a={x:this.originalPosition.x,y:this.originalPosition.y},g=-r.width,f=-r.height,x=["top","left","topLeft","bottomLeft","topRight"];x.includes(e)&&(e==="bottomLeft"?a.x+=g:(e==="topRight"||(a.x+=g),a.y+=f));var v=this.draggable.state;(a.x!==v.x||a.y!==v.y)&&ce.flushSync(function(){s.draggable.setState(a)}),this.updateOffsetFromParent();var d=this.offsetFromParent,c=this.getDraggablePosition().x+d.left,m=this.getDraggablePosition().y+d.top;this.resizingPosition={x:c,y:m},this.props.onResize&&this.props.onResize(t,e,o,r,{x:c,y:m})},n.prototype.onResizeStop=function(t,e,o,r){this.setState({resizing:!1});var s=this.getMaxSizesFromProps(),a=s.maxWidth,g=s.maxHeight;this.setState({maxWidth:a,maxHeight:g}),this.props.onResizeStop&&this.props.onResizeStop(t,e,o,r,this.resizingPosition)},n.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},n.prototype.updatePosition=function(t){this.draggable.setState(t)},n.prototype.updateOffsetFromParent=function(){var t=this.props.scale,e=this.getParent(),o=this.getSelfElement();if(!e||o===null)return{top:0,left:0};var r=e.getBoundingClientRect(),s=r.left,a=r.top,g=o.getBoundingClientRect(),f=this.getDraggablePosition(),x=e.scrollLeft,v=e.scrollTop;this.offsetFromParent={left:g.left-s+x-f.x*t,top:g.top-a+v-f.y*t}},n.prototype.render=function(){var t=this,e=this.props,o=e.disableDragging,r=e.style,s=e.dragHandleClassName,a=e.position,g=e.onMouseDown,f=e.onMouseUp,x=e.dragAxis,v=e.dragGrid,d=e.bounds,c=e.enableUserSelectHack,m=e.cancel,S=e.children;e.onResizeStart,e.onResize,e.onResizeStop,e.onDragStart,e.onDrag,e.onDragStop;var z=e.resizeHandleStyles,k=e.resizeHandleClasses,_=e.resizeHandleComponent,w=e.enableResizing,R=e.resizeGrid,A=e.resizeHandleWrapperClass,C=e.resizeHandleWrapperStyle,T=e.scale,P=e.allowAnyClick,N=$e(e,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),M=this.props.default?b({},this.props.default):void 0;delete N.default;var D=o||s?{cursor:"auto"}:{cursor:"move"},y=b(b(b({},qe),D),r),H=this.offsetFromParent,q=H.left,X=H.top,O;a&&(O={x:a.x-q,y:a.y-X});var Q=this.state.resizing?void 0:O,p=this.state.resizing?"both":x;return u.createElement(Ee,{ref:function(h){h&&(t.draggable=h)},handle:s?".".concat(s):void 0,defaultPosition:M,onMouseDown:g,onMouseUp:f,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:p,disabled:o,grid:v,bounds:d?this.state.bounds:void 0,position:Q,enableUserSelectHack:c,cancel:m,scale:T,allowAnyClick:P,nodeRef:this.resizableElement},u.createElement(ze,b({},N,{ref:function(h){h&&(t.resizable=h,t.resizableElement.current=h.resizable)},defaultSize:M,size:this.props.size,enable:typeof w=="boolean"?Xe(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:y,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:R,handleWrapperClass:A,handleWrapperStyle:C,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:z,handleClasses:k,handleComponent:_,scale:this.props.scale}),S))},n.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},n}(u.PureComponent);const re=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],se=["blur","focus"],Ye=i=>{const[n,t]=u.useState(!1),e=u.useRef(null),o=u.useCallback(()=>{e.current=window.setTimeout(s,i)},[i]),r=u.useCallback(()=>{e.current&&window.clearTimeout(e.current),a()},[]),s=u.useCallback(()=>{t(!0)},[]),a=u.useCallback(()=>{t(!1),o()},[o]),g=u.useCallback((f,x,v)=>{x.forEach(d=>f[`${v}EventListener`](d,r))},[r]);return u.useEffect(()=>(g(document,re,"add"),g(window,se,"add"),()=>{g(document,re,"remove"),g(window,se,"remove"),e.current&&window.clearTimeout(e.current)}),[]),n},ne=Math.ceil(window.innerHeight/4)*3;function j({children:i,content:n,...t}){return l.jsxs(ve,{children:[l.jsx(be,{asChild:!0,children:i}),l.jsx(ye,{align:"center",side:"left",sideOffset:10,...t,className:"text-sm",children:n})]})}function Ve(){const{t:i}=He(),n=u.useRef(null),t=de(),[e,o]=u.useState(!0),[r,s]=u.useState(!1),[a,g]=u.useState({x:0,y:ne}),[f,x]=u.useState(""),[v,d]=u.useState(!1),[c,m]=u.useState(""),[S,z]=u.useState(!1),[k,_]=u.useState(!0),[w,R]=u.useState(0),{hoverProps:A,isHovered:C}=Ue({onHoverStart:p=>z(!1)});u.useEffect(()=>{(async()=>{try{const p=parseInt(await B.get("showNewCTAs")||0);R(h=>p+h)}catch{}})()},[]);const T=u.useRef(w);u.useEffect(()=>{T.current=w},[w]),u.useEffect(()=>{let p=null;const h=()=>{p&&clearTimeout(p);const E=window.getSelection();if(E&&E.rangeCount>0){const Y=E.toString();m(Y),z(!0),p=setTimeout(()=>{z(!1)},5e3)}else m(""),T.current<=2&&B.set("showNewCTAs",T.current+1).then(()=>{R(Y=>1+Y),T.current=T.current+1}),z(!1)};return document.addEventListener("selectionchange",h),()=>{document.removeEventListener("selectionchange",h),p&&clearTimeout(p)}},[]),u.useEffect(()=>{ee(te.GET_SHORTCUT).then(p=>x(p.shortcut)).catch(p=>{})},[]),u.useEffect(()=>{(async()=>{const p=await t.fetchQuery(le.MerlinConfig);if(p.misc.merlinCTA&&!p.misc.merlinCTA.isVisible){_(!1);return}})()},[]);const P=Ye(1e4);u.useEffect(()=>{},[P,r]),u.useEffect(()=>{(async()=>{const p=await B.get("userPrefferedPositionMerlinIconCTA");p&&p.y?g({x:0,y:p.y}):g({x:0,y:ne})})()},[]),u.useEffect(()=>{Te(p=>{p.whiteList.filter(h=>h===location).length===0?o(!0):o(!1),p.isRemoved&&o(!1)})},[]),u.useEffect(()=>{const p=()=>{const h=window.fullScreen||window.innerHeight===screen.height;d(h)};return window.addEventListener("resize",p),p(),()=>window.removeEventListener("resize",p)},[]);function N(){ee(te.TOGGLE_CHAT_GUI,{trigger:"merlin_icon",value:!0})}function M(){W({eventName:"CloseMerlinIconCTA",eventType:"Button",feature:"MerlinIcon",firedFromFile:"src/features/merlinIconCTA"}),s(!0),Me(ae.SELECT_CONTEXT_BTN)}function D(){W({eventName:"ChatWithWebsiteFromMerlinCTA",eventType:"Button",feature:"WebpageChat",firedFromFile:"components/merlinIconCTA"}),L(()=>{window.parent.postMessage({data:{action:"WEB_CHAT",query:""},type:F.MERLIN_CTA},"*")})}function y(){W({eventName:"SummariseWebsiteFromMerlinCTA",eventType:"Button",feature:"BlogSummarizer",firedFromFile:"components/merlinIconCTA"}),L(()=>{window.parent.postMessage({data:{action:"WEB_CHAT",query:"Summarise & Provide Key Points"},type:F.MERLIN_CTA},"*")})}const H=()=>{const p=navigator?navigator.language:"en-US";let h=p.split("-")[0];h==="zh"&&(h=p);let E="english";Z[h??"en"]&&(E=Z[h??"en"]),W({eventName:"TranslateSelectedFromMerlinCTA",eventType:"Button",feature:"MerlinChatGUI",firedFromFile:"components/merlinIconCTA"}),L(()=>{window.parent.postMessage({data:{action:"SEND_QUERY",context:c,query:`translate this text to ${E} but make sure it makes sense in ${E} and is grammatically correct.`},type:F.MERLIN_CTA},"*")})},q=()=>{W({eventName:"ExplainSelectedFromMerlinCTA",eventType:"Button",feature:"MerlinChatGUI",firedFromFile:"components/merlinIconCTA"}),L(()=>{window.parent.postMessage({data:{action:"SEND_QUERY",context:c,query:"Explain this text to me with more context and use simple english"},type:F.MERLIN_CTA},"*")})},X=()=>{W({eventName:"PerformLiveSearchFromMerlinCTA",eventType:"Button",feature:"WebAccess",firedFromFile:"components/merlinIconCTA"}),L(()=>{window.parent.postMessage({data:{action:"WEB_ACCESS",context:c,query:"what's new with this?"},type:F.MERLIN_CTA},"*")})},[O,Q]=u.useState(78);return u.useLayoutEffect(()=>{var h;const p=(h=n.current)==null?void 0:h.getBoundingClientRect().width;Q(p||40)},[f]),l.jsx(ke,{children:!r&&e&&!v&&l.jsx(_e.div,{animate:{opacity:1},className:"relative print:hidden",exit:{opacity:0},initial:{opacity:0},children:l.jsx(Qe,{bounds:"window",className:"group/outerdiv",dragAxis:"y",dragHandleClassName:"dragHandle",enableResizing:!1,onDragStart:p=>p.preventDefault(),onDragStop:(p,h)=>{let E=null;h.y>window.innerHeight-40?E={x:0,y:window.innerHeight-40}:h.y<30?E={x:0,y:10}:E={x:0,y:h.y},g(E),a.y===h.y?N():B.set("userPrefferedPositionMerlinIconCTA",E)},position:a,children:l.jsxs("div",{className:U("absolute -bottom-20 left-0 flex w-10 flex-col items-end justify-end gap-3",C?"opacity-100 [transition:transform_150ms_100ms_ease-out,opacity_200ms_100ms]":"opacity-40 [transition:transform_350ms_600ms_ease,opacity_200ms_300ms]"),...A,style:{transform:C?"translateX(-40px)":`translateX(${O-80}px)`},children:[l.jsx("div",{className:U("grid rounded-md shadow backdrop-blur",C?"bg-background [transition:background-color_150ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),children:c?l.jsxs(l.Fragment,{children:[l.jsx(j,{content:i("merlin_cta.live_search"),children:l.jsx(I,{onClick:X,size:"icon",variant:"ghost",children:l.jsx(Le,{className:"text-foreground"})})}),l.jsx(j,{content:i("merlin_cta.translate"),children:l.jsx(I,{onClick:H,size:"icon",variant:"ghost",children:l.jsx(De,{className:"text-foreground"})})}),l.jsx(j,{content:i("merlin_cta.explain"),children:l.jsx(I,{onClick:q,size:"icon",variant:"ghost",children:l.jsx(Fe,{className:"text-foreground"})})})]}):l.jsxs(l.Fragment,{children:[l.jsx(j,{content:i("merlin_cta.summ"),children:l.jsx(I,{onClick:y,size:"icon",variant:"ghost",children:l.jsx(We,{className:"text-foreground"})})}),l.jsx(j,{content:i("merlin_cta.ask"),children:l.jsx(I,{onClick:D,size:"icon",variant:"ghost",children:l.jsx(Oe,{className:"text-foreground"})})})]})}),l.jsx(j,{content:"Open Merlin",children:l.jsxs("div",{className:U("center-with-flex group/primaryCTA dragHandle relative z-10 cursor-pointer select-none gap-2 whitespace-nowrap rounded-s-md p-2 text-foreground shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",C?"bg-background [transition:background-color_200ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),ref:n,children:[l.jsx(Ce,{className:"h-6 w-6"}),k&&c&&S&&l.jsx("div",{className:"absolute -bottom-1 -left-1 z-10 border-opacity-100 bg-opacity-100 opacity-100 group-hover/outerdiv:opacity-0",children:l.jsxs("span",{className:"relative flex h-2 w-2",children:[l.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-sky-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-sky-500 bg-opacity-100 opacity-100 transition-none before:opacity-100"})]})}),l.jsx("span",{className:"tracking-wider",children:f||"Shortcut Not Set"}),l.jsx(I,{className:"absolute -left-4 -top-4 z-20 h-6 w-6 rounded-full p-1 opacity-0 transition-opacity duration-200 group-hover/primaryCTA:opacity-100",onMouseDown:p=>p.stopPropagation(),onMouseUp:p=>{M(),p.stopPropagation()},size:"icon",variant:"outline",children:l.jsx(Ne,{className:"text-foreground"})})]})}),l.jsx("div",{className:U("grid rounded-md shadow backdrop-blur",C?"bg-background [transition:background-color_150ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),children:l.jsx(j,{content:"Settings",children:l.jsx(I,{onClick:()=>Pe({action:pe.OPEN_OPTIONS_PAGE}),size:"icon",variant:"ghost",children:l.jsx(Ie,{className:"text-foreground"})})})})]})})})})}const Ke=async()=>{if(document.getElementById("merlin-context-btn")||document.location.href.includes("docs.google.com/spreadsheets"))return;const i=await he.fetchQuery(le.MerlinConfig);if(i&&!i.misc.selectContextBtn.visible||i&&i.misc.selectContextBtn.blackListedDomains.includes(window.location.hostname)||await Re(ae.SELECT_CONTEXT_BTN))return;const t=document.createElement("merlin-component");t.id="merlin-context-btn",t.className="merlin context-btn";const e=t.attachShadow({mode:"open"}),o=document.createElement("style");o.textContent=`${je}
    :host(#merlin-context-btn) {
    }
    .reactAppRoot {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: fixed;
      top: 0;
      right: 0;
      z-index: 2147483600;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    `;const r=document.createElement("div");r.id="reactAppRoot",r.className="reactAppRoot",e.appendChild(o),e.appendChild(r),Ae(t);const s=ue(r);s.render(l.jsx(ie,{})),Je(()=>{s.render(l.jsx(ie,{}))})},Je=i=>{let n="";const t=new MutationObserver(o=>{location.href!==n&&(n=location.href,i())}),e={childList:!0,subtree:!0};t.observe(document.body,e)};function ie(){var n,t;return(t=(n=fe().details)==null?void 0:n.merlinIconCTA)!=null&&t.isEnabled?l.jsx(ge,{children:l.jsx(me,{children:l.jsx(Se,{children:l.jsx(we,{children:l.jsx(xe,{delayDuration:100,children:l.jsx(Ve,{})})})})})}):null}Ke();
