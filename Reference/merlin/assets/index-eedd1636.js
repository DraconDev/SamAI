import{M as h,L as u,P as g}from"./localStorage-70c0cae5.js";import{F as m,e as w,q as p,Q as S,B as f}from"./browserPolyfillWrapper-bb116cae.js";const b=(e,t)=>{const o=t.replace(/^"(.*)"$/,"$1"),n=e.textContent||"",r=n.includes("**")||n.includes("__");let s=o;if(r&&(s=`**${o}**`),e.hasAttribute("contenteditable")){e instanceof HTMLElement&&e.focus();const c=window.getSelection(),i=document.createRange();i.selectNodeContents(e),i.collapse(!1),c==null||c.removeAllRanges(),c==null||c.addRange(i),document.execCommand("insertText",!1,s);return}const a=new DataTransfer;a.setData("text/plain",s),e.dispatchEvent(new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:a})),a.clearData()};function d(e){let t="";return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement?t=e.value:t=e.textContent,t.trim()}function D(e,t){var a,c,i;const o=d(e);let n=null;try{if(e instanceof HTMLTextAreaElement){if(n=(a=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))==null?void 0:a.set,!n){e.value+=t;return}}else e instanceof HTMLInputElement?n=(c=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:c.set:n=(i=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"value"))==null?void 0:i.set}catch{}if(!n){b(e,t);return}d(e)===o&&(e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement?e.value+=" "+t:e.textContent+=" "+t),n.call(e,o+" "+t);const s=new Event("input",{bubbles:!0});e.dispatchEvent(s)}function C(){const{userAgent:e}=navigator;let t;return e.match(/chrome|chromium|crios/i)?t="chrome":e.match(/firefox|fxios/i)?t="firefox":e.match(/safari/i)?t="safari":e.match(/opr\//i)?t="opera":e.match(/edg/i)?t="edge":t="chrome",t}async function N(){var a,c;const e=await p.fetchQuery(S.MerlinConfig),{checkShortcutStatus:t}=e;if(!t)return!1;const o=await f.commands.getAll(),n=(a=o.find(i=>i.name==="toggle_merlin"))==null?void 0:a.shortcut,r=(c=o.find(i=>i.name==="_execute_action"))==null?void 0:c.shortcut;let s=!1;if(n&&r){if(n==="⇧⌘,"||n==="Ctrl+Shift+Comma")return!1;s=n!==r}return s}function H(e){["liveschoolapp.com","github.com","app.simplelogin.io","egittoturismo.com"].includes(window.location.host)?document.documentElement.append(e):document.documentElement.prepend(e)}async function I(e){m.runtime.sendMessage({action:w.OPEN_NEWTAB,payload:{url:e}},t=>{var o,n;((o=m.runtime.lastError)==null?void 0:o.message)==="Could not establish connection. Receiving end does not exist."?console.error("openNewTab","extension not found"):console.error("openNewTab",(n=m.runtime.lastError)==null?void 0:n.message)})}const B=e=>{f.storage.sync.get("merlinSettings").then(t=>{if(!t.merlinSettings){const n={isDisabled:!1,whiteList:[]};t.merlinSettings=n,f.storage.sync.set({merlinSettings:JSON.stringify(n)})}const o=JSON.parse(t.merlinSettings);e(o)}).catch(t=>{})},T=()=>{const{lastError:e}=f.runtime;e&&(e.message,f.runtime.reload())},M=async e=>{try{m.runtime.sendMessage(e)}catch{T()}};function R(e){try{if(!e)return"some time ago";e=new Date(e)}catch{return"some time ago"}const t=new Date,o=t.toDateString()===e.toDateString(),n=t.toDateString()===new Date(e.getTime()+864e5).toDateString(),r=t.getFullYear()===e.getFullYear();return o?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n?e.toLocaleDateString([],{day:"2-digit",month:"short"}):r?e.toLocaleDateString([],{day:"2-digit",month:"short"}):e.getFullYear().toString()}function E(){var t;const e=((t=navigator==null?void 0:navigator.userAgentData)==null?void 0:t.platform)||(navigator==null?void 0:navigator.platform)||"unknown";return e==="Windows"||e==="windows"||e==="win"||e==="win32"?"win":"other"}function F(){return E()==="win"?"ctrl+m":"command+m"}const _=async e=>{const t=await u.get("userSitePreferences"),o=window.location.hostname;if(t&&t[e]){const n=t[e];if(n&&n.includes(o))return!0}return!1},k=async(e,t="disable",o=window.location.hostname)=>{const n=await u.get("userSitePreferences");if(t==="disable")try{if(n&&n[e]){const r=n[e];r.includes(o)||await u.set("userSitePreferences",{...n,[e]:[...r,o]})}else await u.set("userSitePreferences",{...n,[e]:[o]})}catch{}else if(t==="enable")try{if(n&&n[e]){const r=n[e];r.includes(o)&&await u.set("userSitePreferences",{...n,[e]:r.filter(s=>s!==o)})}}catch{}};function q(e,t=300){let o;return(...n)=>{clearTimeout(o),o=setTimeout(()=>{e.apply(this,n)},t)}}function y(e,t=300){let o,n=!0;return(...r)=>{n&&(e.apply(this,r),n=!1),clearTimeout(o),o=setTimeout(()=>{e.apply(this,r)},t)}}const U=(e,t)=>{let o;return function(){const n=arguments,r=this;o||(e.apply(r,n),o=!0,setTimeout(()=>o=!1,t))}};function j(e){return Object.values(g).includes(e)?e:"DEFAULT"}const J=e=>JSON.parse(JSON.stringify(e)),V=()=>document.URL===`${h.DOMAIN}/onboarding`,Y=async e=>new Promise((t,o)=>{try{const n=window.document.querySelector(e);if(n){t(n);return}const r=new MutationObserver(y(()=>{const s=document.querySelector(e);s&&(t(s),r.disconnect())},50));r.observe(document.body,{childList:!0})}catch(n){o(n)}}),z=e=>chrome.runtime.getURL(e);function W(e=document.body){const t=e.cloneNode(!0);return t.querySelectorAll('*[style*="display: none"]').forEach(n=>{var r;(r=n.parentNode)==null||r.removeChild(n)}),t}const $=(e,t,o=10,n=!1)=>{if(!t||!e.current)return{};const r=e.current.getBoundingClientRect(),s={above:r.top-o,below:window.innerHeight-r.bottom-o,left:r.left-o,right:window.innerWidth-r.right-o},{above:a,below:c,left:i,right:l}=s;return a>c?n&&t.width/2+o*2<i&&t.width/2+o*2<l?{bottom:window.innerHeight-r.top+"px",left:r.left-(t.width-r.width)/2+"px"}:i>l||t.width*2+o*2<i?{bottom:window.innerHeight-r.top+"px",right:window.innerWidth-r.right+"px"}:{bottom:window.innerHeight-r.top+"px",left:r.left+"px"}:n&&t.width/2+o*2<i&&t.width/2+o*2<l?{left:r.left+r.width/2-t.width/2+"px",top:r.bottom+"px"}:i>l||t.width*2+o*2<i?{right:window.innerWidth-r.right+"px",top:r.bottom+"px"}:{left:r.left+"px",top:r.bottom+"px"}};export{Y as a,B as b,k as c,b as d,_ as e,d as f,z as g,D as h,y as i,q as j,V as k,J as l,H as m,j as n,I as o,R as p,F as q,W as r,M as s,U as t,$ as u,N as v,C as w};
