import{r as s,j as u}from"./localStorage-70c0cae5.js";import{c as V,P as q,a as m,b as L,D as X,e as z,d as K,h as J}from"./index-6e4841df.js";import{u as G,e as Q,c as ee}from"./button-274f6d28.js";import{c as U,A as te,b as oe,e as re,d as ne,R as se}from"./index-82f4bfa1.js";var ae=(e=>(e.FROM_COMMENT_SECTION_HIGHLIGHTS_BUTTON="FROM_COMMENT_SECTION_HIGHLIGHTS_BUTTON",e.FROM_TWEETIFY_MID_BUTTONS="FROM_TWEETIFY_MID_BUTTONS",e.FROM_CHAT_UI="FROM_CHAT_UI",e.FROM_YT_SUMMARIZER="FROM_YT_SUMMARIZER",e))(ae||{}),ie=(e=>(e.INITIATE_COMMENT_PROCESS="INITIATE_COMMENT_PROCESS",e.GET_SHARED_STATE_ON_MOUNTING="GET_SHARED_STATE_ON_MOUNTING",e))(ie||{}),le=(e=>(e.NO_CAPTIONS_UPDATE_TRIGGER="NO_CAPTIONS_UPDATE_TRIGGER",e))(le||{}),ce=(e=>(e.UPDATE_COST_AND_ADS_STATE="UPDATE_COST_AND_ADS_STATE",e.SET_HIGHLIGHTS_SUCCESS="SET_HIGHLIGHTS_SUCCESS",e.RESET_HIGHLIGHTS_BUTTON="RESET_HIGHLIGHTS_BUTTON",e))(ce||{}),ue=(e=>(e.OPEN_TWEETIFY_IN_CHAT="OPEN_TWEETIFY_IN_CHAT",e.HANDLE_SUMMARIZE_FROM_MID_BUTTON="HANDLE_SUMMARIZE_FROM_MID_BUTTON",e))(ue||{});const He=(e,o="*",t)=>{window.parent.postMessage(e,o,t)};var[b,Le]=V("Tooltip",[U]),P=U(),j="TooltipProvider",de=700,N="tooltip.open",[pe,A]=b(j),k=e=>{const{__scopeTooltip:o,delayDuration:t=de,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:i}=e,[c,T]=s.useState(!0),a=s.useRef(!1),d=s.useRef(0);return s.useEffect(()=>{const l=d.current;return()=>window.clearTimeout(l)},[]),u.jsx(pe,{scope:o,isOpenDelayed:c,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(d.current),T(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>T(!0),r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:s.useCallback(l=>{a.current=l},[]),disableHoverableContent:n,children:i})};k.displayName=j;var w="Tooltip",[Te,I]=b(w),F=e=>{const{__scopeTooltip:o,children:t,open:r,defaultOpen:n=!1,onOpenChange:i,disableHoverableContent:c,delayDuration:T}=e,a=A(w,e.__scopeTooltip),d=P(o),[l,p]=s.useState(null),_=z(),f=s.useRef(0),v=c??a.disableHoverableContent,x=T??a.delayDuration,E=s.useRef(!1),[h=!1,C]=K({prop:r,defaultProp:n,onChange:H=>{H?(a.onOpen(),document.dispatchEvent(new CustomEvent(N))):a.onClose(),i==null||i(H)}}),R=s.useMemo(()=>h?E.current?"delayed-open":"instant-open":"closed",[h]),O=s.useCallback(()=>{window.clearTimeout(f.current),E.current=!1,C(!0)},[C]),g=s.useCallback(()=>{window.clearTimeout(f.current),C(!1)},[C]),D=s.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{E.current=!0,C(!0)},x)},[x,C]);return s.useEffect(()=>()=>window.clearTimeout(f.current),[]),u.jsx(se,{...d,children:u.jsx(Te,{scope:o,contentId:_,open:h,stateAttribute:R,trigger:l,onTriggerChange:p,onTriggerEnter:s.useCallback(()=>{a.isOpenDelayed?D():O()},[a.isOpenDelayed,D,O]),onTriggerLeave:s.useCallback(()=>{v?g():window.clearTimeout(f.current)},[g,v]),onOpen:O,onClose:g,disableHoverableContent:v,children:t})})};F.displayName=w;var S="TooltipTrigger",B=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,n=I(S,t),i=A(S,t),c=P(t),T=s.useRef(null),a=G(o,T,n.onTriggerChange),d=s.useRef(!1),l=s.useRef(!1),p=s.useCallback(()=>d.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),u.jsx(te,{asChild:!0,...c,children:u.jsx(q.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:a,onPointerMove:m(e.onPointerMove,_=>{_.pointerType!=="touch"&&!l.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),l.current=!0)}),onPointerLeave:m(e.onPointerLeave,()=>{n.onTriggerLeave(),l.current=!1}),onPointerDown:m(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:m(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:m(e.onBlur,n.onClose),onClick:m(e.onClick,n.onClose)})})});B.displayName=S;var M="TooltipPortal",[fe,ve]=b(M,{forceMount:void 0}),_e=e=>{const{__scopeTooltip:o,forceMount:t,children:r,container:n}=e,i=I(M,o);return u.jsx(fe,{scope:o,forceMount:t,children:u.jsx(L,{present:t||i.open,children:u.jsx(J,{asChild:!0,container:n,children:r})})})};_e.displayName=M;var y="TooltipContent",Y=s.forwardRef((e,o)=>{const t=ve(y,e.__scopeTooltip),{forceMount:r=t.forceMount,side:n="top",...i}=e,c=I(y,e.__scopeTooltip);return u.jsx(L,{present:r||c.open,children:c.disableHoverableContent?u.jsx(W,{side:n,...i,ref:o}):u.jsx(Ee,{side:n,...i,ref:o})})}),Ee=s.forwardRef((e,o)=>{const t=I(y,e.__scopeTooltip),r=A(y,e.__scopeTooltip),n=s.useRef(null),i=G(o,n),[c,T]=s.useState(null),{trigger:a,onClose:d}=t,l=n.current,{onPointerInTransitChange:p}=r,_=s.useCallback(()=>{T(null),p(!1)},[p]),f=s.useCallback((v,x)=>{const E=v.currentTarget,h={x:v.clientX,y:v.clientY},C=me(h,E.getBoundingClientRect()),R=ye(h,C),O=Re(x.getBoundingClientRect()),g=ge([...R,...O]);T(g),p(!0)},[p]);return s.useEffect(()=>()=>_(),[_]),s.useEffect(()=>{if(a&&l){const v=E=>f(E,l),x=E=>f(E,a);return a.addEventListener("pointerleave",v),l.addEventListener("pointerleave",x),()=>{a.removeEventListener("pointerleave",v),l.removeEventListener("pointerleave",x)}}},[a,l,f,_]),s.useEffect(()=>{if(c){const v=x=>{const E=x.target,h={x:x.clientX,y:x.clientY},C=(a==null?void 0:a.contains(E))||(l==null?void 0:l.contains(E)),R=!Oe(h,c);C?_():R&&(_(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[a,l,c,d,_]),u.jsx(W,{...e,ref:i})}),[xe,Ce]=b(w,{isInside:!1}),W=s.forwardRef((e,o)=>{const{__scopeTooltip:t,children:r,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...T}=e,a=I(y,t),d=P(t),{onClose:l}=a;return s.useEffect(()=>(document.addEventListener(N,l),()=>document.removeEventListener(N,l)),[l]),s.useEffect(()=>{if(a.trigger){const p=_=>{const f=_.target;f!=null&&f.contains(a.trigger)&&l()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[a.trigger,l]),u.jsx(X,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:p=>p.preventDefault(),onDismiss:l,children:u.jsxs(oe,{"data-state":a.stateAttribute,...d,...T,ref:o,style:{...T.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(Q,{children:r}),u.jsx(xe,{scope:t,isInside:!0,children:u.jsx(re,{id:a.contentId,role:"tooltip",children:n||r})})]})})});Y.displayName=y;var Z="TooltipArrow",he=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,n=P(t);return Ce(Z,t).isInside?null:u.jsx(ne,{...n,...r,ref:o})});he.displayName=Z;function me(e,o){const t=Math.abs(o.top-e.y),r=Math.abs(o.bottom-e.y),n=Math.abs(o.right-e.x),i=Math.abs(o.left-e.x);switch(Math.min(t,r,n,i)){case i:return"left";case n:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ye(e,o,t=5){const r=[];switch(o){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return r}function Re(e){const{top:o,right:t,bottom:r,left:n}=e;return[{x:n,y:o},{x:t,y:o},{x:t,y:r},{x:n,y:r}]}function Oe(e,o){const{x:t,y:r}=e;let n=!1;for(let i=0,c=o.length-1;i<o.length;c=i++){const T=o[i].x,a=o[i].y,d=o[c].x,l=o[c].y;a>r!=l>r&&t<(d-T)*(r-a)/(l-a)+T&&(n=!n)}return n}function ge(e){const o=e.slice();return o.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Ie(o)}function Ie(e){if(e.length<=1)return e.slice();const o=[];for(let r=0;r<e.length;r++){const n=e[r];for(;o.length>=2;){const i=o[o.length-1],c=o[o.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))o.pop();else break}o.push(n)}o.pop();const t=[];for(let r=e.length-1;r>=0;r--){const n=e[r];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))t.pop();else break}t.push(n)}return t.pop(),o.length===1&&t.length===1&&o[0].x===t[0].x&&o[0].y===t[0].y?o:o.concat(t)}var be=k,Pe=F,we=B,$=Y;const Ge=be,Ue=Pe,je=we,Ne=s.forwardRef(({className:e,sideOffset:o=4,...t},r)=>u.jsx($,{ref:r,sideOffset:o,className:ee("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Ne.displayName=$.displayName;export{le as C,ae as P,Ue as T,ce as Y,je as a,Ne as b,Ge as c,ie as d,ue as e,He as s};
