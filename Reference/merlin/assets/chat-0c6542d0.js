import"./modulepreload-polyfill-3cfb730f.js";import{j as s,r}from"./localStorage-70c0cae5.js";import{c as d}from"./client-4954293f.js";import{M as u}from"./browserPolyfillWrapper-bb116cae.js";import{C as f,R as E}from"./reactQueryProviderExtension-4a0c189d.js";import{C as I}from"./chatIframe-a17298e1.js";import"./persist-4b6dccac.js";import"./index-eedd1636.js";/* empty css             */import"./i18n-bc409d68.js";import"./useTranslation-24cdda08.js";import"./createReactComponent-640fc4e6.js";import"./themeContext-5e650432.js";import"./button-274f6d28.js";import"./index-82f4bfa1.js";import"./index-6e4841df.js";import"./select-456431be.js";import"./IconCheck-e595c264.js";import"./index-e4326246.js";import"./analytics-910dabef.js";import"./index-f3a3d194.js";import"./merlin-logo-4543e454.js";import"./helper-0e21f9fb.js";import"./motion-6c2f4b83.js";import"./IconLoader-280e82e6.js";import"./webAccess-4d0d2b1d.js";import"./backend-0efbfbef.js";import"./useSSE-f967edd7.js";import"./debounce-c70d88e0.js";import"./utils-9bb6629d.js";import"./types-ad7f11a6.js";import"./tooltip-d01590d2.js";import"./index-82b528a6.js";import"./accordion-25b76479.js";import"./IconArrowUpRight-b5286921.js";import"./IconArrowLeft-27560546.js";function h(){const[m,a]=r.useState([]),[i,p]=r.useState(!1);r.useEffect(()=>{if(i&&m.length>0){const t=document.getElementById("merlin-extension-chat-inner-iframe");m.forEach(o=>{setTimeout(()=>{var e;(e=t==null?void 0:t.contentWindow)==null||e.postMessage(o,"*")},10)}),a([])}},[i,m]),r.useEffect(()=>{if(i){const t=document.getElementById("merlin-extension-chat-inner-iframe"),o=chrome.runtime.getManifest().version;setTimeout(()=>{var e,n;(e=t==null?void 0:t.contentWindow)==null||e.postMessage({action:"SET_EXTENSION_VERSION",version:o},"*"),(n=t==null?void 0:t.contentWindow)==null||n.postMessage({action:"LOAD_IFRAME"},"*")},100)}},[i]);const c=`${u}/chat`;return r.useEffect(()=>{function t(o){var e;if(((e=o.data)==null?void 0:e.action)==="IFRAME_READY"){window.parent.postMessage({action:"IFRAME_READY"},"*");return}setTimeout(()=>{a(n=>[...n,o.data])},10)}return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[]),s.jsx("iframe",{allow:I,id:"merlin-extension-chat-inner-iframe",onLoad:()=>{setTimeout(()=>{p(!0)},1e3)},src:c,style:{height:"100%",width:"100%"}})}d.createRoot(document.getElementById("root")).render(s.jsx(f,{children:s.jsx(E,{children:s.jsx(h,{})})}));
